(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9460,4718,4924,6808],{60937:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironment2",function(){return t(94538)}])},98967:function(e,n,t){"use strict";var r=t(14251),i=t(52875),o=t(9941),a=t(35944),l=t(60357),c=t.n(l),u=t(67294),s=t(19526),d=t(37504),f=t(59641),p=t(7889),h=t(89735),v=t(6625);n.Z=function(e){var n=e.title,t=void 0===n?"Sign up":n,l=e.description,m=void 0===l?"Code, create, and learn together on Replit":l,g=e.onSuccess,Z=void 0===g?function(){}:g,y=e.onFailure,b=void 0===y?function(){}:y,w=e.onAnonSuccess,x=void 0===w?function(){}:w,k=e.showLoginFirst,C=void 0!==k&&k,R=e.isTeacher,I=void 0!==R&&R,T=e.toggleTeacher,S=void 0===T?function(){}:T,G=e.allowAnon,E=void 0!==G&&G,P=e.showForm,D=void 0===P||P,U=e.showSuccess,B=void 0!==U&&U,_=e.source,X=(0,o.Z)(u.useState(C),2),M=X[0],A=X[1],O=(0,v.Z)();return(0,a.BX)("div",{"data-cy":"auth-modal",className:"jsx-17a5f6998e0a3cdd auth-modal",children:[(0,a.BX)(s.gC,{align:"center",spacing:2,children:[(0,a.tZ)("div",{className:"jsx-17a5f6998e0a3cdd auth-modal-title",children:t}),(0,a.tZ)("div",{className:"jsx-17a5f6998e0a3cdd auth-modal-description",children:m}),(0,a.tZ)(p.Z,{path:"/public/animations/success.json",css:[f.l0.position.absolute,f.l0.left(0),f.l0.top(0),f.l0.right(0)],show:B})," ",D?(0,a.tZ)(d.Z,{onChangeAuth:function(){O.current&&A(!M)},isTeacher:I,isLogin:M,onSubmit:function(e){if("error"in e)b(e);else if("user"in e&&e.user){M&&!e.social||e.social&&!e.newUser||(0,h.j)(e.user.id.toString()),Z((0,i.Z)((0,r.Z)({},e),{isLogin:M}))}},toggleTeacher:S,source:_}):null,E?(0,a.tZ)("div",{className:"jsx-17a5f6998e0a3cdd auth-modal-anon",children:(0,a.tZ)("a",{onClick:x,role:"button",tabIndex:0,onKeyDown:x,className:"jsx-17a5f6998e0a3cdd",children:"continue as Anonymous"})}):null]}),(0,a.tZ)(c(),{id:"17a5f6998e0a3cdd",children:".auth-modal.jsx-17a5f6998e0a3cdd{max-width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:var(--space-32)var(--space-16)}.title-container.jsx-17a5f6998e0a3cdd{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-bottom:var(--space-16)}.auth-modal-title.jsx-17a5f6998e0a3cdd{text-align:center;color:var(--foreground-default);font-size:var(--font-size-header-big);font-weight:var(--font-weight-medium)}.auth-modal-description.jsx-17a5f6998e0a3cdd{text-align:center;color:var(--foreground-dimmer);font-size:var(--font-size-subhead-default)}.auth-modal-anon.jsx-17a5f6998e0a3cdd{margin-top:14px;font-size:14px}.auth-modal-anon.jsx-17a5f6998e0a3cdd a.jsx-17a5f6998e0a3cdd{color:var(--accent-primary-default);text-decoration:none;cursor:pointer}"})]})}},57731:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(35944),i=t(60357),o=t.n(i),a=(t(67294),t(94184)),l=t.n(a),c=t(62913);function u(e){var n=e.className,t=e.src,i=e.alt,a=e.size,u=e.title;return(0,r.BX)("div",{className:o().dynamic([["381115a7727c7cb3",[a,a]]])+" "+(l()("avatar",n)||""),children:[(0,r.tZ)(c.Z,{title:u,width:a,height:a,objectFit:"cover",layout:"responsive",alt:i,src:t}),(0,r.tZ)(o(),{id:"381115a7727c7cb3",dynamic:[a,a],children:"div.__jsx-style-dynamic-selector{-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;overflow:hidden;width:".concat(a,"px;height:").concat(a,"px}")})]})}},7243:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(35944),i=(t(67294),t(69346)),o=t(81255);function a(e){var n=e.gap,t=e.inset,a=e.children,l=e.className;return(0,r.tZ)(i.G,{className:l,css:[{overflowX:"auto",overflowY:"hidden","::-webkit-scrollbar":[o.l0.display.none]}],children:(0,r.tZ)(i.G,{css:[o.l0.px(t),o.l0.rowWithGap(n),{width:"fit-content"}],children:a})})}},42699:function(e,n,t){"use strict";t.d(n,{l:function(){return o},x:function(){return i}});var r=t(60977),i=function(e){(0,r.j)(r.U3.COURSE_ACTION,e)},o=function(e){(0,r.j)(r.U3.LESSON_ACTION,e)}},21767:function(e,n,t){"use strict";t.d(n,{Y:function(){return o}});var r=t(32692);function i(){var e=(0,r.Z)(["\n  fragment ReplLinkRepl on Repl {\n    id\n    url\n    nextPagePathname\n  }\n"]);return i=function(){return e},e}var o=(0,t(31230).Ps)(i())},35923:function(e,n,t){"use strict";t.d(n,{V:function(){return v},Q:function(){return w}});var r=t(48732),i=t(14251),o=t(53144),a=t(75815),l=.5*(Math.sqrt(3)-1),c=(3-Math.sqrt(3))/6,u=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),s=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;(0,a.Z)(this,e);var t="function"===typeof n?n:f(n);this.p=d(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}return e.prototype.noise2D=function(e,n){var t,r,i=this.permMod12,o=this.perm,a=0,s=0,d=0,f=(e+n)*l,p=Math.floor(e+f),h=Math.floor(n+f),v=(p+h)*c,m=e-(p-v),g=n-(h-v);m>g?(t=1,r=0):(t=0,r=1);var Z=m-t+c,y=g-r+c,b=m-1+2*c,w=g-1+2*c,x=255&p,k=255&h,C=.5-m*m-g*g;if(C>=0){var R=3*i[x+o[k]];a=(C*=C)*C*(u[R]*m+u[R+1]*g)}var I=.5-Z*Z-y*y;if(I>=0){var T=3*i[x+t+o[k+r]];s=(I*=I)*I*(u[T]*Z+u[T+1]*y)}var S=.5-b*b-w*w;if(S>=0){var G=3*i[x+1+o[k+1]];d=(S*=S)*S*(u[G]*b+u[G+1]*w)}return 70*(a+s+d)},e}();function d(e){for(var n=new Uint8Array(256),t=0;t<256;t++)n[t]=t;for(var r=0;r<255;r++){var i=r+~~(e()*(256-r)),o=n[r];n[r]=n[i],n[i]=o}return n}function f(e){var n=0,t=0,r=0,i=1,o=function(){var e=4022871197;return function(n){n=n.toString();for(var t=0;t<n.length;t++){var r=.02519603282416938*(e+=n.charCodeAt(t));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();return n=o(" "),t=o(" "),r=o(" "),(n-=o(e))<0&&(n+=1),(t-=o(e))<0&&(t+=1),(r-=o(e))<0&&(r+=1),function(){var e=2091639*n+2.3283064365386963e-10*i;return n=t,t=r,r=e-(i=0|e)}}var p=new s;var h=t(25108);function v(e){var n=!1,t=0,r=0,i=null,o=function(l){if(n){var c=l-t;r+=c,t=l,i=window.requestAnimationFrame(o),e({elapsedTime:r,deltaTime:c,stop:a})}},a=function(){n&&(n=!1,i&&window.cancelAnimationFrame(i))};return{start:function(){n||(r=0,t=performance.now(),n=!0,i=window.requestAnimationFrame(o))},stop:a}}var m=function(){return(0,o.hd)(600,1200)},g=function(){return(0,o.hd)(1,3)},Z=function(){return{width:(0,o.hd)(5,20),height:(0,o.hd)(5,20)}},y=function(){return(0,o.vF)()};function b(e){return Array.isArray(e)?(0,o.DQ)(e):(0,r.Z)(e,Function)?e():e}function w(){var e=!1,n=null,t=null,r=[],a=null,l={},c=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=function(){var e=i.value;if(l[e])return"continue";var n=new Image;n.src=e,n.onerror=function(){h.error('Failed to load particle image "'.concat(e,'"'))},l[e]=n},a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)o()}catch(c){t=!0,r=c}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}};return{getIsInstalled:function(){return e},addParticles:function(e){for(var n=e.x,t=e.y,u=e.numParticles,s=void 0===u?150:u,d=e.spread,f=void 0===d?60:d,p=e.heading,h=void 0===p?90:p,v=e.airDrag,w=void 0===v?.9:v,x=e.color,k=void 0===x?y:x,C=e.gravity,R=void 0===C?800:C,I=e.velocity,T=void 0===I?m:I,S=e.size,G=void 0===S?Z:S,E=e.lifetime,P=void 0===E?g:E,D=e.flip,U=void 0===D||D,B=e.image,_=void 0===B?void 0:B,X=b(f),M=b(h),A=(0,o.Id)(X),O=(0,o.Id)(-M),F=b(s),z=0;z<F;z++){var L=O+(0,o.hd)(-A/2,A/2),N=b(T),W=b(G),j=W.width,H=W.height,V=b(P),K=b(k),q=b(w),Y=b(n),$=b(t),Q=b(_);"string"===typeof Q&&(l[Q]||c([Q]),Q=l[Q]),r.push((0,i.Z)({seed:(0,o.hd)(0,1e5),x:Y,y:$,gravity:R,airDrag:q,scaleX:1,scaleY:1,rotation:(0,o.hd)(0,(0,o.Id)(360)),velocityX:Math.cos(L)*N,velocityY:Math.sin(L)*N,angularVelocity:(0,o.hd)((0,o.Id)(-400),(0,o.Id)(400)),color:K,alpha:1,width:j,height:H,flip:U,lifetime:V,lifetimeRemaining:V},Q?{image:Q,type:"image"}:{type:(0,o.DQ)(["rectangle","ellipse"])}))}null===a||void 0===a||a.start()},clearParticles:function(){r=[]},uninstall:function(){var r;e&&(n&&(null===(r=document.body)||void 0===r?void 0:r.contains(n))&&document.body.removeChild(n),a&&a.stop(),n=null,t=null,e=!1,l={})},install:function(){e||(n=function(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex="999999",e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight,e.id="replit-particles-simulation",e.setAttribute("role","image"),e.ariaHidden="true",e}(),(t=n.getContext("2d"))&&(document.body.appendChild(n),a=v((function(e){var i=e.deltaTime,a=e.stop;if(n&&t){var l=t,c=window.scrollX,u=window.scrollY;n.width!==document.documentElement.clientWidth&&(n.width=document.documentElement.clientWidth),n.height!==document.documentElement.clientHeight&&(n.height=document.documentElement.clientHeight),t.clearRect(0,0,n.width,n.height),r.map((function(e){return function(e){var n=e.particle,t=e.deltaTime;n.velocityY+=n.gravity*t/1e3,n.x+=n.velocityX*t/1e3,n.y+=n.velocityY*t/1e3,n.rotation+=n.angularVelocity*t/1e3,n.velocityX*=n.airDrag,n.velocityY*=n.airDrag,n.flip&&(n.scaleY=2*(0,o.WE)(n.lifetimeRemaining,.5));var r=(0,o.NC)(n.velocityX,n.velocityY),i=(0,o.$G)(n.velocityX,n.velocityY),a=r+.05*p.noise2D(n.seed,n.lifetimeRemaining);n.velocityX=Math.cos(a)*i,n.velocityY=Math.sin(a)*i,n.lifetimeRemaining-=t/1e3,n.lifetimeRemaining<=0?n.alpha=0:n.alpha=1-(n.lifetime-n.lifetimeRemaining)/n.lifetime}({particle:e,deltaTime:i})})),r.map((function(e){return function(e){var n=e.particle,t=e.ctx,r=e.scrollX,i=e.scrollY,o=n.width*n.scaleX,a=n.height*n.scaleY,l=n.x-r,c=n.y-i;t.save(),t.translate(l,c),t.rotate(n.rotation),t.globalAlpha=n.alpha,"image"===n.type?t.drawImage(n.image,-o/2,-a/2,o,a):"rectangle"===n.type?(t.fillStyle=n.color,t.fillRect(-o/2,-a/2,o,a)):"ellipse"===n.type&&(t.fillStyle=n.color,t.beginPath(),t.ellipse(0,0,o/2,a/2,0,0,2*Math.PI),t.fill()),t.restore()}({particle:e,ctx:l,scrollX:c,scrollY:u})})),0===(r=r.filter((function(e){return e.lifetimeRemaining>0}))).length&&a()}})),e=!0))},preloadImages:c,unloadImages:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;delete l[a]}}catch(c){t=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}}}},46808:function(e,n,t){"use strict";t.d(n,{$:function(){return h},s:function(){return r}});var r,i=t(14251),o=t(44747),a=t(9941),l=t(67294),c=t(53144),u=t(35923),s=t(7182),d=t(42895),f=(0,u.Q)(),p=(0,s.cn)(f);function h(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preloadImages,n=(0,a.Z)((0,s.KO)(p),1),t=n[0],r=(0,d.T)();l.useEffect((function(){return t.install(),function(){t.uninstall()}}),[t]),l.useEffect((function(){e&&t.preloadImages(e)}),[t,e]);var u=function(e){r||t.addParticles(e)},f=function(e){var n=e.element,t=(0,o.Z)(e,["element"]);if(!r){var a=(0,c.tj)(n),l=a.x,s=a.y;u((0,i.Z)({x:l,y:s},t))}},h=function(e){r||t.addParticles((0,i.Z)({numParticles:125,spread:360,velocity:function(){return(0,c.hd)(400,900)},size:function(){return{width:(0,c.hd)(5,15),height:(0,c.hd)(5,25)}}},e))},v=function(e){var n=e.element,t=(0,o.Z)(e,["element"]);if(!r){var a=(0,c.tj)(n),l=a.x,u=a.y;h((0,i.Z)({x:l,y:u},t))}},m=function(e){var n=e.direction,a=(0,o.Z)(e,["direction"]);r||t.addParticles((0,i.Z)({heading:n},a))},g=function(e){var n=e.element,a=e.direction,l=(0,o.Z)(e,["element","direction"]);if(!r){var u=(0,c.tj)(n),s=u.x,d=u.y;t.addParticles((0,i.Z)({x:s,y:d,numParticles:100,velocity:function(){return(0,c.hd)(400,1500)},spread:60,size:function(){return{width:(0,c.hd)(5,15),height:(0,c.hd)(5,25)}},heading:a},l))}};return{fireBurst:u,fireBurstFrom:f,fireCircularBurst:h,fireCircularBurstFrom:v,fireDirectionalBurst:m,fireDirectionalBurstFrom:g}}!function(e){e[e.East=0]="East",e[e.NorthEast=45]="NorthEast",e[e.North=90]="North",e[e.NorthWest=135]="NorthWest",e[e.West=180]="West",e[e.SouthWest=225]="SouthWest",e[e.South=270]="South"}(r||(r={}))},53144:function(e,n,t){"use strict";t.d(n,{$G:function(){return f},DQ:function(){return l},Id:function(){return s},NC:function(){return d},WE:function(){return h},hd:function(){return c},tj:function(){return o},vF:function(){return u}});var r=t(6611),i=t.n(r);function o(e){var n=function(e){var n=e.getBoundingClientRect();return{x:n.left+n.width/2,y:n.top+n.height/2}}(e);return{x:n.x+window.scrollX,y:n.y+window.scrollY}}function a(e,n){return i()(e,n,!1)}function l(e){return e[a(0,e.length-1)]}function c(e,n){return i()(e,n,!0)}function u(){return"hsl(".concat(a(0,360),", 100%, 70%)")}function s(e){return e*Math.PI/180}function d(e,n){return Math.atan2(n,e)}function f(e,n){return Math.sqrt(Math.pow(e,2)+Math.pow(n,2))}function p(e,n){return(e%n+n)%n}function h(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n-Math.abs(p(e,2*n)-n)}},54854:function(e,n,t){"use strict";function r(e,n){if(!e)return null;var t=e[n];return t?Array.isArray(t)?null:t:null}t.d(n,{Z:function(){return r}})},47024:function(e,n,t){"use strict";t.d(n,{Z:function(){return w}});var r=t(14251),i=t(52875),o=t(44747),a=t(9941),l=t(35944),c=t(67294),u=t(32692),s=t(31230),d=t(50319);function f(){var e=(0,u.Z)(["\n  mutation SetFollowing($input: setFollowingInput!) {\n    setFollowing(input: $input) {\n      ... on FollowResult {\n        targetUser {\n          id\n          isFollowedByCurrentUser\n          followerCount\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return f=function(){return e},e}var p={},h=(0,s.Ps)(f());var v=t(93058),m=t(88075),g=t(92002),Z=t(59641),y=t(98967),b=t(60977),w=function(e){var n=e.user,t=e.subtle,u=e.targetName,s=(0,o.Z)(e,["user","subtle","targetName"]),f=t?void 0:"primary",w=(0,a.Z)(c.useState(!1),2),x=w[0],k=w[1],C=n.isFollowedByCurrentUser,R=(0,v.Z)().showError,I=(0,a.Z)(function(e){var n=(0,r.Z)({},p,e);return d.D(h,n)}({onCompleted:function(e){var n,t,r;"NotFoundError"===(null===(n=e.setFollowing)||void 0===n?void 0:n.__typename)&&R(e.setFollowing.message),"UserError"===(null===(t=e.setFollowing)||void 0===t?void 0:t.__typename)&&R(e.setFollowing.message),"UnauthorizedError"===(null===(r=e.setFollowing)||void 0===r?void 0:r.__typename)&&k(!0)}}),2),T=I[0],S=I[1].loading,G=C?"Following":"Follow";return null!=u&&(G="".concat(G," ").concat(u)),(0,l.BX)(l.HY,{children:[(0,l.tZ)(Z.zx,(0,i.Z)((0,r.Z)({type:"button"},s),{colorway:C?void 0:f,text:G,iconLeft:C?(0,l.tZ)(m.Z,{}):(0,l.tZ)(g.Z,{}),onClick:function(e){e.stopPropagation(),T({variables:{input:{targetUserId:n.id,shouldFollow:!C}}}),C||(0,b.j)(b.U3.USER_FOLLOWED)},disabled:S,dataCy:"follow-button"})),(0,l.tZ)(Z.u_,{onRequestClose:function(){return k(!1)},isOpen:x,children:(0,l.tZ)(y.Z,{onSuccess:function(){(0,b.j)(b.U3.SIGNUP_FROM_FOLLOW_BUTTON_SUCCESSFUL)},onFailure:function(e){var n=e.error;R(n)},title:"Sign up to follow your favorite Replers.",description:"You\u2019ll then be able to follow "+n.username})})]})}},86800:function(e,n,t){"use strict";t.d(n,{JM:function(){return f},SL:function(){return s}});var r=t(14251),i=t(32692),o=t(31230),a=t(37887);function l(){var e=(0,i.Z)(['\n  fragment ReplEnvironment2CurrentUserLayoutFlags on CurrentUser {\n    id\n    flagDraftFiles: gate(feature: "flag-ws-draft-files")\n    flagGhostrunner: gate(feature: "flag-ghostrunner")\n  }\n']);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query ReplEnvironment2LayoutFlags {\n    currentUser {\n      id\n      ...ReplEnvironment2CurrentUserLayoutFlags\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.a(d,n)}},79611:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(67294),i=t(11163),o=t(23384);function a(e,n){var t=(0,i.useRouter)(),a=(0,o.D)({controlName:"migrate2nix-enabled"}),l="Repl"===(null===e||void 0===e?void 0:e.__typename)?e.language:null,c=(0,o.D)({controlName:"migrate-".concat(l,"-to-nix"),default:!1});(0,r.useEffect)((function(){if(a&&c&&"Repl"===(null===e||void 0===e?void 0:e.__typename)&&"nix"!==e.language&&"html"!==e.language&&"/migrateReplToNix"!==t.pathname&&!t.query.skipMigration&&!t.query.migrateNonNix){var n=[window.location.origin,window.location.pathname,"?migrateNonNix=1",window.location.hash].join("");window.location.replace(n)}}),[e,t,c,a]),(0,r.useEffect)((function(){if("SubscriptionExpiredError"===(null===e||void 0===e?void 0:e.__typename)){var r=e.replId,i=e.isOwner,o=n.split("/")[1].slice(1);t.replace({pathname:"/expiredPrivateRepl",query:{isOwner:i,ownerUsername:o,replId:r}},t.asPath)}}),[e,t,n])}},5804:function(e,n,t){"use strict";t.d(n,{JL:function(){return x},L8:function(){return Z},M6:function(){return g},QH:function(){return y},nr:function(){return m}});var r=t(67573),i=t(14251),o=t(69779),a=t(35944),l=t(67294),c=t(69346),u=t(81255),s=t(1144),d=t(46197),f=t(44365),p=t(72917),h=t(7243),v=t(68480);function m(e,n){var t,r=(null===(t=n.tags)||void 0===t?void 0:t.length)?n.tags.join(","):null;return{href:{pathname:"/postsFeed",query:{boardSlug:r,q:e}},as:{pathname:r?"/community/".concat(r):"/community/all",query:{q:e}}}}function g(e,n){return n?{href:{pathname:"/postsFeed",query:{boardSlug:e,order:n.order}},as:{pathname:"/community/".concat(e),query:(0,i.Z)({},n.order!==f.eR?{order:n.order.toLowerCase()}:{})}}:{href:{pathname:"/postsFeed",query:{boardSlug:e}},as:"/community/".concat(e)}}function Z(e){return g("all",e)}function y(e,n){var t=n.tags?n.tags.join(","):"all";return{href:{pathname:"/postsFeed",query:{boardSlug:t,order:(0,f.Zb)(e)}},as:{pathname:"/community/".concat(t),query:(0,i.Z)({},e!==f.eR?{order:(0,f.Zb)(e)}:{})}}}var b=c.K.div,w=v.Mz+32;function x(e){var n,t,i=e.tagGroups,f=e.params,m=(0,o.Z)(i.official).concat((0,o.Z)(i.community)).map((function(e){var n,t=Boolean(null===(n=f.tags)||void 0===n?void 0:n.includes(e.id)),r=t?Z(f):g(e.id,f);return(0,a.tZ)(p.t,{tag:e,link:r,isActive:t},e.id)})),y=(0,l.useState)(!1),x=y[0],k=y[1],C=(0,l.useRef)(null);return(0,l.useEffect)((function(){if(C.current){var e=new window.IntersectionObserver((function(e){e.forEach((function(e){window.scrollY<e.boundingClientRect.top-w?k(!1):k(!e.isIntersecting)}))}),{root:null,rootMargin:"".concat(-w,"px 0px 0px 0px"),threshold:1}),n=C.current;return e.observe(n),function(){e.unobserve(n),e.disconnect()}}}),[]),(0,a.BX)(c.G,{children:[(0,a.tZ)(b,{ref:C}),(0,a.BX)(c.G,{css:[u.l0.colWithGap(16),x&&(0,r.Z)({},d.A.desktop,[u.l0.position.fixed,u.l0.overflowY("auto"),u.l0.height("calc(100vh - ".concat(v.Mz,"px)")),u.l0.py(32),{top:v.Mz}])],children:[(0,a.tZ)(s.x,{color:"dimmer",children:"TOP TAGS"}),(0,a.BX)(c.G,{children:[(0,a.tZ)(h.Z,{gap:8,inset:16,css:[(n={},(0,r.Z)(n,d.A.desktop,[u.l0.display.none]),(0,r.Z)(n,"marginLeft","calc(-1 * ".concat(u.TV.space16,")")),(0,r.Z)(n,"marginRight","calc(-1 * ".concat(u.TV.space16,")")),n)],children:m}),(0,a.tZ)(c.G,{css:(t={},(0,r.Z)(t,d.A.mobile,[u.l0.display.none]),(0,r.Z)(t,d.A.desktop,[u.l0.colWithGap(32)]),t),children:(0,a.tZ)(c.G,{css:[u.l0.colWithGap(8),u.l0.align.start],children:m})})]})]})]})}},4924:function(e,n,t){"use strict";t.d(n,{Vs:function(){return b},ZP:function(){return x},p0:function(){return w}});var r=t(14251),i=t(52875),o=t(35944),a=(t(67294),t(41664)),l=t.n(a),c=t(70917),u=t(59641),s=t(53427),d=t(69928),f=t(5804),p=t(72917),h=t(88046),v=t(82447),m=t(45273),g=t(94718),Z=u.KD.a,y=(0,c.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function b(e){var n=e.tags,t=e.maxVisible,r=void 0===t?3:t,i=e.onTagClick,a=n.slice(0,r),l=n.length-a.length;return(0,o.BX)(u.G7,{css:[u.l0.rowWithGap(4),u.l0.align.center],children:[a.map((function(e){return(0,o.tZ)(p.t,{small:!0,tag:e,link:(0,f.M6)(e.id),onClick:i},e.id)})),l>0?(0,o.BX)(u.xv,{variant:"small",color:"dimmest",children:["+",l]}):null]})}function w(e){var n=e.repl,t=e.showOwner,a=e.maxVisibleTags,c=e.onReplClick,f=e.onUserClick,p=e.onTagClick,w=n.owner;return(0,o.BX)(u.G7,{css:[u.l0.colWithGap(16)],children:[(0,o.BX)(u.G7,{css:[u.l0.rowWithGap(8),u.l0.align.start,u.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(s.ZP,{size:84,iconUrl:n.iconUrl,alt:n.title}),(0,o.BX)(u.G7,{css:[u.l0.flex.growAndShrink(1),u.l0.colWithGap(4)],children:[(0,o.tZ)(l(),(0,i.Z)((0,r.Z)({passHref:!0},(0,h.j3)(n)),{children:(0,o.tZ)(Z,{css:[{color:"inherit"},y],onClick:c,children:(0,o.tZ)(u.xv,{variant:"subheadBig",children:n.title})})})),t&&w?(0,o.tZ)(u.G7,{css:[{maxWidth:"fit-content",zIndex:1}],children:(0,o.tZ)(g.Z,{username:w.username,children:(0,o.tZ)(v.ZP,{user:w,children:(0,o.BX)(Z,{css:[{color:"inherit"},u.l0.rowWithGap(4),u.l0.align.center,u.l0.pr(16)],onClick:f,children:[(0,o.tZ)(m.q,{src:w.image,username:w.username,size:16,layout:"intrinsic"}),(0,o.tZ)(u.xv,{children:w.username})]})})})}):null,n.description?(0,o.tZ)(u.xv,{color:"dimmer",maxLines:2,css:[u.l0.maxWidth(450)],children:n.description}):null]})]}),(0,o.BX)(u.G7,{css:[u.l0.rowWithGap(8),u.l0.justify.spaceBetween,u.l0.flex.wrap],children:[(0,o.tZ)(d.Z,{css:[u.l0.pb(2)],repl:n}),a?(0,o.tZ)(u.G7,{css:[u.l0.position.relative,u.l0.pt(2),{zIndex:1}],children:(0,o.tZ)(b,{tags:n.tags,maxVisible:a,onTagClick:p})}):null]})]})}function x(e){var n=e.repl,t=e.showOwner,r=e.maxVisibleTags,i=e.onReplClick,a=e.onUserClick,l=e.onTagClick,c=e.dataCy;return(0,o.tZ)(u.Tg,{css:[u.l0.borderRadius(8),u.l0.p(8),u.l0.position.relative,u.gU.filledAndOutlined,{border:"1px solid "+u.TV.outlineDimmest}],dataCy:c,children:(0,o.tZ)(w,{repl:n,showOwner:t,maxVisibleTags:r,onReplClick:i,onUserClick:a,onTagClick:l})})}},69928:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var r=t(35944),i=(t(67294),t(69346)),o=t(81255),a=t(12530),l=t(51995),c=t(75026),u=t(27843),s=t(34847);function d(e){var n=e.repl;return(0,r.BX)(i.G,{css:[o.l0.rowWithGap(16),o.l0.align.center],children:[(0,r.tZ)(a.Z,{small:!0,count:n.runCount,tooltip:(0,s.Z)("runs",n.runCount),children:(0,r.tZ)(l.Z,{})}),(0,r.tZ)(a.Z,{small:!0,count:n.commentCount,tooltip:(0,s.Z)("comment",n.commentCount),children:(0,r.tZ)(c.Z,{})}),(0,r.tZ)(a.Z,{small:!0,count:n.likeCount,tooltip:(0,s.Z)("like",n.likeCount),children:(0,r.tZ)(u.Z,{})})]})}},72917:function(e,n,t){"use strict";t.d(n,{g:function(){return x},t:function(){return b}});var r=t(14251),i=t(52875),o=t(35944),a=(t(67294),t(70917)),l=t(41664),c=t.n(l),u=t(69346),s=t(93160),d=t(81255),f=t(1144),p=t(44044),h=t(67629),v=t(16857),m=(0,a.iv)({border:"1px solid "+d.TV.accentPrimaryDefault,backgroundColor:"transparent"}),g=function(e){var n=e.isActive,t=e.small;return(0,a.iv)([d.l0.p(t?4:8),d.l0.align.center,d.l0.rowWithGap(4),d.l0.fontSize(12),n?m:p.gU.outlined,d.l0.borderRadius(16),{color:"inherit","&:active":m}])};function Z(e){var n=e.tag,t=e.isActive,r=e.isRemovable,i=e.small,a=i?"small":"text";return(0,o.tZ)(s.T,{elevated:t,css:[d.l0.borderRadius(16)],children:(0,o.BX)(s.T,{elevated:t,css:[g({isActive:t,small:i})],children:[(0,o.BX)(u.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.flex.shrink(1)],children:[(0,o.tZ)(f.x,{variant:a,color:"dimmest",children:"#"}),(0,o.tZ)(f.x,{color:"dimmer",variant:a,css:[d.l0.flex.shrink(1)],children:n.id})]}),n.isOfficial&&!i?(0,o.tZ)(v.Z,{}):null,r?(0,o.tZ)(h.Z,{size:i?12:16}):null]})})}var y=u.K.a;function b(e){var n=e.tag,t=e.link,a=e.isActive,l=e.small,u=e.onClick;return(0,o.tZ)(c(),(0,i.Z)((0,r.Z)({},t),{passHref:!0,css:[d.l0.flex.shrink(1),{backgroundColor:"red"}],children:(0,o.tZ)(y,{css:[{color:"inherit"},d.l0.flex.shrink(1)],onClick:u,children:(0,o.tZ)(Z,{tag:n,isActive:a,small:l,isRemovable:a})})}))}var w=u.K.button;function x(e){var n=e.tag,t=e.onClick,r=e.isActive,i=e.small;return(0,o.tZ)(w,{css:[d.l0.reset.button],onClick:t,children:(0,o.tZ)(Z,{tag:n,isActive:r,small:i,isRemovable:!0})})}},46197:function(e,n,t){"use strict";t.d(n,{A:function(){return i}});var r=t(57263),i={mobile:"@media (max-width: ".concat(r.j.tabletMin,"px)"),desktop:"@media (min-width: ".concat(r.j.tabletMin+1,"px)")}},44365:function(e,n,t){"use strict";t.d(n,{Qf:function(){return c},Zb:function(){return l},eR:function(){return o}});var r=t(54969),i=t(54854),o=r.vX.Hot,a={hot:r.vX.Hot,new:r.vX.New,top:r.vX.Top,votes:r.vX.Top};function l(e){return e.toLowerCase()}function c(e){var n=(0,i.Z)(e,"after")||void 0,t=(0,i.Z)(e,"q")||void 0,r=(0,i.Z)(e,"boardSlug")||void 0,c=r&&"all"!==r?r.split(","):void 0,u=(0,i.Z)(e,"order")||l(o),s=a[u]||o,d=(0,i.Z)(e,"count"),f=d?parseInt(d,10):void 0;return void 0!==f&&Number.isNaN(f)&&(f=void 0),{tags:c,order:s,count:f,searchQuery:t,after:n}}},12530:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(35944),i=t(67294),o=t(1144),a=t(81255),l=t(69346),c=t(81456);function u(e){var n=e.count,t=e.children,u=e.tooltip,s=e.small,d=(0,c.d)(n);return(0,r.BX)(l.G,{"aria-label":u,"data-microtip-position":"left",role:"tooltip",css:[a.l0.rowWithGap(4),a.l0.align.center,a.l0.color.foregroundDimmer,{userSelect:"none",lineHeight:1}],children:[i.cloneElement(t,{size:s?12:void 0}),(0,r.tZ)(o.x,{variant:s?"small":void 0,color:"dimmer",children:d})]})}},19923:function(e,n,t){"use strict";t.d(n,{Gp:function(){return D},Oh:function(){return $},V3:function(){return O},Xl:function(){return z},Yd:function(){return N},_b:function(){return q},gX:function(){return ne},h2:function(){return M},on:function(){return B},q7:function(){return J},vs:function(){return E},w9:function(){return j},zp:function(){return V}});var r=t(14251),i=t(32692),o=t(31230),a=t(7900),l=t(37887),c=t(50319);function u(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplateModelSolution on ReplTemplateModelSolution {\n    id\n    visibleAfterSubmitting\n    visibleAfterPassingTests\n    visibleAfterDueDate\n    repl {\n      id\n      url\n      nextPagePathname\n    }\n    canStudentFork\n    studentFork {\n      id\n      url\n      nextPagePathname\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplate on ReplTemplate {\n    id\n    isPublished\n    isGroupProject\n    allowSelfGrouping\n    imageUrl\n    url\n    dueDate\n    modelSolution {\n      id\n      ...TeamProfileReplTemplateModelSolution\n    }\n    userSubmissionGroup {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment TeamProfileRepl on Repl {\n    id\n    title\n    description\n    slug\n    timeCreated\n    url\n    pinnedToProfile\n    nextPagePathname\n    templateInfo {\n      label\n      iconUrl\n    }\n    template {\n      id\n      ...TeamProfileReplTemplate\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment TeamProfileStack on Stack {\n    id\n    title\n    repls {\n      id\n      ...TeamProfileRepl\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamEduProfile on Team {\n    id\n    username\n    displayName\n    isAdmin\n    archived\n    needsMigrationToStacks\n    defaultTemplateStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n      capabilities {\n        isExpired: isExpiring(daysFromNow: 0)\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamProProfile on Team {\n    id\n    username\n    displayName\n    isMember\n    isAdmin\n    archived\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamProfileAllStacks on Team {\n    id\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  fragment TeamCreateReplSubmissionOutput on CreateReplSubmissionOutput {\n    ... on Repl {\n      id\n      nextPagePathname\n      url\n      template {\n        id\n        ...TeamProfileReplTemplate\n      }\n    }\n    ... on UserError {\n      message\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query TeamProProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamProProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query TeamEduProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function y(){var e=(0,i.Z)(["\n  mutation TeamProProfilePinRepl($replId: String!) {\n    pinReplToProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return y=function(){return e},e}function b(){var e=(0,i.Z)(["\n  mutation TeamProProfileUnpinRepl($replId: String!) {\n    unpinReplFromProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  mutation TeamProfileArrangeStackItem($input: ArrangeStackItemInput!) {\n    arrangeStackItem(input: $input) {\n      ... on Team {\n        id\n        ...TeamProfileAllStacks\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation TeamProfileUpdateReplTemplate($input: UpdateReplTemplateInput!) {\n    updateReplTemplate(input: $input) {\n      ... on ReplTemplate {\n        id\n        repl {\n          id\n          ...TeamProfileRepl\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function k(){var e=(0,i.Z)(["\n  mutation TeamProfileMigrateTeamToStacks($teamId: Int!) {\n    migrateTeamToStacks(teamId: $teamId) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function C(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolution(\n    $input: CreateReplTemplateModelSolutionInput!\n  ) {\n    createReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function R(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolutionFork(\n    $input: CreateReplTemplateModelSolutionForkInput!\n  ) {\n    createReplTemplateModelSolutionFork(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return R=function(){return e},e}function I(){var e=(0,i.Z)(["\n  mutation TeamCreateReplSubmission($templateId: Int!) {\n    createReplSubmission(templateId: $templateId) {\n      ...TeamCreateReplSubmissionOutput\n    }\n  }\n  ","\n"]);return I=function(){return e},e}var T={},S=(0,o.Ps)(u()),G=(0,o.Ps)(s(),S,a.Pc),E=(0,o.Ps)(d(),G),P=(0,o.Ps)(f(),E),D=(0,o.Ps)(p(),P),U=(0,o.Ps)(h(),P),B=(0,o.Ps)(v(),P),_=(0,o.Ps)(m(),G),X=(0,o.Ps)(g(),U);function M(e){var n=(0,r.Z)({},T,e);return l.a(X,n)}var A=(0,o.Ps)(Z(),D);function O(e){var n=(0,r.Z)({},T,e);return l.a(A,n)}var F=(0,o.Ps)(y());function z(e){var n=(0,r.Z)({},T,e);return c.D(F,n)}var L=(0,o.Ps)(b());function N(e){var n=(0,r.Z)({},T,e);return c.D(L,n)}var W=(0,o.Ps)(w(),B);function j(e){var n=(0,r.Z)({},T,e);return c.D(W,n)}var H=(0,o.Ps)(x(),E);function V(e){var n=(0,r.Z)({},T,e);return c.D(H,n)}var K=(0,o.Ps)(k(),D);function q(e){var n=(0,r.Z)({},T,e);return c.D(K,n)}var Y=(0,o.Ps)(C(),E);function $(e){var n=(0,r.Z)({},T,e);return c.D(Y,n)}var Q=(0,o.Ps)(R(),E);function J(e){var n=(0,r.Z)({},T,e);return c.D(Q,n)}var ee=(0,o.Ps)(I(),_);function ne(e){var n=(0,r.Z)({},T,e);return c.D(ee,n)}},29243:function(e,n,t){"use strict";t.d(n,{VK:function(){return p},dx:function(){return d}});var r=t(14251),i=t(32692),o=t(31230),a=t(20147),l=t(37887);function c(){var e=(0,i.Z)(["\n  fragment UserCardUser on User {\n    id\n    fullName\n    username\n    url\n    bio\n    image\n    isModerator: hasRole(role: MODERATOR)\n    isAdmin: hasRole(role: ADMIN)\n    followerCount\n    followCount\n    isFollowedByCurrentUser\n    isFollowingCurrentUser\n    socials {\n      id\n      url\n      type\n    }\n    roles(only: [MODERATOR, PATRON, PYTHONISTA, CONTENT_CREATOR, REPLIT_REP]) {\n      id\n      name\n      key\n      tagline\n    }\n    ...UserLabelUser\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query UserCard($username: String!) {\n    currentUser {\n      id\n    }\n    userByUsername(username: $username) {\n      id\n      ...UserCardUser\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(c(),a.w),f=(0,o.Ps)(u(),d);function p(e){var n=(0,r.Z)({},s,e);return l.a(f,n)}},94718:function(e,n,t){"use strict";t.d(n,{Z:function(){return E}});var r=t(14251),i=t(52875),o=t(35944),a=t(67294),l=t(44778),c=t(70804),u=t(69346),s=t(59641),d=t(54969),f=t(29243),p=t(57731),h=t(77365),v=t(41664),m=t.n(v),g=t(82447),Z=t(34901),y=t(47024),b=t(85565),w=t(30880),x=t(57981),k=t(93373),C=t(53924),R=t(33319),I=t(34847),T=t(94673),S=u.K.span;function G(e){var n,t=e.user,a=e.isCurrentUser,c=void 0!==a&&a;return(0,o.tZ)(u.G,{css:[s.l0.colWithGap(16)],children:(0,o.BX)(u.G,{css:[s.l0.colWithGap(8)],children:[(0,o.BX)(u.G,{css:[s.l0.rowWithGap(12)],children:[(0,o.tZ)(m(),{href:"/@"+t.username,target:"_blank",rel:"noreferrer",children:(0,o.tZ)("a",{children:(0,o.tZ)(p.Z,{size:48,src:t.image,alt:t.username,css:[{border:"solid 1px ".concat(s.TV.backgroundHighest),backgroundColor:s.TV.backgroundDefault}]})})}),(0,o.BX)(u.G,{css:[s.l0.flex.growAndShrink(1),s.l0.colWithGap(4)],children:[(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,o.tZ)(m(),(0,i.Z)((0,r.Z)({passHref:!0},(0,g.Ru)(t)),{children:(0,o.tZ)(u.G,{tag:"a",css:[s.l0.flex.growAndShrink(1)],children:(0,o.tZ)(s.xv,{css:[{color:s.TV.foregroundDefault,fontWeight:400}],variant:"subheadBig",children:t.fullName||t.username})})})),t.isFollowingCurrentUser?(0,o.tZ)(s.DR,{css:[s.l0.minWidth("fit-content")],text:"Follows you"}):null]}),(0,o.tZ)(u.G,{css:[s.l0.rowWithGap(4),s.l0.align.center],children:(0,o.tZ)(m(),{href:"/@"+t.username,target:"_blank",rel:"noreferrer",children:(0,o.tZ)("a",{children:(0,o.BX)(s.xv,{color:"dimmest",css:[{fontWeight:300}],children:["@",t.username]})})})})]})]}),(0,o.BX)(u.G,{css:[s.l0.rowWithGap(16),s.l0.align.center],children:[c?null:(0,o.tZ)(y.Z,{user:t,subtle:!0,stretch:!0,small:!0}),(null===t||void 0===t||null===(n=t.socials)||void 0===n?void 0:n.length)&&!c?t.socials.slice(0,3).map((function(e){return"twitter"===e.type?(0,o.tZ)("a",{target:"_blank",href:e.url,rel:"noreferrer",children:(0,o.tZ)(b.Z,{size:16,color:s.TV.foregroundDimmest})},e.id+"-socialid"):"facebook"===e.type?(0,o.tZ)("a",{target:"_blank",href:e.url,rel:"noreferrer",children:(0,o.tZ)(w.Z,{size:16,color:s.TV.foregroundDimmest})},e.id+"-socialid"):"linkedin"===e.type?(0,o.tZ)("a",{target:"_blank",href:e.url,rel:"noreferrer",children:(0,o.tZ)(x.Z,{size:16,color:s.TV.foregroundDimmest})},e.id+"-socialid"):"github"===e.type?(0,o.tZ)("a",{target:"_blank",href:e.url,rel:"noreferrer",children:(0,o.tZ)(k.Z,{size:16,color:s.TV.foregroundDimmest})},e.id+"-socialid"):"youtube"===e.type?(0,o.tZ)("a",{target:"_blank",rel:"noreferrer",children:(0,o.tZ)(C.Z,{size:16,color:s.TV.foregroundDimmest})},e.id+"-socialid"):"website"===e.type?(0,o.tZ)("a",{target:"_blank",href:e.url,rel:"noreferrer",children:(0,o.tZ)(R.Z,{size:16,color:s.TV.foregroundDimmest})},e.id+"-socialid"):void 0})):null]}),(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8),s.l0.flex.growAndShrink(1)],children:[(0,o.BX)(s.xv,{variant:"small",color:"dimmer",children:[(0,o.tZ)("span",{css:{color:s.TV.foregroundDefault,fontWeight:s.TV.fontWeightMedium},children:t.followerCount})," ",(0,I.Z)("follower",t.followerCount)]}),(0,o.BX)(s.xv,{variant:"small",color:"dimmer",children:[(0,o.tZ)("span",{css:{color:s.TV.foregroundDefault,fontWeight:s.TV.fontWeightMedium},children:t.followCount})," ","following"]})]}),t.bio?(0,o.tZ)(s.xv,{css:{overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":"3","-webkit-box-orient":"vertical"},multiline:!0,children:(0,o.tZ)(l.ZP,{properties:{target:"_blank"},children:t.bio})}):null,(0,o.BX)(u.G,{css:[s.l0.flex.row,s.l0.flex.wrap,{display:"inline-flex",gap:"8px"}],children:[(0,o.tZ)(T.Z,{username:t.username}),t.isAdmin?(0,o.tZ)(Z._.Admin,{}):null,t.roles.map((function(e){if(e.key===d.SM.Moderator&&t.isAdmin)return null;var n=e.tagline||void 0,r=s.TV.foregroundDefault,i=(0,o.tZ)(Z._.Default,{name:e.name,tagline:n},e.id);return e.key===d.SM.Moderator?i=(0,o.tZ)(Z._.Moderator,{},e.id):e.key===d.SM.ContentCreator?i=(0,o.tZ)(Z._.ContentCreator,{},e.id):e.key===d.SM.ReplitRep?i=(0,o.tZ)(Z._.ReplitRep,{},e.id):e.key===d.SM.Patron?i=(0,o.tZ)(Z._.Patron,{},e.id):e.key===d.SM.Pythonista&&(i=(0,o.tZ)(Z._.Pythonista,{},e.id)),(0,o.tZ)("div",{children:(0,o.tZ)(u.G,{css:[{color:r,fontSize:s.TV.fontSizeSmall}],children:i})},e.id)}))]})]})})}function E(e){var n,t=e.username,r=e.children,i=e.inline,l=e.onUserClick,d=(0,a.useState)(!1),p=d[0],v=d[1],m=(0,a.useState)(!1),g=m[0],Z=m[1],y=(0,a.useRef)(!1);(0,a.useEffect)((function(){p&&(y.current=!0);var e=setTimeout((function(){Z(p)}),200);return function(){clearTimeout(e)}}),[p]);var b=(0,f.VK)({variables:{username:t},skip:!1===y.current}),w=b.data,x=b.loading,k=null===w||void 0===w?void 0:w.userByUsername,C=(null===w||void 0===w||null===(n=w.currentUser)||void 0===n?void 0:n.id)===(null===k||void 0===k?void 0:k.id);return(0,o.BX)(c.Z,{disableFocusLock:!0,isOpen:g,onClickOutside:function(){return Z(!1)},maxWidth:300,growToMaxWidth:!0,css:[{padding:16,background:s.TV.backgroundHigher,border:"solid 1px "+s.TV.backgroundHighest}],children:[i?(0,o.tZ)("span",{onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},children:r}):(0,o.tZ)(S,{onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},children:r}),(0,o.BX)(S,{onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},children:[!x&&(k?(0,o.tZ)(G,{user:k,onUserClick:l,isCurrentUser:C}):(0,o.tZ)(s.xv,{color:"dimmer",children:"User doesn\u2019t exist"})),x?(0,o.tZ)(u.G,{css:[s.l0.center,s.l0.width("100%"),s.l0.height("100%")],children:(0,o.tZ)(h.Z,{})}):null]})]})}},20147:function(e,n,t){"use strict";t.d(n,{w:function(){return c}});var r=t(32692),i=t(31230),o=t(16092);function a(){var e=(0,r.Z)(["\n  fragment UserLabelUser on User {\n    id\n    username\n    ...UserLinkUser\n  }\n  ","\n"]);return a=function(){return e},e}function l(){var e=(0,r.Z)(["\n  fragment UserLabelWithImageUser on User {\n    id\n    image\n    ...UserLabelUser\n  }\n  ","\n"]);return l=function(){return e},e}var c=(0,i.Ps)(a(),o._);l()},16092:function(e,n,t){"use strict";t.d(n,{P:function(){return c},_:function(){return l}});var r=t(32692),i=t(31230);function o(){var e=(0,r.Z)(["\n  fragment UserLinkUser on User {\n    id\n    url\n    username\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r.Z)(["\n  fragment UserLinkCurrentUser on CurrentUser {\n    id\n    url\n    username\n  }\n"]);return a=function(){return e},e}var l=(0,i.Ps)(o()),c=(0,i.Ps)(a())},94673:function(e,n,t){"use strict";t.d(n,{Z:function(){return p}});var r=t(35944),i=t(23384),o=t(87045),a=t(14251),l=t(32692),c=t(31230),u=t(37887);function s(){var e=(0,l.Z)(["\n  query PlanBadge($username: String!) {\n    userByUsername(username: $username) {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return s=function(){return e},e}var d={},f=(0,c.Ps)(s());function p(e){var n,t=e.username,l=(0,i.D)({controlName:"flag-orlando-honeymoon"}),c=function(e){var n=(0,a.Z)({},d,e);return u.a(f,n)}({variables:{username:t}}),s=c.data;if(c.loading)return null;var p=null===s||void 0===s||null===(n=s.userByUsername)||void 0===n?void 0:n.userSubscriptionType;return l&&"HACKER_PRO"===p?(0,r.tZ)(o.ZP,{name:"hacker_pro",userRole:"hacker_pro"}):"HACKER"===p?(0,r.tZ)(o.ZP,{name:"hacker",userRole:"hacker"}):null}},26082:function(e,n,t){"use strict";var r=t(5152),i=t.n(r);n.Z=i()((function(){return Promise.all([t.e(8966),t.e(5499),t.e(5117),t.e(7068)]).then(t.bind(t,87068)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[87068]}}})},70710:function(e,n,t){"use strict";t.d(n,{I$:function(){return k},Du:function(){return C},Cd:function(){return I}});var r=t(14251),i=t(32692),o=t(31230),a=t(9523);function l(){var e=(0,i.Z)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    hasSeenOldWorkspaceTour: tourSeen(name: "workspace-desktop-tour")\n  }\n']);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    lesson {\n      id\n    }\n  }\n"]);return c=function(){return e},e}var u=(0,o.Ps)(l()),s=(0,o.Ps)(c()),d=t(86800),f=t(65711),p=t(6695);function h(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    isFirewallMode\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    isAlwaysOn\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n  }\n  ","\n"]);return v=function(){return e},e}var m=(0,o.Ps)(h()),g=(0,o.Ps)(v(),p.s),Z=t(37887);function y(){var e=(0,i.Z)(['\n  fragment ReplEnvironment2CurrentUser on CurrentUser {\n    id\n    image\n    isFirewallMode\n    isAdmin: hasRole(role: ADMIN)\n    ...CrosisContextCurrentUser\n    ...ReplEnvironment2CurrentUserLayoutFlags\n    editorPreferences {\n      ...CurrentUserPreferences\n    }\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n    canMigrateRepls: gate(feature: "migrate2nix-killswitch")\n  }\n  ',"\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i.Z)(["\n  fragment ReplEnvironment2Repl on Repl {\n    id\n    title\n    layoutState\n    description\n    multiplayers {\n      id\n    }\n    currentUserPermissions {\n      containerWrite\n    }\n    origin {\n      id\n    }\n    language\n    config {\n      isVnc\n      isServer\n    }\n    lesson {\n      id\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n  }\n  ","\n  ","\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  query ReplEnvironment2($url: String!) {\n    repl(url: $url) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n        ...ReplEnvironment2Repl\n        ...ReplEnvironmentTourRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n        isOwner\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironment2CurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return w=function(){return e},e}var x={},k=(0,o.Ps)(y(),a.D,d.SL,f.wO,m,u),C=(0,o.Ps)(b(),a.C,g),R=(0,o.Ps)(w(),a.C,C,s,k);function I(e){var n=(0,r.Z)({},x,e);return Z.a(R,n)}},94538:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return xv}});var r=t(34727),i=t(9941),o=t(70655),a=t(35944),l=t(70917),c=t(15519),u=t(92098),s=t(11598),d=t(21096),f=t(68480),p=t(15902),h=t(12215),v=t(53931),m=t(11163),g=t(67294),Z=t(60665),y=t(14251),b=t(32692),w=t(31230),x=t(37887);function k(){var e=(0,b.Z)(["\n  query RepricingAnnouncement {\n    currentUser {\n      id\n      url\n      username\n      pricesUpdate {\n        __typename\n        ... on CurrentUserPricesUpdateOptionOutputObject {\n          option\n        }\n      }\n    }\n  }\n"]);return k=function(){return e},e}var C={},R=(0,w.Ps)(k());function I(e){var n=(0,y.Z)({},C,e);return x.a(R,n)}var T=t(16188),S=t(9625),G=t(19536),E=t(59641),P=t(7537),D=t(38164),U=t(54969),B=t(73147),_=t(59247),X=new Date("2023-01-05");function M(){var e,n=I().data,t=(0,h.Z)("workspace","repricing-announcement"),r=t.shouldDisplay,i=t.dismiss,o=t.register,l=(0,m.useRouter)();return g.useEffect((function(){o()}),[o]),(0,p.Vg)(l)||"CurrentUserPricesUpdateOptionOutputObject"!==(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.pricesUpdate.__typename)?null:n.currentUser.pricesUpdate.option===U.c1.General?(0,a.tZ)(A,{shouldDisplay:r,dismiss:i}):(0,a.tZ)(z,{shouldDisplay:r,dismiss:i,isHacker:n.currentUser.pricesUpdate.option===U.c1.LegacyHacker})}function A(e){var n=e.shouldDisplay,t=e.dismiss,r=I().data;if(!(null===r||void 0===r?void 0:r.currentUser))return null;var i,o={slides:[{title:"Introducing new levels of Boosts!",subtitle:(0,a.tZ)(a.HY,{children:"We've now added even more power with additional levels starting at 4x the base resources and going all the way up to 32x of the base resources."}),text:(0,a.BX)(a.HY,{children:["Boosts are a way to allow your Repls to utilize more resources and make them faster."," ",(0,a.tZ)("a",{href:B.TT.ABOUT_BOOSTED_REPLS,onClick:t,target:"_blank",children:"Learn more"})]}),backgroundImage:"/public/images/repricing-announcement.png",backgroundColor:(i=Z.S.values.global.accentPrimaryDefault,(0,l.iv)({backgroundColor:i})),position:"center"}],date:X};return(0,a.tZ)(v.Z,{announcement:o,showModal:n,onRequestClose:t})}function O(e){var n=e.price,t=e.period;return(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(2),E.l0.align.center],children:[(0,a.tZ)(T.Z,{context:"repricing_announcement",children:(0,a.tZ)(D.Z,{css:{color:E.TV.foregroundDefault}})}),(0,a.BX)(E.xv,{children:[n,"/",t," (",(0,G.$E)(n),"/",t,")"]})]})}function F(e){var n=e.variant;return(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(16),E.l0.align.center],children:[(0,a.tZ)(E.G7,{css:[{width:40}],children:(0,a.tZ)(S.Z,{variant:n})}),(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(16),E.l0.flex.shrink(1),{flexWrap:"wrap",gap:4}],children:[(0,a.tZ)(E.xv,{css:{width:140},children:(0,G.Pr)(n)}),(0,a.tZ)(O,{price:_.z4[n],period:"day"})]})]})}function z(e){var n=e.isHacker,t=e.shouldDisplay,r=e.dismiss;return(0,a.tZ)(E.u_,{isOpen:t,onRequestClose:r,centered:!0,fitContent:!0,children:(0,a.BX)(E.G7,{css:[E.l0.colWithGap(24)],children:[(0,a.BX)(E.G7,{css:[E.l0.colWithGap(12)],children:[(0,a.tZ)(E.xv,{variant:"subheadBig",multiline:!0,children:"Announcing more power and updated pricing"}),(0,a.tZ)(E.xv,{multiline:!0,children:n?"We\u2019re launching more powerful machines for a more powerful  experience. Our new pricing and Hacker plan benefits reflect these changes.":"We\u2019re launching more powerful machines for a more powerful  experience. Our new pricing reflects these changes."})]}),(0,a.BX)(E.G7,{css:[E.l0.colWithGap(16)],children:[(0,a.tZ)(E.xv,{variant:"subheadDefault",children:"Boosted Repls"}),n?(0,a.tZ)(E.xv,{children:"One 4x Boost included with Hacker plan, then:"}):null,(0,a.BX)(E.G7,{css:[E.l0.colWithGap(8)],children:[(0,a.tZ)(F,{variant:"boost_2cpu_2ram"}),(0,a.tZ)(E.RX,{}),(0,a.tZ)(F,{variant:"boost_4cpu_4ram"}),(0,a.tZ)(E.RX,{}),(0,a.tZ)(F,{variant:"boost_8cpu_8ram"}),(0,a.tZ)(E.RX,{}),(0,a.tZ)(F,{variant:"boost_16cpu_16ram"})]})]}),(0,a.BX)(E.G7,{css:[E.l0.colWithGap(8)],children:[(0,a.tZ)(E.xv,{variant:"subheadDefault",children:"Always On Repls"}),(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(4),{flexWrap:"wrap"}],children:[n?(0,a.tZ)(E.xv,{multiline:!0,children:"One included with Hacker plan, then "}):null,(0,a.tZ)(O,{price:20,period:"day"})]})]}),n?null:(0,a.BX)(E.G7,{css:[E.l0.colWithGap(8)],children:[(0,a.tZ)(E.xv,{variant:"subheadDefault",children:"Private Repls"}),(0,a.tZ)(E.G7,{css:[E.l0.rowWithGap(4)],children:(0,a.tZ)(O,{price:500,period:"month"})})]}),(0,a.BX)(E.xv,{multiline:!0,children:["For any Always On or Boost Power Ups you're currently paying for using Cycles, your pricing won\u2019t change until April 2023."," ",n?"In addition, your Hacker plan benefits won\u2019t change until April 2023.":"Similarly, if you've purchased the Private Repls Power Up, your pricing won't change until April 2023."]}),(0,a.BX)(E.G7,{css:[E.l0.flex.row,E.l0.align.center,E.l0.justify.spaceBetween],children:[(0,a.tZ)(E.ZP,{text:"Learn more",iconRight:(0,a.tZ)(P.ExternalLink,{}),href:B.TT.REPRICING_BLOG_POST,target:"_blank",css:{width:120}}),(0,a.tZ)(E.zx,{text:"Got it",onClick:r,colorway:"primary",css:{width:120}})]})]})})}var L=t(70338),N=t(69779),W=t(57263),j=(W.H.duration,W.H.timingFunction,{container:(0,l.iv)([E.l0.p(8)]),surface:(0,l.iv)([E.gU.filled,E.l0.viewStyle,E.l0.flex.row,E.l0.align.center,E.l0.flex.growAndShrink(1),E.l0.height(32),{"&:focus-within":E.kN[":focus"]}]),input:(0,l.iv)([E.l0.viewStyle,E.l0.flex.growAndShrink(1),E.l0.fontSize("default"),E.l0.height("100%"),E.l0.px(4),{backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:E.TV.foregroundDimmest},"&:hover::placeholder":{color:E.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:E.TV.foregroundDimmest}}]),closeButton:(0,l.iv)([E.l0.reset.button,E.l0.viewStyle,E.l0.center,E.l0.height(32),E.l0.px(4),E.l0.cursor.pointer,E.l0.color.foregroundDimmest,{"&:hover":{color:E.TV.foregroundDefault}}])}),H=t(3218);function V(e,n){var t=n.commands;return{data:e,match:n.match,commands:t}}function K(e){var n=e.defaultScore,t=void 0===n?1:n;return function(e){var n=e.search,r=e.data,i=e.active;if("group"===r.type)return null;if(!n&&i)return{score:t};if(!n)return{score:t};var o=H.Z.match(n,r.label);return o?{score:o.score,render:{ranges:o.ranges}}:null}}var q=K({defaultScore:1});function Y(e){return e.map((function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label})).join(":")}function $(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=e.slice(n)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;"group"!==c.data.type&&t.push(c.data.label)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return(0,N.Z)(new Set(t))}var Q=t(81032),J=t(21131),ee=t(91296),ne=t.n(ee);var te=t(18172),re=t(16965),ie=t(37424),oe=t(88750),ae=(0,g.createContext)(void 0);function le(){var e=(0,g.useContext)(ae);if(!e)throw new Error("Expected store in context");return e}function ce(e){var n=le();return(0,oe.Dv)(e,{store:n})}var ue=function(e){var n=le();return(0,oe.b9)(e,{store:n})},se=function(e){return"item-"+e},de=(0,Q.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),fe=(0,Q.cn)(!0);function pe(){return ce(fe)}var he=(0,Q.cn)(!1),ve=(0,Q.cn)((function(e){return!e(he)})),me=(0,Q.cn)(!1),ge=(0,Q.cn)(null),Ze=(0,Q.cn)((function(e){return e(Ce)>-1})),ye=(0,Q.cn)((function(e){var n=e(de);return!n.isLoading&&0===n.rows.length})),be=(0,Q.cn)({label:"",input:"",menu:""});var we=(0,Q.cn)(""),xe=(0,Q.cn)(""),ke=(0,Q.cn)(""),Ce=(0,Q.cn)(-1);var Re=(0,Q.cn)((function(e){var n=e(Ce);return e(Ie).findIndex((function(e){return"item"===e.type&&e.index===n}))}));var Ie=(0,Q.cn)((function(e){return e(de).rows})),Te=(0,Q.cn)((function(e){return e(de).items})),Se=(0,Q.cn)((function(e){return e(Te).length})),Ge=(0,Q.cn)((function(e){return e(de).path.filter((function(e){return e.match})).length>0})),Ee=(0,Q.cn)((function(e){return e(de).placeholder}));var Pe=(0,Q.cn)((function(e){return e(de).isLoading}));var De=(0,Q.cn)((function(e){return e(de).path.length}));function Ue(){return ce(De)}var Be=(0,Q.cn)((function(e){return e(Ge)||Boolean(e(we))}));function _e(e){return ce(function(e){return(0,J.Z)((function(){return(0,Q.cn)((function(n){return n(Ie)[e]}))}),[e])}(e))}var Xe=(0,Q.cn)((function(e){return e(de).path}));function Me(e,n){return n.match.score-e.match.score}var Ae=(0,Q.cn)(null,(function(e,n,t){var r=e(ke);if(r===e(ke)){var o,a=t.items.sort(Me),l=t.path.length?t.path[t.path.length-1]:null,c=function(e,n){var t=new Map;e.forEach((function(e){var n=e.path.slice(0,-1),r="section:"+Y(n),i=t.get(r);if(i)i.items.push(e);else{var o=n[n.length-1],a="group"===(null===o||void 0===o?void 0:o.data.type);t.set(r,{type:"section",path:n,score:e.match.score,items:[e],unlabeled:a,key:r})}}));var r=(0,N.Z)(t.entries()).sort((function(e,t){var r=(0,i.Z)(e,2),o=r[0],a=r[1],l=(0,i.Z)(t,2),c=l[0],u=l[1];if(!n||!n.includes(o)&&!n.includes(c))return u.score-a.score;var s=n.indexOf(o),d=n.indexOf(c);return s>-1&&d>-1?s-d:-1===s?1:-1})),o={items:[],rows:[]},a=0;return r.forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];o.rows.push({type:r.type,key:t,path:r.path,unlabeled:r.unlabeled}),r.items.forEach((function(e){o.items.push(e),o.rows.push({type:"item",item:e,index:a++})}))})),o}(a,r?e(de).rows.filter((function(e){return"section"===e.type})).map((function(e){return e.key})):void 0),u=c.items,s=c.rows,d=null!==(o=null===l||void 0===l?void 0:l.data)&&void 0!==o?o:null,f=null===d||void 0===d?void 0:d.description;e(me)&&"group"!==(null===d||void 0===d?void 0:d.type)&&(f=null===d||void 0===d?void 0:d.label),n(de,(function(e){return{items:u,rows:s,isLoading:Boolean(t.partial),path:t.path,placeholder:f||e.placeholder}}))}})),Oe=(0,Q.cn)(null,(function(e,n,t){n(we,t),n(Ce,t?0:-1),n(de,(function(e){return(0,te.ZP)(e,(function(e){e.isLoading=Boolean(t)}))})),e(he)&&n(fe,Boolean(t))}));var Fe=(0,Q.cn)(null,(function(e,n,t){n(de,(function(e){return(0,te.ZP)(e,(function(e){e.items=[],e.rows=[],e.path=t}))})),n(Oe,""),n(xe,""),n(ke,"")})),ze=(0,Q.cn)(null),Le=(0,Q.cn)(null,(function(e,n){var t=e(Ce);if(!(t<0)){var r=e(Te)[t];r&&n(ge,r)}})),Ne=(0,Q.cn)(null,(function(e,n,t){var r=e(fe),i=e(Se),o=e(Ce);switch(t.key){case"ArrowDown":t.preventDefault();var a=o+1;return n(Ce,a<i?a:0),void n(fe,!0);case"ArrowUp":t.preventDefault();var l=o-1;return void n(Ce,Math.max(-1,l));case"Home":if(!r)return;return t.preventDefault(),void n(Ce,i?0:-1);case"End":if(!r)return;return t.preventDefault(),void n(Ce,i?i-1:-1);case"Escape":if(!e(we))return;if(t.preventDefault(),n(Oe,""),n(xe,""),e(ve))return;return void n(fe,!1);case"Enter":if(!r)return;return t.preventDefault(),void n(Le);case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var c="PageUp"===t.key?-10:10;return void n(Ce,(function(e){return Math.max(Math.min(e+c,i-1),0)}))}}));function We(e){var n=ue(ge),t=(0,g.useRef)(null),r=function(e){return ce((0,J.Z)((function(){return(0,Q.cn)((function(n){return n(Ce)===e}))}),[e]))}(e);return ce((0,J.Z)((function(){return(0,Q.cn)((function(i){var o=i(Te)[e],a={id:se(e),role:"option","aria-selected":r};return{onClick:function(){n(o)},active:r,ref:t,ariaAttrs:a}}))}),[e,r,n]))}function je(){var e=ue(ze),n=ce(Ee),t=(0,i.Z)(function(){var e=ce(we),n=ue(Oe),t=ue(xe),r=(0,J.Z)((function(){return ne()(t,100)}),[t]);return[e,(0,g.useCallback)((function(e){var t="string"===typeof e?e:e.currentTarget.value;n(t),r(t)}),[n,r])]}(),2),r=t[0],o=t[1],a=ue(Ce),l=ce(Ce),c=ce(be),u=pe();return{onBlur:function(){return a(-1)},onChange:o,placeholder:n,value:r,ref:e,ariaAttrs:{id:c.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":l>-1?se(l):"","aria-controls":c.menu,"aria-expanded":u,"aria-labelledby":c.label}}}function He(e){var n=ue(Ae),t=(0,J.Z)((function(){return Array.isArray(e)?e:[e]}),[e]),r=(0,J.Z)((function(){return function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,i=function(e){a&&clearTimeout(a);var n=++l,i=0,c=[],u=o[o.length-1];u.commands?(void 0!==t&&(a=setTimeout((function(){c.length&&r({items:c,partial:!0,path:o})}),t)),function t(u,s){if(i++,!u.commands)throw new Error("Expected commands");var d=(0,N.Z)(s).concat([u]),f=d.length===o.length;Promise.resolve(u.commands({active:f,search:e,path:d})).then((function(u){n===l?(i--,u.forEach((function(n){var r=(0,N.Z)(d).concat([n]),i=n.match?n.match({search:e,data:n.data,path:r,active:f}):null;i&&c.push({path:r,data:n.data,match:i}),n.commands&&t(n,d)})),i>0||(a&&clearTimeout(a),r({items:c,path:o}))):a&&clearTimeout(a)}))}(u,o.slice(0,o.length-1))):r({items:c,path:o})},o=n,a=null,l=0;return{search:i,setPath:function(e){o=e,i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")},getPath:function(){return o}}}({initialPath:t,partialUpdateTimeout:100,onUpdate:n})}),[t,n]),i=ce(xe),o=ue(ke);return(0,g.useEffect)((function(){o(i),r.search(i)}),[r,i,o]),r}var Ve=t(8941),Ke={root:(0,l.iv)([E.l0.reset.button,E.l0.viewStyle,E.l0.rowWithGap(4),E.l0.align.center,E.l0.borderRadius(0),E.l0.px(4),E.l0.cursor.pointer,E.l0.color.foregroundDimmer,{"&:hover":{color:E.TV.foregroundDefault}}]),text:(0,l.iv)([E.l0.truncate,E.l0.flex.shrink(1),{fontSize:E.TV.fontSizeDefault}])};function qe(e){if("group"===e.command.data.type)return null;var n=e.command.data,t=n.label,r=n.icon;return(0,a.BX)("button",{css:Ke.root,onClick:e.onClick,children:[(0,g.cloneElement)(r,{size:16}),e.iconOnly?null:(0,a.tZ)(E.G7,{css:Ke.text,children:t}),(0,a.tZ)(Ve.Z,{size:12})]})}function Ye(e){return(0,a.tZ)(a.HY,{children:e.path.map((function(n,t){if("group"===n.data.type)return null;if(!n.match)return null;var r=n.data.label+t;return(0,a.tZ)(qe,{command:n,onClick:function(){return e.onClick(t)},iconOnly:e.iconOnly},r)}))})}var $e=t(67629),Qe=t(77365),Je=(0,l.iv)([E.l0.reset.button,E.l0.viewStyle,E.l0.center,E.l0.height("100%"),E.l0.px(4),E.l0.cursor.pointer,E.l0.color.foregroundDimmest,{"&:hover":{color:E.TV.foregroundDefault}}]);function en(e){return(0,a.tZ)("button",{css:Je,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,a.tZ)(Qe.Z,{}):(0,a.tZ)($e.Z,{})})}var nn=t(52875),tn=t(30077),rn=t(27178);function on(e,n){var t=0,r=[];return n.forEach((function(n){var i=n.from,o=n.to,a=e.slice(t,i);a&&r.push({text:a,match:!1});var l=e.slice(i,o);l&&r.push({text:l,match:!0}),t=o})),t<e.length&&r.push({text:e.slice(t),match:!1}),r}var an=(0,l.iv)({transitionProperty:"color",transitionDuration:W.H.duration,transitionTimingFunction:W.H.timingFunction}),ln=(0,l.iv)([E.l0.flex.shrink(1),E.l0.truncate,an]),cn={normal:{matched:E.TV.foregroundDefault,unmatched:E.TV.foregroundDimmer},dimmed:{matched:E.TV.foregroundDimmer,unmatched:E.TV.foregroundDimmest}};function un(e){var n,t=null===(n=e.highlight)||void 0===n?void 0:n.filter((function(e){return e.to>0})),r=e.dimmed?cn.dimmed:cn.normal;return(null===t||void 0===t?void 0:t.length)?(0,a.tZ)(E.G7,{css:ln,children:on(e.text,t).map((function(e,n){return(0,a.tZ)("span",{css:an,style:{fontWeight:e.match?E.TV.fontWeightBold:E.TV.fontWeightRegular,color:e.match?r.matched:r.unmatched},children:e.text},e.text+n)}))}):(0,a.tZ)(E.G7,{style:{color:r.matched},css:[ln,an],children:e.text})}var sn=t(33279),dn=t(7182),fn=(0,dn.cn)({chat:"unread"}),pn=(0,dn.cn)(null,(function(e,n,t){n(fn,(function(e){return(0,te.ZP)(e,(function(e){t.indicatorType?e[t.paneType]=t.indicatorType:delete e[t.paneType]}))}))}));function hn(e){var n=e.paneType,t=(0,J.Z)((function(){return(0,dn.cn)((function(e){return n?e(fn)[n]:void 0}))}),[n]);return(0,dn.Dv)(t)}var vn=(0,l.iv)([E.l0.borderRadius("full"),E.l0.position.absolute,E.l0.top(-3),E.l0.right(-3)]);function mn(e){var n=e.color,t=void 0===n?E.TV.redStronger:n,r=e.small?6:8;return(0,a.tZ)(E.G7,{style:{backgroundColor:t,width:r,height:r},css:vn})}var gn=(0,l.iv)({transitionDuration:W.H.duration,transitionTimingFunction:W.H.timingFunction}),Zn={background:(0,l.iv)([gn,{transitionProperty:"background-color"}]),opacity:(0,l.iv)([gn,{transitionProperty:"opacity"}]),color:(0,l.iv)([gn,{transitionProperty:"color"}])},yn=(0,l.iv)([E.l0.p(8),Zn.background]),bn={root:(0,l.iv)([yn,E.l0.align.center,E.l0.rowWithGap(8)]),iconSurface:(0,l.iv)([E.l0.p(8),E.l0.borderRadius(8),E.l0.position.relative,Zn.background])},wn={root:(0,l.iv)([Zn.opacity,{opacity:.7}]),active:(0,l.iv)({opacity:1})};function xn(e){var n=e.pane,t=e.active,r=e.highlight,i=(0,rn.Se)(),o=i.Icon({pane:n,size:16}),l=i.getTitle(n),c=hn({paneType:n.type});return(0,a.BX)(E.Tg,{elevated:t,css:bn.root,children:[(0,a.tZ)(E.Tg,{elevated:!0,css:bn.iconSurface,children:(0,a.BX)(E.G7,{css:[wn.root,e.active&&wn.active],children:[o,c?(0,a.tZ)(mn,{}):null]})}),(0,a.tZ)(un,{dimmed:!t,text:l,highlight:r})]})}function kn(e){return(0,a.tZ)(E.Tg,{elevated:e.active,css:Zn.background,children:e.children})}var Cn={root:(0,l.iv)([yn,E.l0.rowWithGap(8),E.l0.align.center]),iconText:(0,l.iv)([E.l0.rowWithGap(8),E.l0.align.center]),description:(0,l.iv)([E.l0.truncate,E.l0.flex.growAndShrink(1),{fontSize:E.TV.fontSizeSmall}]),shortcut:(0,l.iv)({justifySelf:"end",marginLeft:"auto"})};function Rn(e){return(0,a.BX)(E.Tg,{elevated:e.active,css:Cn.root,children:[(0,a.BX)(E.G7,{css:[Cn.iconText],children:[(0,a.tZ)(E.G7,{css:[wn.root,e.active&&wn.active],children:(0,g.cloneElement)(e.icon)}),(0,a.tZ)(un,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,a.tZ)(E.G7,{style:{color:e.active?E.TV.foregroundDimmer:E.TV.foregroundDimmest},css:Cn.description,children:e.description}):null,e.shortcut?(0,a.tZ)(E.G7,{css:Cn.shortcut,children:(0,a.tZ)(sn.Z,{shortcut:e.shortcut,small:!0})}):null,e.hasChildren?(0,a.tZ)(E.G7,{css:Cn.shortcut,children:(0,a.tZ)(Ve.Z,{size:12})}):null]})}function In(e){var n=e.data,t="openPane"===n.type?n.pane:void 0;return t&&!(0,rn.KM)(t)?t:null}function Tn(e){var n=e.item,t=e.active,r=n.data;if("group"===r.type)return null;var i=n.match.render,o=i&&"content"in i?i.content:void 0,l=i&&"ranges"in i?i.ranges:void 0;if(o)return(0,a.tZ)(kn,{active:t,children:(0,g.cloneElement)(o,{active:t})});var c=In(n),u=r.label,s=r.icon;return c?(0,a.tZ)(xn,{active:t,pane:c,highlight:l}):(0,a.tZ)(Rn,{active:t,icon:s,text:u,highlight:l,description:r.description,shortcut:r.keyboardShortcut,hasChildren:"context"===n.data.type})}var Sn=[E.l0.position.absolute,E.l0.top(0),E.l0.left(0),E.l0.width("100%")],Gn=(0,E.Xb)({item:[Sn,{cursor:"pointer","&:hover > div":{backgroundColor:"var(".concat(E.dj.interactiveBackground,")")}}],divider:[Sn,E.l0.justify.center,E.l0.px(8)]}),En=(0,g.memo)((function(e){var n=_e(e.index);if(!n)return null;var t={height:e.height,transform:"translateY(".concat(e.y,"px)")};return"section"===n.type?(0,a.tZ)(Un,{path:n.path,style:t,border:e.index>0}):(0,a.tZ)(Pn,{index:n.index,item:n.item,style:t})})),Pn=(0,g.memo)((function(e){var n=We(e.index),t=n.ref,r=n.active,i=n.onClick,o=n.ariaAttrs;return(0,a.tZ)(E.G7,(0,nn.Z)((0,y.Z)({innerRef:t,css:Gn.item,style:e.style,onClick:i},o),{children:(0,a.tZ)(Tn,{item:e.item,active:r})}))})),Dn=(0,E.Xb)({borderHeaderWrap:[Sn,E.l0.p(8),E.l0.pt(8),E.l0.pb(4),E.l0.colWithGap(0),E.l0.justify.spaceBetween],borderWrap:[Sn,E.l0.justify.center,E.l0.px(8)],headerWrap:[Sn,E.l0.justify.end,E.l0.pb(4),E.l0.px(8)],header:[E.l0.rowWithGap(4),E.l0.align.center],text:[E.l0.flex.shrink(1),E.l0.color.foregroundDimmest,E.l0.truncate,{fontSize:E.TV.fontSizeSmall}],border:[E.l0.height(1),E.l0.width("100%")]}),Un=(0,g.memo)((function(e){var n=Ue(),t=$(e.path,n),r=(0,a.tZ)(E.Tg,{elevated:!0,css:Dn.border}),i=0===t.length;if(e.border&&i)return(0,a.tZ)(E.G7,{css:Dn.borderWrap,style:e.style,children:r});var o=(0,a.tZ)(E.G7,{css:Dn.header,children:t.map((function(e,n){return(0,a.BX)(g.Fragment,{children:[n>0?(0,a.tZ)(Ve.Z,{size:12,color:E.TV.foregroundDimmest}):null,(0,a.tZ)(E.G7,{css:Dn.text,children:e})]},e+n)}))});return e.border||i?(0,a.BX)(E.G7,{css:Dn.borderHeaderWrap,style:e.style,children:[r,o]}):(0,a.tZ)(E.G7,{css:Dn.headerWrap,style:e.style,children:o})})),Bn=(0,E.Xb)({root:[E.l0.flex.shrink(1),E.l0.overflow("hidden")],scrollParent:[E.l0.height("100%"),E.l0.overflowY("auto"),E.l0.flex.growAndShrink(1)]}),_n=(0,g.memo)((function(e){var n,t=function(){var e=ce(Ie),n=pe(),t=(0,g.useRef)(null),r=Ue(),i=ce(be);return{rows:e,isOpen:n,scrollRef:t,currentPathIndex:r,ariaAttrs:{id:i.menu,"aria-labelledby":i.label,role:"listbox"}}}(),r=t.rows,i=t.isOpen,o=t.scrollRef,l=t.currentPathIndex,c=t.ariaAttrs,u=(0,tn.MG)({count:r.length,overscan:null!==(n=e.overscan)&&void 0!==n?n:1,getScrollElement:function(){return o.current},getItemKey:function(e){var n=r[e];return n?"section"===n.type?n.key:Y(n.item.path):""},estimateSize:function(e){var n=r[e];return n?function(e){var n=e.row,t=e.currentPathIndex,r=e.isFirst;if("section"===n.type){var i=$(n.path,t).length?24:0;return r?i:i+16}var o,a=n.item.match.render;return a&&"content"in a?null!==(o=a.height)&&void 0!==o?o:32:In(n.item)?48:32}({row:n,currentPathIndex:l,isFirst:0===e}):0}}),s={borderBottomLeftRadius:e.hasFooter?void 0:E.TV.space8,borderBottomRightRadius:e.hasFooter?void 0:E.TV.space8,display:i?void 0:"none"},d=u.scrollToIndex,f=ce(Re);return(0,g.useEffect)((function(){var e=f;e<0||(1===e&&(e=0),d(e,{behavior:"smooth"}))}),[d,f]),(0,a.tZ)(E.G7,(0,nn.Z)((0,y.Z)({css:Bn.root,style:s},c),{children:(0,a.tZ)(E.G7,{innerRef:o,css:Bn.scrollParent,children:(0,a.tZ)(E.G7,{style:{height:"".concat(u.getTotalSize(),"px"),position:"relative"},children:i?u.getVirtualItems().map((function(e){return(0,a.tZ)(En,{index:e.index,height:e.size,y:e.start},e.key)})):null})})}))})),Xn=(0,E.Xb)({root:[E.l0.flex.shrink(1),E.l0.height("100%")],footer:[E.l0.pt(8)],inputBarSurface:j.surface,input:j.input,menuWrap:[E.l0.flex.shrink(1)],row:[E.l0.position.absolute,E.l0.top(0),E.l0.left(0),E.l0.width("100%")],menu:[E.l0.flex.shrink(1),E.l0.overflow("auto")]}),Mn=(0,E.Xb)({root:[j.input,E.l0.px(8)]}),An=(0,g.memo)((function(e){var n=je();return(0,a.tZ)("input",(0,y.Z)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:Mn.root,placeholder:n.placeholder,value:n.value,onChange:n.onChange,ref:n.ref,onBlur:n.onBlur},n.ariaAttrs))})),On=(0,E.Xb)({container:[j.container],surface:[j.surface,{"& > button + input":{paddingLeft:0}}]});function Fn(e){return(0,a.tZ)(E.G7,{css:On.container,children:(0,a.tZ)(E.G7,{css:On.surface,children:e.children})})}var zn=(0,g.memo)((function(e){var n={iconOnly:ce(me),path:ce(Xe)},t=n.path,r=n.iconOnly;return(0,a.tZ)(Ye,{iconOnly:r,path:t,onClick:e.onClick})})),Ln=(0,g.memo)((function(e){var n=ce(Be),t=ce(Pe);return n?(0,a.tZ)(en,{onClick:e.onClick,isLoading:t}):null}));function Nn(e){!function(e){var n=ue(me);(0,g.useEffect)((function(){n(Boolean(e.iconBreadcrumbs))}),[n,e.iconBreadcrumbs]);var t=ue(he);(0,g.useEffect)((function(){t(Boolean(e.openOnInput))}),[t,e.openOnInput])}({iconBreadcrumbs:e.iconBreadcrumbs,openOnInput:e.openOnInput});var n=function(e){var n=e.command,t=e.onSelect,r=pe(),i=ce(Be),o=ce(we),a=ue(Ce),l=ce(ge),c=ce(ye),u=ue(Fe),s=ue(Ne),d=ce(Ze),f=(0,re.Z)({completer:He(n),input:ce(ze),onSelect:t}),p=(0,J.Z)((function(){return function(){var e,n;return null===(e=f.current)||void 0===e||null===(n=e.input)||void 0===n?void 0:n.focus()}}),[f]),h=(0,J.Z)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=f.current.completer.getPath().slice(0,e+1);a(-1),u(n),f.current.completer.setPath(n),p()}}),[u,a,p,f]),v=(0,J.Z)((function(){return function(e){if("Backspace"!==e.key||e.currentTarget.value)return s(e);h()}}),[h,s]);return(0,g.useEffect)((function(){if(l){if("context"===l.data.type){var e,n=l.path;return u(n),a(0),f.current.completer.setPath(n),void(null===(e=f.current.input)||void 0===e||e.focus())}h(),f.current.onSelect(l)}}),[f,l,u,a,h]),{focus:p,reset:h,onKeyDown:v,inputValue:o,isOpen:r,isClearable:i,noResults:c,hasHighlightedItem:d}}({command:e.command,onSelect:e.onSelect}),t=n.isOpen,r=n.focus,i=n.reset,o=n.isClearable,l=n.onKeyDown,c=n.inputValue,u=n.noResults,s=n.hasHighlightedItem,d=(0,re.Z)({inputValue:c,noResults:u,hasHighlightedItem:s,onSubmit:e.onSubmit,onKeyDown:e.onKeyDown}),f=(0,J.Z)((function(){return function(e){var n,t=d.current;null===(n=t.onKeyDown)||void 0===n||n.call(t,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),e.defaultPrevented||("Enter"===e.key&&t.inputValue&&t.noResults&&t.onSubmit?t.onSubmit(t.inputValue):l(e))}}),[d,l]),p=e.focusRef;(0,g.useEffect)((function(){p&&(p.current=r)}),[r,p]);var h=ce(be);return(0,a.BX)(E.G7,{css:Xn.root,children:[(0,a.tZ)("label",{id:h.label,htmlFor:h.input,css:E.l0.visuallyHidden,children:"Commands"}),(0,a.BX)(Fn,{children:[(0,a.tZ)(zn,{onClick:i}),(0,a.tZ)(An,{autoFocus:Boolean(e.autoFocus),onKeyDown:f}),(0,a.tZ)(Ln,{onClick:function(){return i()}}),e.keyboardShortcut&&!o?(0,a.tZ)(sn.Z,{shortcut:e.keyboardShortcut,hideBorder:!0,small:!0}):null]}),t?(0,a.BX)(a.HY,{children:[(0,a.tZ)(_n,{overscan:e.overscan,hasFooter:Boolean(e.footer)}),e.footer?(0,a.tZ)(E.G7,{css:Xn.footer,children:e.footer}):null]}):null]})}function Wn(e){var n=function(e){var n={label:(0,ie.D)(),input:(0,ie.D)(),menu:(0,ie.D)()},t=(0,g.useState)((function(){var t,r=(0,Q.MT)();r.set(be,n),r.set(me,Boolean(e.iconBreadcrumbs)),r.set(he,Boolean(e.openOnInput)),r.set(fe,!e.openOnInput);var i=Array.isArray(e.command)&&e.command.filter((function(e){return e.match})).length>0;r.set(Ce,i?0:-1);var o,a=Array.isArray(e.command)?e.command[0]:e.command,l=null!==(o=null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.description)&&void 0!==o?o:null;return l&&r.set(de,(function(e){return(0,te.ZP)(e,(function(e){e.placeholder=l}))})),r}));return t[0]}({iconBreadcrumbs:e.iconBreadcrumbs,command:e.command,openOnInput:e.openOnInput});return(0,a.tZ)(ae.Provider,{value:n,children:(0,a.tZ)(Nn,{overscan:e.overscan,onSelect:e.onSelect,onSubmit:e.onSubmit,command:e.command,autoFocus:Boolean(e.autoFocus),focusRef:e.focusRef,keyboardShortcut:e.keyboardShortcut,openOnInput:e.openOnInput,onKeyDown:e.onKeyDown,footer:e.footer,iconBreadcrumbs:e.iconBreadcrumbs})})}var jn=t(99408),Hn=t(93910),Vn=t(14994),Kn=t(24888),qn=t(88961),Yn=t(63736),$n=t(93449),Qn=t(73604),Jn=(0,E.Xb)({root:[E.l0.rowWithGap(8),E.l0.align.center,E.l0.flex.growAndShrink(1),E.l0.px(8)],header:[{fontSize:E.TV.fontSizeSmall,opacity:.6},E.l0.color.foregroundDimmest,E.l0.truncate],result:[E.l0.colWithGap(0)],fileName:[E.l0.truncate,E.l0.flex.row]});function et(e){var n=e.parentPath?e.parentPath.length+1:0,t=e.fileName.length,r=[],i=[];if(e.highlight){var o=!0,l=!1,c=void 0;try{for(var u,s=e.highlight[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value;d.from<n&&r.push({from:d.from,to:Math.min(n,d.to)}),d.to>=n&&i.push({from:Math.max(0,d.from-n),to:Math.min(t,d.to-n)})}}catch(f){l=!0,c=f}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}}return(0,a.BX)(E.G7,{css:Jn.root,style:{height:e.height},children:[(0,a.tZ)(Yn.Z,{path:e.fileName,size:16}),(0,a.BX)(E.G7,{css:Jn.result,children:[e.parentPath?(0,a.BX)(E.G7,{css:Jn.header,children:[(0,a.tZ)(un,{text:e.parentPath,highlight:r,dimmed:!e.active}),"/"]}):null,(0,a.tZ)(E.G7,{css:Jn.fileName,children:(0,a.tZ)(un,{text:e.fileName,highlight:i,dimmed:!e.active})})]})]})}function nt(e){var n=e.path,t=e.defaultScore,r=void 0===t?1:t,i=e.scoreMultiplier,o=void 0===i?1:i;return function(e){var t=e.search,i=e.active;if("group"===e.data.type)return null;var l=(0,Qn.Il)(n),c=(0,Qn.UO)(n),u=l?44:32;if(!t&&i)return{score:r,render:{height:u,content:(0,a.tZ)(et,{parentPath:l,fileName:c,height:u})}};var s=function(e){var n=e.path,t=e.search,r=(0,Qn.UO)(n),i=H.Z.match(t,r);if(i){var o=n.length-r.length;return{type:"file",score:i.score,ranges:i.ranges.map((function(e){return{from:e.from+o,to:e.to+o}}))}}var a=H.Z.match(t,n);return a?{type:"path",ranges:a.ranges,score:.9*a.score}:null}({path:n,search:t});return s?{score:s.score*o,render:{height:u,content:(0,a.tZ)(et,{parentPath:l,fileName:c,highlight:s.ranges,height:u})}}:null}}var tt={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"P"};function rt(){return(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(8)],children:[(0,a.tZ)(qn.Z,{}),(0,a.tZ)(E.xv,{color:"dimmest",children:"Something went wrong searching your Repl's files. Please try again."})]})}function it(e){return V({type:"context",label:"Files",description:"Find a file",icon:(0,a.tZ)(Kn.Z,{}),keyboardShortcut:e.keyboardShortcut?tt:void 0},{match:K({defaultScore:3}),commands:function(){var n=(0,r.Z)((function(n){var t,i,l,c,u,s,d,f;return(0,o.__generator)(this,(function(p){switch(p.label){case 0:return t=e.fs,i=e.shouldHideFile,(l=n.search?n.search.toLowerCase():void 0)||n.active&&!e.lazyLoad?[4,e.getRecentFiles()]:[2,[]];case 1:return c=p.sent(),u=new Set(c),l||n.active?[4,t.listFiles()]:[3,3];case 2:if((s=p.sent()).error)return[2,[{data:{type:"error",label:s.error,icon:(0,a.tZ)(qn.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(rt,{})}}}}]];if(!s.files)throw new Error("Expected files");s.files.forEach((function(e){u.has(e)||u.add(e)})),p.label=3;case 3:return d=[],u.forEach((function(e){if(!i(e)){var n=c.includes(e),t={type:"openFile",label:e,icon:(0,a.tZ)(Yn.Z,{path:e}),deeplink:{path:e}};if(l)H.Z.match(l,e)&&d.push(V(t,{match:nt({path:e,scoreMultiplier:n?2:1})}));else d.push(V(t,{match:nt({path:e})}))}})),0===d.length&&n.active&&(f=n.search,d.push({data:{label:f,description:"Create a new file",icon:(0,a.tZ)(Yn.Z,{path:f}),type:"action",run:(0,r.Z)((function(){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.writeFile(f,$n.Z.from(""))];case 1:return n.sent(),e.openFile({path:f}),[2]}}))}))},match:function(){return{score:1}}})),[2,d]}}))}));return function(e){return n.apply(this,arguments)}}()})}var ot=t(50009),at=t(87653),lt=t(46806),ct=(0,E.Xb)({root:[E.l0.colWithGap(4),E.l0.align.start,E.l0.flex.growAndShrink(1),E.l0.p(8)],header:[E.l0.rowWithGap(4)],singleLine:[{whiteSpace:"nowrap",fontFamily:E.TV.fontFamilyCode},E.l0.truncate,E.l0.color.foregroundDimmest]});function ut(e){var n=e.path,t=e.line,r=e.singleLine;return(0,a.BX)(E.G7,{css:ct.root,children:[(0,a.BX)(E.G7,{css:ct.header,children:[(0,a.tZ)(Yn.Z,{path:n,size:12}),(0,a.BX)(E.xv,{variant:"small",color:"dimmest",children:[n,":",t.lineNumber]})]}),(0,a.tZ)(E.G7,{css:r&&ct.singleLine,children:(0,a.tZ)(ot.xK,{source:t.content,matches:t.matches})})]})}function st(){return(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(8)],children:[(0,a.tZ)(qn.Z,{}),(0,a.tZ)(E.xv,{color:"dimmest",children:"Something went wrong searching your Repl's contents. Please try again."})]})}function dt(){return(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(8),E.l0.p(8),E.l0.align.center],children:[(0,a.tZ)(qn.Z,{}),(0,a.tZ)(E.xv,{color:"dimmest",children:"Displaying only part of the results, try being more specific with your search."})]})}function ft(){return(0,a.tZ)(E.G7,{css:[E.l0.rowWithGap(8),E.l0.p(8),E.l0.align.center],children:(0,a.tZ)(E.xv,{color:"dimmest",children:"Nothing came up searching your Repl's content."})})}var pt={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"F"};function ht(e){var n,t=ne()((function(e,n,t){(0,lt.C)(e).then(n).catch(t)}),200);return V({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(at.Z,{}),keyboardShortcut:e.keyboardShortcut?pt:void 0},{match:K({defaultScore:2}),commands:function(){var l=(0,r.Z)((function(r){var l,c,u,s,d,f,p,h,v,m,g,Z;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r.search?!r.active&&e.activeOnly?[2,[]]:(l=Math.random(),n=l,[4,new Promise((function(n,i){t({query:r.search,container:e.container},n,i)}))]):[2,[]];case 1:if(c=o.sent(),u=c.results,s=c.error,d=c.isPartialResult,l!==n)return[2,[]];if(null!==s)return r.active?[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(qn.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(st,{})}}}}]]:[2,[]];f=[],p=!0,h=!1,v=void 0;try{for(m=function(){var n=(0,i.Z)(Z.value,2),t=n[0];n[1].forEach((function(n){var i=n.matches[0].column;f.push(V({type:"openFile",label:t,icon:(0,a.tZ)(Yn.Z,{path:t}),key:[t,n.lineNumber,i].join(":"),deeplink:{path:t,line:n.lineNumber,col:i}},{match:function(){var i=H.Z.match(r.search,n.content);return{score:(null===i||void 0===i?void 0:i.score)||1,render:{height:60,content:(0,a.tZ)(ut,{path:t,line:n,singleLine:e.singleLineMatch})}}}}))}))},g=Object.entries(u)[Symbol.iterator]();!(p=(Z=g.next()).done);p=!0)m()}catch(y){h=!0,v=y}finally{try{p||null==g.return||g.return()}finally{if(h)throw v}}if(0===f.length&&r.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(E.G7,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(ft,{})}}}}]];if(r.active){if(0===f.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(E.G7,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(ft,{})}}}}]];d&&f.push({data:{type:"error",label:"error",icon:(0,a.tZ)(qn.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(dt,{})}}}})}return[2,f]}}))}));return function(e){return l.apply(this,arguments)}}()})}var vt=t(95068),mt=t(12727),gt=t(57353),Zt=t(18374),yt=t(45604),bt=t(57416),wt=t(12771),xt=t(91330),kt=t(46689);var Ct=t(37806),Rt=t(72676),It=t(7514),Tt=(0,dn.cn)(null,(function(e,n,t){var r,i=e(vt.g4);"tile"===e((0,mt.z)(t)).type?n(Rt.iH,(0,te.ZP)(i,(function(e){try{!function(e,n){var t=(0,wt.Rh)(e,n.paneId);if(!t)return!1;var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map((function(e,n){return r.slice(0,n+1)})),o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=(0,wt.KC)(e,s);if(!d)throw new Error("Expected node");if("floatingPaneGroup"===d.type)throw new Error("Expected tiled pane");if(1!==s.length){var f=s[s.length-1];if("number"!==typeof f)throw new Error("Expected number");var p=(0,wt.KC)(e,(0,kt.I)(s));if("split"!==(null===p||void 0===p?void 0:p.type))throw new Error("Expected split");var h=p.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var v=f===p.children.length-1,m=v?(0,N.Z)(s.slice(0,-1)).concat([f-1]):s,g=v?p.children[f-1].percent-h:h;(0,xt.Z)(e,{leftPath:m,percent:g})}}}}catch(Z){a=!0,l=Z}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}(e,{paneId:t,minPercentHorizontal:30,minPercentVertical:20})}catch(r){throw n(Ct.j6,{error:r,origin:"Layout: focusPaneAtom/revealTiledPane"}),r}}))):n(Rt.iH,(0,te.ZP)(i,(function(e){try{!function(e,n){var t=(0,wt.Rh)(e,n.paneId);if(!t)return!1;var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw new Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}(e,{paneId:t,minWidth:200,minHeight:140})}catch(r){throw n(Ct.j6,{error:r,origin:"Layout: focusPaneAtom/revealFloatingPane"}),r}}))),n(bt.W1,t);var o=null===(r=e(It.YO)[t])||void 0===r?void 0:r.focus;o&&setTimeout(o)}));function St(){return(0,dn.b9)(Tt)}var Gt=function(e,n,t){return{match:t||q,data:{type:"openPane",pane:e,label:n.getTitle(e),icon:n.Icon({pane:e})}}};function Et(){var e=(0,rn.Se)();return(0,J.Z)((function(){return(0,dn.cn)((function(n){var t=n(vt.S6).map((function(e){return n(e.data).data.path})),r=n(vt.EP).filter((function(e){return!t.includes(e)}));return{data:{type:"context",label:"Recent",icon:(0,a.tZ)(Vn.Z,{})},commands:function(){return r.map((function(n){var t=(0,rn.Dp)({path:n});return Gt({type:t,data:{path:n}},e,nt({defaultScore:10,path:n}))}))}}}))}),[e])}function Pt(){var e=(0,rn.Se)(),n=(0,yt.B)();return(0,J.Z)((function(){return(0,dn.cn)((function(t){var r=t(mt.Eh).filter((function(e){return!e.isHidden})).map((function(e){return t(e.data).type})),i=[],o=!0,a=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;(0,rn.b)(s.type)&&r.includes(s.type)||i.push(Gt(s,e))}}catch(d){a=!0,l=d}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return i}))}),[n,e])}var Dt={type:"group",key:"root",description:"Search for tools and files"};function Ut(e){var n=e.currentPaneId,t=e.openFile,r=(0,jn.Z)(),o=r.fs,l=r.container,c=Pt(),u=function(e){var n=e.currentPaneId,t=(0,rn.Se)(),r=St();return(0,J.Z)((function(){return(0,dn.cn)((function(e){var o=e(mt.Eh),l=n?o.filter((function(e){return e.paneId!==n})).map((function(n){return[n.paneId,e(n.data)]})):o.map((function(n){return[n.paneId,e(n.data)]}));return l.length?[{data:{type:"context",label:"Switch to tab",icon:(0,a.tZ)(Zt.Z,{})},commands:function(){return l.map((function(e){var n=(0,i.Z)(e,2),o=n[0],a=n[1];return{match:(0,rn.KM)(a)&&a.data.path?nt({path:a.data.path}):q,data:{key:o,type:"action",label:t.getTitle(a),icon:t.Icon({pane:a}),run:function(){return r(o)}}}}))}}]:[]}))}),[t,n,r])}({currentPaneId:n}),s=Et(),d=(0,vt.AA)(),f=(0,gt.T)(),p=(0,J.Z)((function(){return(0,dn.cn)((function(e){var n=e(c),r=e(u),i=e(s),p={data:{type:"context",label:"Search",icon:(0,a.tZ)(at.Z,{}),key:"searchGroup"},commands:function(){return[it({openFile:t,fs:o,shouldHideFile:f,getRecentFiles:d}),ht({container:l,singleLineMatch:!0})]}},h={data:{type:"context",label:"Tools",icon:(0,a.tZ)(Zt.Z,{})},commands:function(){return(0,N.Z)(n)}};return{data:Dt,commands:function(){return[i].concat((0,N.Z)(r),[p,h])}}}))}),[l,o,d,c,u,f,s,t]);return(0,dn.Dv)(p)}var Bt=(0,dn.cn)(!1);var _t=(0,dn.cn)(null,(function(e,n,t){if(e(Bt))return n(Mt,null),void n(Bt,!1);t&&n(Mt,t),n(Bt,!0)}));function Xt(){return(0,dn.b9)(_t)}var Mt=(0,dn.cn)(null),At=(0,dn.cn)([]);function Ot(){return(0,dn.b9)(At)}function Ft(){var e=function(){var e=Pt();return(0,J.Z)((function(){return(0,dn.cn)((function(n){var t=n(At),r=n(e),i={data:{type:"context",label:"Tools",icon:(0,a.tZ)(Zt.Z,{})},commands:function(){return r}};return{data:Hn.$,commands:function(){return(0,N.Z)(t).concat([i])}}}))}),[e])}(),n=(0,J.Z)((function(){return(0,dn.cn)((function(n){var t=n(e),r=n(Mt);return r?[t,r]:t}))}),[e]);return(0,dn.Dv)(n)}var zt=t(58967),Lt=t(63377),Nt=t(47875);function Wt(e,n){if("object"!==typeof n)return null;var t="string"===typeof n.action?n.action:null;if(!t)return null;if("layout"===e){if("split"===t){var r="string"===typeof n.pane?{type:n.pane}:{type:"commands",data:{autoFocus:!1}};return{action:n.action,placement:n.placement,pane:r}}if("reset"===t)return{action:"resetLayout"}}if("file"===e){var i="string"===typeof n.path?n.path:null;return i&&("openOrCreate"===n.action||"delete"===n.action)?{action:n.action,path:i}:null}if("tabs"===e){if("close"===t&&"string"===typeof n.type)return{action:"closeTab",type:n.type};if("open"===t)return{action:"openTab",pane:"string"===typeof n.type?{type:n.type}:{type:"commands",data:{autoFocus:!1}}}}return"codegen"===e&&"generate"===t&&"string"===typeof n.prompt?{action:"generate",prompt:n.prompt}:null}var jt=t(71171),Ht=t.n(jt),Vt=t(68963),Kt=t(15961),qt=t(50146),Yt=t(63567),$t=t(46242),Qt=t(51894),Jt=t(81516),er=t(57418),nr=t(3032),tr=t(78120);function rr(e){return ir.apply(this,arguments)}function ir(){return(ir=(0,r.Z)((function(e){var n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:if(!Jt.l)throw new Error("Expected apolloClient");return[4,Jt.l.query({query:Qt.R1,variables:{input:e}})];case 1:if("GenerateCodeResult"!==(n=t.sent().data).generateCode.__typename)throw new Error(n.generateCode.__typename);return[2,n.generateCode.code]}}))}))).apply(this,arguments)}var or=(0,dn.cn)(null,(function(e,n){n(Rt.iH,{tiling:null,floating:[]})})),ar=((0,dn.cn)(null,(function(e,n){var t=Ht()(),r=e(vt.g4);n(Rt.iH,(0,te.ZP)(r,(function(e){(0,Vt.m)(e,{id:Ht()(),relativeTo:["tiling"],placement:"replace",panes:[t]})})))})),(0,dn.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r,i,a,l,c,u,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:switch(r=t.action,i=t.fs,r.action){case"openOrCreate":return[3,1];case"delete":return[3,7];case"split":return[3,9];case"openTab":return[3,10];case"closeTab":return[3,11];case"resetLayout":return[3,12];case"clearLayout":return[3,13];case"generate":return[3,14]}return[3,17];case 1:return[4,i.stat(r.path)];case 2:return o.sent().exists?[3,6]:[4,i.writeFile(r.path,"")];case 3:return o.sent(),[4,i.flush()];case 4:return o.sent(),[4,i.persist({skipDebounce:!0})];case 5:o.sent(),o.label=6;case 6:return n(nr.U,{path:r.path}),[3,17];case 7:return[4,i.deleteFile(r.path)];case 8:return o.sent(),[3,17];case 9:return a=e(bt.J1),n(Kt.g2,{panes:[r.pane],placement:r.placement,makeActive:!1,relativeTo:a||["tiling"]}),[3,17];case 10:return n($t.Q0,{pane:r.pane}),[3,17];case 11:return"*"===r.type?n(or,{}):n(qt.AW,r.type),[3,17];case 12:return n(Yt.B,{}),[3,17];case 13:return n(or,{}),[3,17];case 14:return(l=e(vt.QP))||(c=e(mt.Eh).find((function(n){return"codeEditor"===e(n.data).type})))&&"codeEditor"===(u=e(c.data)).type&&(l=u.data.path),l?[4,rr({language:(0,er.Sf)(l),replId:t.replId,prompt:r.prompt})]:[2];case 15:return s=o.sent(),[4,new Promise((function(e,n){if(l)var t=i.watchTextFile(l,{onError:function(t){n(t),e()},onReady:function(n){var r=n.writeChange,i=n.initialContent;r(tr.as.of({from:i.length,insert:s},i.length)),t(),e()}});else n(new Error("Expected path"))}))];case 16:return o.sent(),[3,17];case 17:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}())),lr=(0,dn.cn)(!1);var cr=(0,dn.cn)(!1);var ur="https://llmide.amasad.repl.co";function sr(e){return dr.apply(this,arguments)}function dr(){return(dr=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch(ur+"/"+encodeURIComponent(e),{mode:"cors"})];case 1:return[4,n.sent().json()];case 2:return[2,{json:n.sent(),error:null}];case 3:return[2,{json:null,error:n.sent()}];case 4:return[2]}}))}))).apply(this,arguments)}function fr(e){var n=e.isOpen,t=e.onDone,a=(0,jn.Z)().fs,l=(0,re.Z)(t),c=(0,Nt.Q)("flagGhostrunner"),u=(0,Lt.Z)(),s=(0,J.Z)((function(){return(0,dn.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r,c,s,d,f,p,h,v,m;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e(Nt.H).flagGhostrunner?(n(lr,!0),[4,sr(t)]):[2];case 1:if((r=o.sent()).error)return n(lr,!1),n(cr,!0),[2];if(c=function(e){if("object"!==typeof e)return{error:"not an object",actions:null};var n=e&&"result"in e?e.result:null;if(!Array.isArray(n))return{error:"no commands",actions:null};var t=[],r=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if("object"===typeof u){var s=!0,d=!1,f=void 0;try{for(var p,h=Object.entries(u)[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=(0,i.Z)(p.value,2),g=Wt(v[0],v[1]);g&&t.push(g)}}catch(m){d=!0,f=m}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}}}catch(m){o=!0,a=m}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return 0===t.length?{error:"no commands",actions:null}:{error:null,actions:t}}(r.json),!c.actions)return n(lr,!1),n(cr,!0),[2];s=!0,d=!1,f=void 0,o.label=2;case 2:o.trys.push([2,7,8,9]),p=c.actions[Symbol.iterator](),o.label=3;case 3:return(s=(h=p.next()).done)?[3,6]:(v=h.value,[4,n(ar,{fs:a,action:v,replId:u})]);case 4:o.sent(),o.label=5;case 5:return s=!0,[3,3];case 6:return[3,9];case 7:return m=o.sent(),d=!0,f=m,[3,9];case 8:try{s||null==p.return||p.return()}finally{if(d)throw f}return[7];case 9:return n(lr,!1),l.current(),[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}())}),[l,a,u]),d=(0,dn.b9)(s);return(0,g.useEffect)((function(){if(c&&n&&window.webkitSpeechRecognition){var e=new window.webkitSpeechRecognition;e.onresult=function(e){var n=e.results[0][0].transcript;d(n)},e.start()}}),[d,c,n]),d}function pr(){var e=(0,dn.Dv)(lr);return(0,dn.Dv)(cr)?(0,a.tZ)(hr,{}):e?(0,a.tZ)(E.Tg,{elevated:!0,css:[E.l0.coverContainer,E.l0.borderRadius(8),E.l0.center],children:(0,a.tZ)(Qe.Z,{})}):null}function hr(){var e=(0,dn.b9)(cr);return(0,g.useEffect)((function(){var n=setTimeout((function(){e(!1)}),600);return function(){clearTimeout(n)}}),[e]),(0,a.tZ)(E.Tg,{elevated:!0,css:[E.l0.coverContainer,E.l0.borderRadius(8),E.l0.center],children:(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(8),E.l0.align.center],children:[(0,a.tZ)(qn.Z,{color:E.TV.accentNegativeDefault}),(0,a.tZ)(E.xv,{children:"Something went wrong, try again"})]})})}function vr(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=Ot();(0,g.useEffect)((function(){if(n)return t((function(n){return(0,N.Z)(n).concat([e])})),function(){t((function(n){return n.filter((function(n){return n!==e}))}))}}),[t,e,n])}function mr(){var e=(0,dn.Dv)(Bt),n=Xt(),t=Ft(),r=(0,jn.Z)().session,i=(0,zt.Z)("commandBar").trackTimeToLoadFileStart,o=(0,$t.TO)();(0,g.useEffect)((function(){return r.onCommandBarToggled((function(t){t!==e&&n()}))}),[r,n,e]),(0,g.useEffect)((function(){r.setIsCommandBarOpen(e)}),[r,e]);var l=fr({onDone:n,isOpen:e});return(0,a.BX)(E.u_,{hideCloseButton:!0,isOpen:e,onRequestClose:n,noPadding:!0,children:[(0,a.tZ)(E.Tg,{elevated:!0,css:[E.l0.maxHeight("70vh"),E.l0.borderRadius(8)],children:(0,a.tZ)(Wn,{keyboardShortcut:Hn.q,onSubmit:l,onSelect:function(e){if("openFile"===e.data.type){var t=e.data.deeplink;i(t.path),r.openFile(t.path),r.updateDeeplink(t)}"openPane"===e.data.type&&o({pane:e.data.pane}),"action"===e.data.type&&e.data.run(),n()},command:t})}),(0,a.tZ)(pr,{})]})}var gr=(0,g.memo)(mr),Zr=t(46701),yr=t(1144),br=t(41709),wr=t(80856),xr=t(11731);function kr(){var e=(0,xr.hx)(),n=(0,wr.Z)({moveOrDeleteFile:e}),t=n.isConverging,r=n.didContentsDiverge,i=n.showMoreDetail,o=n.failedFiles,l=n.failedFilesOptions,c=n.selectedFile,u=n.setSelectedFile,s=n.reviewingPrompt,d=n.onChoice,f=n.local,p=n.remote,h=[E.l0.minHeight("7em"),E.l0.maxHeight("50vh"),E.l0.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,a.tZ)(E.u_,{css:[{maxHeight:"90%",maxWidth:"90%"}],preventClose:!0,isOpen:r,onRequestClose:function(){},children:(0,a.BX)(E.G7,{css:[E.l0.colWithGap(24)],children:[(0,a.tZ)(yr.h,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,a.BX)(yr.x,{multiline:!0,children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",o.length>1?"these files":"this file"," you'd like to keep."," ",o.length>1?(0,a.BX)("strong",{children:["There are ",o.length," files impacted by this."]}):""]}),t?(0,a.tZ)(P.Loader,{}):(0,a.BX)(a.HY,{children:[l.length?(0,a.tZ)(E.Ph,{initialSelectedItem:l[0],selectedItem:l.find((function(e){return e.path===c})),items:l,onChange:function(e){u(e.path)}}):null,i?(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(16),E.l0.justify.start,E.l0.align.center,E.l0.pt(16),E.l0.p(8),E.l0.backgroundColor.redDimmest,E.l0.font.code],children:[(0,a.tZ)(yr.x,{variant:"subheadDefault",children:"Debug View"}),(0,a.BX)(yr.x,{children:["Divergence type: ",null===s||void 0===s?void 0:s.case]})]}):null,(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(8)],children:[(0,a.BX)(E.G7,{css:[E.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,a.tZ)(yr.x,{variant:"subheadDefault",children:"My changes"}),(0,a.tZ)(E.Tg,{elevated:!0,css:[E.l0.flex.growAndShrink(1),E.l0.py(8)],children:(0,a.tZ)(E.G7,{css:h,children:(0,a.tZ)(br.q,{diffViewer:f})})}),(0,a.BX)(E.G7,{css:[E.l0.pt(16)],children:[(0,a.tZ)(yr.x,{multiline:!0,css:[E.l0.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,a.tZ)(E.zx,{onClick:function(){d("local")},text:"Reset to Mine"})]})]}),(0,a.BX)(E.G7,{css:[E.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,a.tZ)(yr.x,{variant:"subheadDefault",children:"Shared changes"}),(0,a.tZ)(E.Tg,{elevated:!0,css:[E.l0.flex.growAndShrink(1),E.l0.py(8)],children:(0,a.tZ)(E.G7,{css:h,children:(0,a.tZ)(br.q,{diffViewer:p})})}),(0,a.BX)(E.G7,{css:[E.l0.pt(16),E.l0.justify.end],children:[(0,a.tZ)(yr.x,{multiline:!0,css:[E.l0.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,a.tZ)(E.zx,{onClick:function(){d("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var Cr=t(60523),Rr=t(2858),Ir=t(35621),Tr=t(76521);function Sr(e){var n=e.children,t=g.useRef({fileMap:new Map});return(0,a.tZ)(Cr.Z.Provider,{value:t,children:n})}function Gr(e){var n=e.ui,t=e.services,r=e.replId,i=e.replLanguage,o=e.replSlug,l=e.children,c=(0,J.Z)((function(){return{id:r,language:i,slug:o}}),[r,i,o]);return(0,a.tZ)(rn.kz,{value:n,children:(0,a.tZ)(Sr,{children:(0,a.tZ)(Rr.Z.Provider,{value:t,children:(0,a.tZ)(Ir.Z.Provider,{value:c,children:(0,a.tZ)(Tr.Wv,{children:l})})})})})}var Er=t(25602),Pr=t(89390),Dr=t(88619),Ur=function(){var e=(0,r.Z)((function(e,n){var t,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return(0,Er.u9)()?[4,(0,Er.mv)(e)]:[2,!1];case 1:return t=o.sent(),r=t.path,i=t.line,a=t.col,r?(n.openFile(r,{line:i,col:a}),[2,!0]):[2,!1]}}))}));return function(n,t){return e.apply(this,arguments)}}();function Br(){return function(){var e=(0,jn.Z)(),n=e.fs,t=e.session,i=e.dotReplit,a=(0,Lt.Z)(),l=(0,dn.Dv)(vt.QP),c=(0,re.Z)(l),u=(0,g.useState)(!1),s=u[0],d=u[1],f=(0,dn.Dv)(Dr.Mn),p=(0,g.useRef)(!1);(0,g.useEffect)((function(){if(s&&!p.current)if(l){var e=(0,Er.YM)({path:l}),n=window.location.hash;if(n.slice(1)!==l&&!n.startsWith(e+":")){var t=new URL(window.location.href);t.hash=e,window.history.pushState(null,"",t)}}else{if(!window.location.hash)return;history.pushState("",document.title,window.location.pathname+window.location.search)}}),[s,l]),(0,g.useEffect)((function(){function e(){return(e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return f?c.current?(d(!0),[2]):[4,Ur(n,t)]:[2];case 1:return e=r.sent(),d(!0),e||c.current||"saved"===f||(0,Pr.P)(n,t,i,a),[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,t,i,a,c,f]),(0,g.useEffect)((function(){if(f){var e=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return p.current=!0,[4,Ur(n,t)];case 1:return e.sent(),p.current=!1,[2]}}))}));return function(){return e.apply(this,arguments)}}();return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}}),[f,n,t])}(),null}var _r=t(1557);function Xr(){var e=(0,jn.Z)().fs,n=(0,g.useState)(!1),t=n[0],r=n[1],i=(0,g.useState)(!1),o=i[0],l=i[1],c=(0,ie.D)();(0,g.useEffect)((function(){if(!o)return e.onDiskQuotaExceeded((function(){r(!0)}))}),[e,o]);var u=function(){r(!1)};return(0,a.tZ)(E.u_,{isOpen:t,onRequestClose:u,children:(0,a.BX)(E.G7,{css:[E.l0.colWithGap(24)],children:[(0,a.BX)(E.h4,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,a.tZ)(_r.Z,{color:E.TV.accentNegativeDefault,size:20})]}),(0,a.BX)(E.xv,{multiline:!0,variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,a.tZ)(Kn.Z,{})," icon on the left."]}),(0,a.tZ)(E.xv,{multiline:!0,children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,a.tZ)(E.xv,{multiline:!0,variant:"small",children:"We apologize for the inconvenience. We are working on a solution to allow you to boost your disk limits."}),(0,a.BX)(E.G7,{css:E.l0.rowWithGap(8),tag:"label",children:[(0,a.tZ)(E.XZ,{id:c,checked:o,onChange:function(e){return l(Boolean(e.currentTarget.value))}}),(0,a.tZ)(E.xv,{multiline:!0,variant:"small",children:"Do not show this message again for this session."})]}),(0,a.tZ)(E.zx,{onClick:u,text:"Close"})]})})}var Mr=t(81255),Ar=t(63848),Or=t(92271);function Fr(){var e=(0,Ar.K)(),n=(0,vt.hF)(),t=(0,Or.P9)();if(!e)return null;var r=e.rect,i="detachPreview"===e.type?e.progress:1,o="detachPreview"===e.type?e.rect.height:8,l="detachPreview"===e.type&&i<.98?Mr.TV.foregroundDefault:Mr.TV.accentPrimaryDefault,c="detachPreview"===e.type?void 0:Mr.TV.accentPrimaryDimmer;return(0,a.tZ)("div",{style:{position:"absolute",border:"1px ".concat(i<.98?"dashed":"solid"),pointerEvents:"none",width:r.width,height:r.height,backgroundColor:c,borderColor:l,borderRadius:o,zIndex:t,opacity:"detachPreview"===e.type?.5*i:.2,transform:"translate(".concat(Math.round(r.x),"px, ").concat(Math.round(r.y),"px)"),transition:n?"transform 140ms, width 140ms, height 140ms, border-radius 140ms":void 0},children:"detachPreview"===e.type?(0,a.tZ)(zr,{progress:i}):null})}function zr(e){var n=e.progress;return(0,a.tZ)("div",{style:{width:"100%",height:"100%",transform:"scale(".concat(n,")"),background:"radial-gradient(transparent, ".concat(Mr.TV.backgroundHighest,")"),borderRadius:"100%"}})}var Lr=(0,g.memo)(Fr),Nr=t(77723),Wr=(0,dn.cn)((function(e){var n=e(mt.CK),t=n.width,r=n.height,i=e(Nr.TL);return{x:Math.round(i.width+Rt.SG),y:0,width:t-i.width-2*Rt.SG,height:r-Rt.SG}}));var jr=t(88662),Hr=t(89224),Vr=t(31600),Kr=(0,dn.cn)(null,(function(e,n){var t=e(Wr);n(Ar.m,{type:"dropPreview",rect:t})})),qr=(0,dn.cn)(null,(function(e,n,t){n(Ar.m,null),n(xr.c,!1),n(Kt.g2,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}));function Yr(){var e=(0,i.Z)((0,jr.L)({accept:[Hr.Tv.File,Vr.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,n){n.getClientOffset()&&r.drag()},drop:function(e,n){if(n.getClientOffset()){if(e.type===Hr.Tv.File||e.type===Hr.Tv.Directory){var t=e.nodes.filter((function(e){return e.type===Hr.Tv.File})).map((function(e){return{type:(0,rn.Dp)({path:e.path}),data:{path:e.path}}}));t.length>0&&r.drop({panes:t})}if(e.type===Vr.z.NewPane){var i=e.pane;r.drop({panes:[i]})}}}}),2),n=e[0].isOver,t=e[1],r=function(e){var n=e.isOver,t=(0,dn.b9)(Ar.m);return(0,g.useEffect)((function(){n||t(null)}),[n,t]),{drag:(0,dn.b9)(Kr),drop:(0,dn.b9)(qr)}}({isOver:n});return t}var $r=(0,E.Xb)({root:[E.l0.position.absolute,E.l0.borderRadius(8),E.l0.pt(16),E.l0.align.center,{border:"1px solid",borderColor:E.TV.outlineDimmest}],content:[E.l0.width("100%"),E.l0.flex.growAndShrink(1),{"& > div > label + div":[E.l0.maxWidth(600),E.l0.width("100%"),{alignSelf:"center"}],'& [role="listbox"] > div':[E.l0.align.center],'& [role="listbox"] > div > div':[E.l0.maxWidth("calc(".concat(600,"px - ").concat(E.TV.space16,")")),E.l0.width("100%")],'& [role="option"] > div':[E.l0.borderRadius(8)]}]});function Qr(){var e=(0,dn.Dv)(Wr),n=(0,Kt.BN)(),t=Yr(),r=(0,g.useCallback)((function(e){n({pane:{type:(0,rn.Dp)({path:e.path}),data:e},edge:"left"})}),[n]),i=Ut({currentPaneId:null,openFile:r});return(0,a.tZ)(E.G7,{style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},css:$r.root,innerRef:t,children:(0,a.tZ)(E.G7,{css:$r.content,children:(0,a.tZ)(Wn,{autoFocus:!0,command:i,onSelect:function(e){"openFile"!==e.data.type?"openPane"!==e.data.type?"action"!==e.data.type||e.data.run():n({pane:e.data.pane,edge:"left"}):r(e.data.deeplink)}})})})}var Jr=t(43530),ei=t(32892),ni=t(92002),ti=t(89051),ri=t(23384);function ii(){return(0,ri.D)({controlName:"flag-extensions",default:!1,type:"boolean"})}var oi=t(98814);function ai(){var e=(0,b.Z)(["\n  query ExtensionStore($replId: String!) {\n    extensionList(includeNonBlessed: true) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return ai=function(){return e},e}var li=(0,w.Ps)(ai(),oi.R9,oi.gp);function ci(){var e=ii(),n=(0,ri.D)({controlName:"flag-extension-creator",default:!1,type:"boolean"}),t=(0,Lt.Z)(),i=(0,ti.WF)(),l=(0,ti.td)(),c=(0,ti.ot)(),u=(0,ti.L4)();return g.useEffect((function(){t&&e&&u(t)}),[t,e,u]),vr({match:q,commands:function(e){return e.active||""!==e.search?[{match:q,data:{type:"action",label:"URL",icon:(0,a.tZ)(ni.Z,{}),description:"Add an extension by URL",run:function(){var e=prompt("insert extension url");e&&l({url:e,name:"Extension",extensionId:null,installationId:null})}}},{match:q,data:{type:"context",label:"Store",icon:(0,a.tZ)(ei.Z,{}),description:"Browse the extension store"},commands:function(){var e=(0,r.Z)((function(e){var n,r,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e.active?[4,null===Jt.l||void 0===Jt.l?void 0:Jt.l.query({query:li,variables:{replId:t}})]:[2,[]];case 1:return!(n=o.sent())||n.error?[2,[]]:(r=n.data.extensionList)?[2,r.map((function(e){return{match:q,data:{type:"action",label:e.name,icon:(0,a.tZ)(ei.Z,{}),description:null!==(l=e.description)&&void 0!==l?l:"",run:function(){e.url&&(e.installation?c(e.installation.id):i({replId:t,extension:e}))}}}}))]:[2,[]]}}))}));return function(n){return e.apply(this,arguments)}}()},{match:q,data:{type:"action",label:"Docs",icon:(0,a.tZ)(Jr.Z,{}),description:"Read the extensions docs",run:function(){l({url:"/extensions-docs",name:"Extension",extensionId:null,installationId:null})}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,a.tZ)(ei.Z,{}),description:"Manage extensions"}},{enabled:n}),null}var ui=t(51995),si=t(91082),di=t(83475),fi=t(9117),pi=t(48920),hi=t(83117),vi=t(11070),mi=t(1879),gi={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"Enter"};function Zi(e){var n=e.isAdmin,t=Xt(),r=(0,g.useState)(!1),i=r[0],o=r[1],l=(0,vt.AA)(),c=(0,jn.Z)(),u=c.fs,s=c.container,d=c.runner,f=(0,di.L7)(d),p=(0,gt.T)(),h=(0,nr.C)();(0,fi.x)(Hn.q,{run:function(){t()}}),(0,fi.x)(tt,{run:function(){t(it({openFile:h,fs:u,shouldHideFile:p,getRecentFiles:l}))}}),(0,fi.x)(pt,{run:function(){t(ht({container:s,keyboardShortcut:!0}))}}),vr(it({openFile:h,fs:u,shouldHideFile:p,getRecentFiles:l,keyboardShortcut:!0}));var v=(0,Nt.Q)("flagGhostrunner");return vr(ht({container:s,activeOnly:v})),vr({match:q,data:{type:"action",icon:(0,a.tZ)(ui.Z,{}),label:"Run",description:"Run Repl",run:function(){d.run()},keyboardShortcut:gi}},{enabled:f===pi.A.IDLE}),(0,fi.x)(gi,{run:function(){f===pi.A.RUNNING&&d.stopRun(),d.run()},enabled:f!==pi.A.OFFLINE}),vr({match:q,data:{type:"action",icon:(0,a.tZ)(si.Z,{}),label:"Stop",description:"Stop Repl",run:function(){d.stopRun()}}},{enabled:f===pi.A.RUNNING}),vr({match:q,data:{type:"action",icon:(0,a.tZ)(hi.Z,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){s.exec("kill","1")}}},{enabled:n}),vr({match:K({defaultScore:.5}),data:{type:"action",label:"Create",icon:(0,a.tZ)(ni.Z,{}),description:"Create a new Repl",run:function(){o(!0)}}}),(0,a.tZ)(mi.u,{isOpen:i,onRequestClose:function(){return o(!1)},maxWidth:600,centered:!0,children:(0,a.tZ)(vi.Z,{})})}var yi=(0,g.memo)(Zi),bi=t(67573),wi=t(69346);var xi=t(48505),ki=t(56124),Ci=t(48869),Ri=t(42895),Ii=t(6307);function Ti(e,n,t){var r=!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)?32:0;if(t){var i=2/3,o=Math.max(e.width,r*i),a=Math.max(e.height,r*i),l="left"===t?1:-1,c=n?0:l*(o-e.width)/2,u=n?l*(a-e.height)/2:0;return{width:n?e.width:o,height:n?a:e.height,x:n?e.x:e.x-(o-e.width)/2+c,y:n?e.y-(a-e.height)/2+u:e.y}}var s=Math.max(e.width,r),d=Math.max(e.height,r);return{width:n?e.width:s,height:n?d:e.height,x:n?e.x:e.x-(s-e.width)/2,y:n?e.y-(d-e.height)/2:e.y}}var Si,Gi="--grip-color",Ei="var(".concat(Gi,")"),Pi=(0,l.iv)((Si={},(0,bi.Z)(Si,Gi,Mr.TV.outlineDimmest),(0,bi.Z)(Si,":active, :hover",(0,bi.Z)({},Gi,Mr.TV.foregroundDefault)),Si)),Di=(0,l.iv)([Mr.l0.position.absolute,Mr.l0.center,{minWidth:8,minHeight:8},Pi]),Ui=(0,l.iv)({":hover":{transform:"scaleX(4)"}}),Bi=(0,l.iv)({":hover":{transform:"scaleY(4)"}}),_i=(0,l.iv)([Mr.l0.height("200vh"),Mr.l0.width("200vw"),{transform:"translate(-50%, -50%)"}]),Xi=(0,l.iv)([{backgroundColor:Ei,transition:"background-color"},Mr.l0.borderRadius(4)]),Mi=(0,l.iv)([Xi,{transitionDuration:"140ms"}]);function Ai(e){var n=e.snapped,t=e.stacked;return"left"===n?t?(0,a.tZ)(Ci.Z,{color:Ei}):(0,a.tZ)(Ve.Z,{color:Ei}):t?(0,a.tZ)(ki.Z,{color:Ei}):(0,a.tZ)(xi.Z,{color:Ei})}var Oi=function(e){var n,t,r;return n=100/e*1,t=.08,r=.12,Math.min(Math.max(n,t),r)},Fi=function(e){return{default:(0,l.iv)([Mr.l0.height("horizontal"===e?2:24),Mr.l0.width("horizontal"===e?24:2),Xi]),active:(0,l.iv)([Mr.l0.height("horizontal"===e?1:"calc(100%)"),Mr.l0.width("horizontal"===e?"calc(100%)":1),Mr.l0.backgroundColor.accentPrimaryDefault]),collapsedIndicator:(0,l.iv)(["horizontal"===e?[Mr.l0.width(24),Mr.l0.align.center]:[Mr.l0.height(24),Mr.l0.justify.center,Mr.l0.mt(8)]]),shared:(0,l.iv)([Mr.l0.borderRadius(4),{transitionProperty:"width, height, background-color",transitionTimingFunction:"ease-out"}])}},zi=Fi("horizontal"),Li=Fi("vertical");function Ni(e){var n=e.rect,t=e.onPointerDown,r=e.onDoubleClick,i=e.stacked,o=e.snapped,l=e.zIndexHovered,c=e.zIndex,u=e.isActive,s=Ti(n,i,o),d=(0,Ri.T)(),f=(i?n.width:n.height)<24,p=i?zi:Li,h=i?"row-resize":"col-resize";return(0,a.BX)(a.HY,{children:[(0,a.BX)(wi.G,{onPointerDown:t,onDoubleClick:r,onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},style:{width:s.width,height:s.height,transform:"translate(".concat(s.x,"px, ").concat(s.y,"px)"),visibility:f?"hidden":void 0,cursor:h},css:[Di,{zIndex:c},!u&&{":hover":{zIndex:l}}],children:[(0,a.tZ)(wi.G,{css:[Mr.l0.coverContainer,!u&&(i?Bi:Ui),u&&_i]}),o?(0,a.tZ)(wi.G,{className:"collapsedIndicator",css:p.collapsedIndicator,children:(0,a.tZ)(Ai,{snapped:o,stacked:i})}):(0,a.tZ)(wi.G,{className:"grip-line",style:{transitionDuration:d?"0s":"".concat(Oi(i?n.width:n.height),"s")},css:[Mi,u?p.active:p.default,p.shared]})]}),u?(0,a.tZ)(Ii.a,{cursor:h}):null]})}function Wi(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=(0,wt.KC)(e,t);if(!r||"split"!==r.type)throw new Error("Expected split node");for(var i=100,o=(0,kt.I)(t);o.length;){var a=(0,wt.KC)(e,o);if(!a)break;o=(0,kt.I)(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=(0,wt.KC)(n,t);if("split"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,u=r.inset,s=void 0===u?{top:0,bottom:0,left:0,right:0}:u,d=o.children.length,f=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-f)}var ji=t(74418),Hi=(0,dn.cn)(null),Vi=(0,dn.cn)(null,(function(e,n,t){if("end"!==t.type)if("update"!==t.type){var r=e(vt.g4),i=t.stacked?window.innerHeight:window.innerWidth,o=(0,wt.KC)(r,t.leftPath);if(!o||!(0,kt.r)(o)){var a=new Error("Expected left node");throw n(Ct.j6,{error:a,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),a}var l=(0,kt.I)(t.leftPath),c=o.percent,u=Rt.pc/i*100,s=null;try{s=Wi({splitPath:l,layout:r,tilingOptions:e(Rt.Hs)})}catch(w){throw n(Ct.j6,{error:w,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),w}if(null===s)throw new Error("Expected resizeDistance");n(Hi,{stacked:t.stacked,leftPath:t.leftPath,startPercent:c,resizeDistance:s,snapPercent:u,initialLayout:r})}else{var d=e(Hi);if(!d){var f=new Error("Expected tilingResize");throw n(Ct.j6,{error:f,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),f}var p=d.stacked,h=d.leftPath,v=d.startPercent,m=d.resizeDistance,g=d.initialLayout,Z=d.snapPercent,y=v+(p?t.moveDelta.y:t.moveDelta.x)/m*100,b=(0,te.ZP)(g,(function(e){(0,xt.Z)(e,{leftPath:h,percent:y,snapPercent:Z})}));n(Rt.iH,b)}else n(Hi,null)}));var Ki=t(87671);var qi=t(93096),Yi=t.n(qi);function $i(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=e.pageX,i=e.pageY,o={x:r,y:i},a={x:0,y:0};n.start&&n.start({mouse:o,shiftKey:e.shiftKey});var l=Yi()((function(e){var t={x:e.pageX,y:e.pageY};a={x:t.x-o.x,y:t.y-o.y},n.move({delta:a,shiftKey:e.shiftKey,mouse:t})}),t),c=function(){l.cancel(),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",c),document.removeEventListener("touchcancel",c),n.end&&n.end({delta:a,shiftKey:e.shiftKey})};document.addEventListener("pointermove",l),document.addEventListener("pointerup",c),document.addEventListener("touchcancel",c)}function Qi(e){var n=e.handleId,t=(0,mt.ZZ)(n),r=(0,dn.b9)(Vi),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,g.useRef)(e),t=(0,Ki.eY)(),r=(0,vt.Xi)();return(0,g.useCallback)((function(i){i.snapped?t({leftPath:i.leftPath,percent:n.current}):Promise.resolve(r()).then((function(r){var o=(0,wt.KC)(r,i.leftPath);if(!o||!(0,kt.r)(o))throw new Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})}))}),[e,t,r])}(),o=(0,Or.bJ)(),l=function(e){var n=e.handleId,t=(0,J.Z)((function(){return(0,dn.cn)((function(e){var t=e(Hi);return!!t&&n===(0,ji.xH)({leftPath:t.leftPath})}))}),[n]);return(0,dn.Dv)(t)}({handleId:n});return(0,a.tZ)(Ni,{isActive:l,zIndex:l?o.active:o.normal,zIndexHovered:o.hovered,snapped:t.snapped,rect:t.rect,stacked:t.stacked,onDoubleClick:function(){i(t)},onPointerDown:function(e){$i(e,{start:function(){r({type:"start",leftPath:t.leftPath,stacked:t.stacked})},move:function(e){var n=e.delta;r({type:"update",moveDelta:n})},end:function(){r({type:"end"})}})}})}var Ji=(0,g.memo)(Qi),eo=t(60977);function no(){var e=(0,b.Z)(["\n  fragment ReplEnvironmentAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    image\n  }\n"]);return no=function(){return e},e}function to(){var e=(0,b.Z)(["\n  query ReplEnvironmentAvatarMenu {\n    currentUser {\n      id\n      ...ReplEnvironmentAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return to=function(){return e},e}var ro={},io=(0,w.Ps)(no()),oo=(0,w.Ps)(to(),io);var ao=t(50319);function lo(){var e=(0,b.Z)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return lo=function(){return e},e}function co(){var e=(0,b.Z)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return co=function(){return e},e}var uo={},so=(0,w.Ps)(lo()),fo=(0,w.Ps)(co());var po=t(6695);function ho(){var e=(0,b.Z)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    isSubscribed\n    isFirewallMode\n    isExplorer: hasRole(role: EXPLORER)\n    ...ReplEnvironmentAvatarMenuCurrentUser\n  }\n  ","\n"]);return ho=function(){return e},e}function vo(){var e=(0,b.Z)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    slug\n    url\n    isAlwaysOn\n    isOwner\n    isPrivate\n    workspaceCta\n    rootOriginReplUrl\n    lang {\n      id\n      engine\n    }\n    origin {\n      id\n    }\n    currentUserPermissions {\n      editMultiplayers\n      inviteGuests\n      containerWrite\n    }\n    owner {\n      ... on Team {\n        id\n        capabilities {\n          isEducationPlan\n        }\n      }\n      ... on User {\n        id\n      }\n    }\n    template {\n      id\n      isGroupProject\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n    multiplayers {\n      id\n    }\n  }\n  ","\n"]);return vo=function(){return e},e}function mo(){var e=(0,b.Z)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n        ...WorkspaceHeaderReplMetadataRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n"]);return mo=function(){return e},e}var go={},Zo=(0,w.Ps)(ho(),io),yo=(0,w.Ps)(vo(),so),bo=(0,w.Ps)(mo(),yo,po.s,Zo);var wo=t(26473),xo=t(70804),ko=t(60357),Co=t.n(ko),Ro=t(66060);function Io(e){var n=e.user,t=e.onClick;return(0,a.tZ)(Ro.u,{placement:"bottom",tooltip:"Observe ".concat(n.username),children:function(e,r){return(0,a.tZ)(wi.G,(0,nn.Z)((0,y.Z)({},e),{innerRef:r,onClick:t,children:(0,a.tZ)(E.qE,{size:24,src:n.image||null,username:n.username,ringColor:n.color,css:[Mr.l0.cursor.pointer,{transition:"all 0.2s ease","&:hover":{filter:"brightness(95%)",boxShadow:Mr.TV.shadow1}}]})}))}})}var To=t(94184),So=t.n(To);function Go(){var e=(0,b.Z)(["\n  fragment UserListModalUser on User {\n    id\n    username\n    image\n  }\n"]);return Go=function(){return e},e}function Eo(){var e=(0,b.Z)(["\n  fragment UserListModalReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...UserListModalUser\n    }\n  }\n  ","\n"]);return Eo=function(){return e},e}function Po(){var e=(0,b.Z)(["\n  query UserListModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UserListModalUser\n        }\n        permissions {\n          id\n          ...UserListModalReplPermission\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n  ","\n"]);return Po=function(){return e},e}var Do={},Uo=(0,w.Ps)(Go()),Bo=(0,w.Ps)(Eo(),Uo),_o=(0,w.Ps)(Po(),Uo,Bo);var Xo=t(58502);function Mo(){var e=(0,jn.Z)(),n=e.session,t=e.presence;return g.useCallback((function(e){var r=e.username,i=e.id,o=t.getFollowedUser();if((null===o||void 0===o?void 0:o.username)!==r){t.followUser(r);var a=t.getActiveFileForUser(i),l=n.getActiveFile();a&&a!==l&&n.openFile(a)}else t.unfollowUser()}),[n,t])}var Ao=t(34140);function Oo(e){var n=e.hideModal,t=e.isOpen,r=(0,Lt.Z)(),i=(0,jn.Z)().presence,o=(0,Xo.Z)({presence:i});return(0,a.tZ)(E.u_,{isOpen:t,onRequestClose:n,children:(0,a.tZ)(zo,{replId:r,activeUsers:o,hideModal:n})})}function Fo(e,n){return n.some((function(n){return n.id===e}))}function zo(e){var n=e.replId,t=e.activeUsers,r=e.hideModal,i=function(e){var n=(0,y.Z)({},Do,e);return x.a(_o,n)}({variables:{replId:n}}),o=i.data,l=i.loading,c=i.error;if(l)return(0,a.tZ)(E.G7,{css:[E.l0.flex.row,E.l0.justify.center,E.l0.p(32)],children:(0,a.tZ)(Qe.Z,{})});if(c)return(0,a.tZ)("div",{children:c.message});if("Repl"===(null===o||void 0===o?void 0:o.repl.__typename)){var u=o.repl,s=o.currentUser,d=u.user,f=d&&t.find((function(e){return e.username===d.username})),p=u.permissions.filter((function(e){var n=e.user;return n&&Fo(n.id,t)})),h=u.permissions.filter((function(e){var n=e.user;return n&&!Fo(n.id,t)}));return(0,a.BX)(E.G7,{css:[E.l0.colWithGap(24)],children:[(0,a.tZ)(E.h4,{level:1,variant:"headerDefault",children:"Multiplayers"}),(0,a.tZ)(E.xv,{multiline:!0,children:"Users can interact with this Repl in real time."}),(0,a.tZ)(E.G7,{css:[E.l0.maxHeight(330),{overflowY:"auto"}],children:(0,a.BX)(E.G7,{children:[d?(0,a.tZ)(No,(0,nn.Z)((0,y.Z)({},d),{isOnline:Boolean(f),color:f?f.color:"transparent",isOwner:!0,hideModal:r,canClickAvatar:Boolean(f)&&d.id!==(null===s||void 0===s?void 0:s.id),type:U.aQ.Rw})):null,p.map((function(e){var n=e.type,i=e.user;if(!i)throw new Error("Expected user");var o=t.find((function(e){return e.username===i.username}));if(!o)throw new Error("Expected user online");var l=i.id!==(null===s||void 0===s?void 0:s.id);return(0,a.tZ)(No,(0,nn.Z)((0,y.Z)({type:n},i),{isOnline:!0,canClickAvatar:l,color:o.color,hideModal:r,isOwner:!1}),"chat-user-list-".concat(i.username))})),h.map((function(e){var n=e.type,t=e.user;if(!t)throw new Error("Expected user");return(0,a.tZ)(No,(0,nn.Z)((0,y.Z)({type:n},t),{canClickAvatar:!1,isOnline:!1,color:"transparent",hideModal:r,isOwner:!1}),"chat-user-list-".concat(t.username))}))]})})]})}return"ReplRedirect"===(null===o||void 0===o?void 0:o.repl.__typename)?(0,a.BX)("div",{children:["This Repl has moved to"," ",(0,a.tZ)("a",{href:o.repl.replUrl,children:o.repl.replUrl})]}):"SubscriptionExpiredError"===(null===o||void 0===o?void 0:o.repl.__typename)?(0,a.BX)("div",{children:["Your subscription has expired.",(0,a.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null}var Lo={r:"read only",rw:"can edit"};function No(e){var n=e.type,t=e.id,r=e.username,i=e.image,o=e.isOnline,l=e.isOwner,c=e.color,u=e.hideModal,s=e.canClickAvatar,d=Mo(),f=function(){s&&(d({username:r,id:t}),u())};return(0,a.BX)("div",{className:Co().dynamic([["8abf4fce485dcead",[s?"pointer":"auto",c]]])+" "+(So()("user-list-item-wrapper",{online:o})||""),children:[(0,a.BX)("div",{role:"button",onClick:f,onKeyDown:f,tabIndex:0,className:Co().dynamic([["8abf4fce485dcead",[s?"pointer":"auto",c]]])+" image",children:[(0,a.tZ)("img",{src:i,alt:"",className:Co().dynamic([["8abf4fce485dcead",[s?"pointer":"auto",c]]])+" "+((o?"":"offline")||"")}),(0,a.BX)(Ao.T,{children:["Observe ",r]})]}),(0,a.BX)("div",{className:Co().dynamic([["8abf4fce485dcead",[s?"pointer":"auto",c]]])+" info",children:[(0,a.BX)("div",{className:Co().dynamic([["8abf4fce485dcead",[s?"pointer":"auto",c]]]),children:[(0,a.BX)("a",{href:"/@".concat(r),target:"_blank",className:Co().dynamic([["8abf4fce485dcead",[s?"pointer":"auto",c]]]),children:["@",r]}),!o&&" (offline)"]}),(0,a.tZ)("div",{className:Co().dynamic([["8abf4fce485dcead",[s?"pointer":"auto",c]]]),children:l?"owner":Lo[n]})]}),(0,a.tZ)(Co(),{id:"8abf4fce485dcead",dynamic:[s?"pointer":"auto",c],children:".user-list-item-wrapper.__jsx-style-dynamic-selector{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-ordinal-group:2;-webkit-order:1;-moz-box-ordinal-group:2;-ms-flex-order:1;order:1}.image.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;cursor:".concat(s?"pointer":"auto","}img.__jsx-style-dynamic-selector{width:40px;height:40px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:3px solid ").concat(c,";background:white;-o-object-fit:cover;object-fit:cover}.info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:var(--space-8)}img.offline.__jsx-style-dynamic-selector{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.user-list-item-wrapper.online.__jsx-style-dynamic-selector{-webkit-box-ordinal-group:1;-webkit-order:0;-moz-box-ordinal-group:1;-ms-flex-order:0;order:0}")})]})}var Wo=t(14314);function jo(e){var n=(0,i.Z)(g.useState(!1),2),t=n[0],r=n[1],o=(0,Wo.aG)(),l=o.length-2;return 0===o.length?null:(0,a.tZ)(E.G7,{css:[E.l0.flex.row,E.l0.align.center],children:(0,a.BX)(E.G7,{tag:"ul",className:"multiplayer-users-container",css:[E.l0.px(8),E.l0.rowWithGap(4),E.l0.align.center],"aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[l>0?(0,a.tZ)("li",{className:Co().dynamic([["4498c6c3d18d139f",[W.j.mobileMax+100]]]),children:(0,a.tZ)(E.zx,{onClick:function(){return r(!0)},text:"+ ".concat(l),css:{background:"none"}})}):null,o.slice(0,2).map((function(n){return(0,a.tZ)("li",{className:Co().dynamic([["4498c6c3d18d139f",[W.j.mobileMax+100]]]),children:(0,a.tZ)(Io,{user:n,onClick:function(){return e.onAvatarClick(n)}})},n.id)})),(0,a.tZ)(Oo,{isOpen:t,hideModal:function(){return r(!1)}}),(0,a.tZ)(Co(),{id:"4498c6c3d18d139f",dynamic:[W.j.mobileMax+100],children:".multiplayer-users-container.__jsx-style-dynamic-selector li.__jsx-style-dynamic-selector{list-style-type:none}@media only screen and (max-width:".concat(W.j.mobileMax+100,"px){.multiplayer-users-container.__jsx-style-dynamic-selector{display:none}}")})]})})}var Ho=t(34193),Vo=t(8121),Ko=t(62881),qo=t(19526),Yo=t(18757),$o=t(64184),Qo=t(82893),Jo=t(28898),ea=t(93058),na=t(30019),ta=t(44781),ra=t(27206),ia=t(69049),oa=t(6951);function aa(e){var n=e.value,t=e.onButtonPress,r=e.statusText,i=void 0===r?"":r,o=e.image,l=e.filterValue,c=e.type,u=e.Icon;return(0,a.BX)("div",{className:"jsx-a16e88ad40d0e05c "+(So()("multiplayer-item",{"is-editable":!!t})||""),children:[(0,a.BX)(qo.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(Jo.Z,{size:"s",url:null!==o&&void 0!==o?o:""}),(0,a.tZ)("div",{className:"jsx-a16e88ad40d0e05c label",children:l?(0,a.tZ)(ot.gr,{source:n,match:l}):"".concat(n," ").concat(i)}),!!t&&(0,a.tZ)(oa.Z,{className:"remove-button",border:!1,filled:!1,"aria-label":"Remove ".concat(c||"email invite"),role:"tooltip","data-microtip-position":"left",onClick:t,children:u?(0,a.tZ)(u,{size:12,className:"jsx-a16e88ad40d0e05c"}):null})]}),(0,a.tZ)(Co(),{id:"a16e88ad40d0e05c",children:".multiplayer-item.jsx-a16e88ad40d0e05c{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c:hover{background-color:var(--background-root)}.label.jsx-a16e88ad40d0e05c{margin-right:auto}"})]})}var la=t(4158);function ca(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,a.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa root",children:[(0,a.tZ)(na.Z,{level:3,align:"center",children:"Are you sure?"}),(0,a.BX)(ta.Z,{align:"center",children:[(0,a.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,a.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa email",children:n})]}),(0,a.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa controls",children:[(0,a.tZ)(oa.Z,{onClick:r,children:"Cancel"}),(0,a.tZ)(oa.Z,{filled:!0,color:"primary",onClick:t,children:"Invite"})]}),(0,a.tZ)(Co(),{id:"1a6ae4ac10e8f1fa",children:".root.jsx-1a6ae4ac10e8f1fa{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-1a6ae4ac10e8f1fa{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}.message.jsx-1a6ae4ac10e8f1fa{padding-bottom:var(--space-16)}"})]})}var ua=t(75474),sa=t(34847);function da(e){var n,t,r=e.replId,o=(0,Vo.JT)({variables:{replId:r}}),l=o.data,c=o.loading,u=(null===l||void 0===l||null===(n=l.currentUser)||void 0===n?void 0:n.id)||null,s=(0,ea.Z)(),d=s.showConfirm,f=s.showError,p=(0,i.Z)(g.useState(""),2),h=p[0],v=p[1],m=(0,i.Z)((0,Vo.fS)({onError:function(e){return f(e.message)},onCompleted:function(e){var n=e.addMultiplayerUser.user;(0,eo.j)(eo.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"username"});var t=n?"@".concat(n.username):"Member";d("".concat(t," added"))}}),2),Z=m[0],y=m[1],b=(0,i.Z)((0,Vo.HM)({onError:function(e){return f(e.message)},onCompleted:function(e){var n=e.removeMultiplayerUser.user,t=n?"@".concat(n.username):"Member";d("".concat(t," removed"))}}),2),w=b[0],x=b[1],k="Repl"===(null===l||void 0===l?void 0:l.repl.__typename)?l.repl:null,C=(0,i.Z)((0,Ko.Sv)({onError:function(e){f(e.message)},update:function(e,n){var t,i=null===(t=n.data)||void 0===t?void 0:t.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var o=i.email;return(0,eo.j)(eo.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"}),void d("Invited ".concat(o," via email"))}if("ReplPermission"===i.__typename){e.modify({id:e.identify({__typename:"Repl",id:r}),fields:{permissions:function(n){var t=e.writeFragment({data:i,fragment:Ko.L1});return(0,N.Z)(n).concat([t])}}});var a=i.user;(0,eo.j)(eo.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"});var l=a?"@".concat(a.username):"Member";d("".concat(l," added"))}}else f(i.message)}}),2),R=C[0],I=C[1],T=(0,i.Z)((0,Ko.Ej)({onError:function(e){return f(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;d("Invite for ".concat(n," deleted"))}}else f(e.deleteMultiplayerInvite.message)}}),2),S=T[0],G=T[1];if(k&&!k.owner)throw new Error("Cannot manage members on anon repls");if((null===k||void 0===k?void 0:k.owner)&&"Team"!==(null===k||void 0===k?void 0:k.owner.__typename))throw new Error("Expect repl owned by a team");var E,P,D,B="Team"===(null===k||void 0===k||null===(t=k.owner)||void 0===t?void 0:t.__typename)?k.owner:null,_=null!==(E=null===k||void 0===k?void 0:k.permissions.reduce((function(e,n){return n.user?(0,N.Z)(e).concat([n.user.username]):e}),[]))&&void 0!==E?E:[],X=null===k||void 0===k?void 0:k.permissions.reduce((function(e,n){if(!n.user)return e;var t=n.user;return!h||H.Z.filter(h,[t.username]).length>0?((null===B||void 0===B?void 0:B.members.some((function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)===t.id})))||e.users.push(t),e):e}),{users:[]}),M=null===k||void 0===k?void 0:k.multiplayerInvites.filter((function(e){return!h||H.Z.filter(h,[e.email]).length>0})),A=null===B||void 0===B?void 0:B.members.reduce((function(e,n){if(!n.user)return e;var t=n.user;if(!(!h||H.Z.filter(h,[t.username]).length>0))return e;var r=n.permissions&&n.permissions!==U.SV.Member,i=null===k||void 0===k?void 0:k.permissions.find((function(e){var n;return e.user&&(null===(n=e.user)||void 0===n?void 0:n.id)===t.id}));return r?e.teamAdmins.push(t):(null===i||void 0===i?void 0:i.type)?e.withPermission.push(t):e.withoutPermission.push(t),e}),{teamAdmins:[],withPermission:[],withoutPermission:[]}),O=null===A||void 0===A?void 0:A.teamAdmins.some((function(e){return e.id===u})),F=(null!==(P=null===X||void 0===X?void 0:X.users.length)&&void 0!==P?P:0)+(null!==(D=null===M||void 0===M?void 0:M.length)&&void 0!==D?D:0),z=null===k||void 0===k?void 0:k.currentUserPermissions.editMultiplayers,L=null===k||void 0===k?void 0:k.currentUserPermissions.inviteGuests,j=Boolean(A&&!A.teamAdmins.length&&!A.withPermission.length&&(!(null===X||void 0===X?void 0:X.users.length)&&!(null===M||void 0===M?void 0:M.length)&&L||!L&&!A.withoutPermission.length)),V=(0,i.Z)(g.useState(null),2),K=V[0],q=V[1];return(0,a.BX)("div",{className:Co().dynamic([["dc131772cdbb2add",[W.j.mobileMax]]])+" root",children:[(0,a.BX)(qo.gC,{spacing:2,align:"stretch",children:[(0,a.BX)(qo.Ug,{children:[(0,a.BX)(na.Z,{level:5,foreground:c?3:1,children:[z?"Add or remove members from this repl":null,c?"Loading...":null]}),z&&L&&!c?(0,a.tZ)("div",{"aria-label":" Add team members or invite external guests via email or username","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",className:Co().dynamic([["dc131772cdbb2add",[W.j.mobileMax]]])+" information-icon-container",children:(0,a.tZ)(la.Z,{})}):null]}),L?(0,a.tZ)(ia.Z,{existingUsernames:_,onSubmit:function(e){!!e.match(/.+@.+/)&&!I.loading?q(e):y.loading||Z({variables:{username:e,replId:r,type:"rw"}}),v("")},placeholder:z?"Search for users or invite guests":"Filter users",isDisabled:c,onChange:function(e){return v(e)}}):(0,a.tZ)(ra.ZP,{disabled:c,value:h,onChange:function(e){return v(e.currentTarget.value)},placeholder:z?"Filter team members to add or remove":"Filter team members"}),(0,a.tZ)(Ho.Z,{isOpen:!!K,onRequestClose:function(){return q(null)},children:K?(0,a.tZ)(ca,{email:K,onInvite:function(){R({variables:{email:K,replId:r,type:"rw"}}),q(null)},onCancel:function(){return q(null)}}):null}),(0,a.BX)("div",{className:Co().dynamic([["dc131772cdbb2add",[W.j.mobileMax]]])+" "+(So()("multiplayers-list",{"is-empty":j})||""),children:[(null===A||void 0===A?void 0:A.withPermission.length)?(0,a.tZ)("div",{className:Co().dynamic([["dc131772cdbb2add",[W.j.mobileMax]]])+" list-heading",children:(0,a.BX)(qo.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(Yo.Z,{size:12}),(0,a.BX)(ta.Z,{foreground:2,size:"small",children:[null===A||void 0===A?void 0:A.withPermission.length," member",1===(null===A||void 0===A?void 0:A.withPermission.length)?"":"s"," with access"]})]})}):null,null===A||void 0===A?void 0:A.withPermission.map((function(e){return(0,a.tZ)(aa,{value:e.username,image:e.image,statusText:"(can edit)",type:"member",onButtonPress:O?function(){x.loading||w({variables:{replId:r,username:e.username}})}:void 0,Icon:$e.Z},e.id)})),!!F&&(0,a.tZ)("div",{className:Co().dynamic([["dc131772cdbb2add",[W.j.mobileMax]]])+" list-heading",children:(0,a.BX)(qo.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(Yo.Z,{size:12}),(0,a.BX)(ta.Z,{foreground:2,size:"small",children:[(0,sa.Z)("guest",F,!0),"with access"]})]})}),null===X||void 0===X?void 0:X.users.map((function(e){return(0,a.tZ)(aa,{value:e.username,image:e.image,statusText:"(can edit)",type:"guest",onButtonPress:O?function(){x.loading||w({variables:{replId:r,username:e.username}})}:void 0,Icon:$e.Z},e.id)})),null===M||void 0===M?void 0:M.map((function(e){return(0,a.tZ)(aa,{value:e.email,statusText:"(pending)",onButtonPress:O?function(){G.loading||S({variables:{replId:r,email:e.email}})}:void 0,Icon:$e.Z},e.email)})),!L&&(null===A||void 0===A?void 0:A.withoutPermission.length)?(0,a.tZ)("div",{className:Co().dynamic([["dc131772cdbb2add",[W.j.mobileMax]]])+" list-heading",children:(0,a.BX)(qo.Ug,{align:"center",spacing:1,children:[(0,a.tZ)($o.Z,{size:12}),(0,a.BX)(ta.Z,{foreground:2,size:"small",children:[(0,sa.Z)("member",null===A||void 0===A?void 0:A.withoutPermission.length,!0),"without access"]})]})}):null,!L&&(null===A||void 0===A?void 0:A.withoutPermission.map((function(e){return(0,a.tZ)(aa,{value:e.username,image:e.image,type:"member",onButtonPress:z?function(){y.loading||Z({variables:{replId:r,username:e.username,type:"rw"}})}:void 0,Icon:ni.Z},e.id)}))),(null===A||void 0===A?void 0:A.teamAdmins.length)?(0,a.tZ)("div",{className:Co().dynamic([["dc131772cdbb2add",[W.j.mobileMax]]])+" list-heading",children:(0,a.BX)(qo.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(Qo.Z,{size:12}),(0,a.tZ)(ta.Z,{foreground:2,size:"small",children:"Team admins cannot be removed from repls"})]})}):null,null===A||void 0===A?void 0:A.teamAdmins.map((function(e){return(0,a.tZ)("div",{className:Co().dynamic([["dc131772cdbb2add",[W.j.mobileMax]]])+" "+(So()("multiplayer-item",{"is-editable":z})||""),children:(0,a.BX)(qo.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(Jo.Z,{size:"s",url:e.image}),(0,a.tZ)("div",{className:Co().dynamic([["dc131772cdbb2add",[W.j.mobileMax]]])+" label",children:h?(0,a.tZ)(ot.gr,{source:e.username,match:h}):e.username})]})},e.id)})),j?(0,a.BX)(ta.Z,{foreground:2,align:"center",children:['No members matching "',h,'" found']}):null]}),z||c?null:(0,a.tZ)(ta.Z,{foreground:2,size:"small",children:"Only admins can add and remove members to multiplayer"}),z&&L?(0,a.tZ)(ua.Z,{replId:r}):null]}),(0,a.tZ)(Co(),{id:"dc131772cdbb2add",dynamic:[W.j.mobileMax],children:".root.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--foreground-default)}.multiplayers-list.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:300px;overflow-y:auto}.multiplayers-list.is-empty.__jsx-style-dynamic-selector{display:grid;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);word-break:break-word}.multiplayer-item.__jsx-style-dynamic-selector{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector{padding-right:var(--space-8)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector:hover{background-color:var(--background-root)}.list-heading.__jsx-style-dynamic-selector{padding:var(--space-16)var(--space-16)0}.label.__jsx-style-dynamic-selector{margin-right:auto}.information-icon-container.__jsx-style-dynamic-selector{margin-left:5px}@media screen and (min-width:".concat(W.j.mobileMax,"px){.root.__jsx-style-dynamic-selector{padding:var(--space-48)}}")})]})}var fa=t(15153);function pa(e){var n=e.children,t=e.showPopover,r=(0,h.Z)("announcement","add-guest-new-user"),o=r.shouldDisplay,l=r.register,c=r.dismiss,u=(0,i.Z)(g.useState(!1),2),s=u[0],d=u[1],f=(0,i.Z)(g.useState(!1),2),p=f[0],v=f[1];g.useEffect((function(){t&&!p&&l()}),[p,l,t]);var m=o&&!p;return(0,a.BX)(xo.Z,{onClickOutside:function(){return v(!0)},isOpen:m,showArrow:!0,borderColor:"var(--accent-purple-default)",children:[n,(0,a.BX)(qo.gC,{spacing:2,align:"stretch",children:[(0,a.BX)(qo.Ug,{spacing:1,children:[(0,a.tZ)(fa.Z,{}),(0,a.tZ)(na.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,a.BX)(ta.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,a.tZ)(qo.Ug,{spacing:1,justify:"end",children:(0,a.tZ)(oa.Z,{loading:s,onClick:function(){d(!0),c()},children:"Got it"})})]})]})}var ha=t(17467);function va(e){var n=e.replId;return(0,a.tZ)(E.G7,{css:[E.l0.p(16)],children:(0,a.BX)(E.G7,{css:[E.l0.flex.column,E.l0.colWithGap(8),E.l0.align.stretch],children:[(0,a.tZ)(E.xv,{variant:"subheadDefault",children:"Invite"}),(0,a.tZ)(ha.Z,{replId:n}),(0,a.tZ)(ua.Z,{replId:n})]})})}var ma=t(88055),ga=t(8357),Za=((0,dn.cn)(null,(function(e,n,t){var r=e(mt.Eh).find((function(e){return e.isDialog}));r?n(ma.$r,r.paneId):n(ya,t)})),(0,dn.cn)(null,(function(e,n,t){var r=e(mt.Eh).find((function(e){return e.isDialog}));if(r){var i=e(r.data);i.type!==i.type?(n(ma.$r,r.paneId),n(ya,t)):n(ga.v,{paneId:r.paneId,data:t.pane})}else n(ya,t)})));var ya=(0,dn.cn)(null,(function(e,n,t){if(!e(mt.Eh).find((function(e){return e.isDialog}))){var r=e(vt.g4),i=e(mt.CK),o=Ht()(),a=i.x+i.width,l=i.y+i.height,c=t.maxWidth||a,u=t.maxHeight||l,s=Math.min(c,.8*a),d=Math.min(u,.8*l),f={width:s,height:d,x:a/2-s/2-i.x,y:l/2-d/2-i.y},p=(0,te.ZP)(r,(function(e){try{(0,Vt.m)(e,{id:Ht()(),isFloating:!0,panes:[o],rect:f})}catch(t){throw n(Ct.j6,{error:t,tags:{layoutstate:!0},origin:"Layout: state/dialog"}),t}}));n(Rt.iH,p),n(bt.W1,o);var h=(0,mt.z)(o),v=e(h);n(bt.W1,o),n(h,(0,nn.Z)((0,y.Z)({},v),{isDialog:!0})),n(v.data,t.pane)}})),ba=(0,dn.cn)(null,(function(e,n){var t=e(mt.Eh).find((function(e){return e.isDialog}));t&&n(ma.$r,t.paneId)}));var wa=t(35642),xa=t(61756),ka=t(26082),Ca=t(17495),Ra=t(42325),Ia=t(88075);function Ta(e){var n,t=e.replId,r=e.onDone,o=e.isResubmit,l=e.lastUpdated,c=e.openIOtesterPane,u=(0,jn.Z)().iotester,s=(0,Ra.CH)({variables:{replId:t}}),d=u.lastRunAt.getTime()>l,f=(0,Ca.xh)({variables:{replId:t}}).data,p="Repl"===(null===f||void 0===f?void 0:f.repl.__typename)?f.repl:null,h=(null===p||void 0===p?void 0:p.template)||null,v=(null===h||void 0===h?void 0:h.dueDate)||null,m=(new Date).toISOString(),g=(0,ea.Z)(),Z=g.showConfirm,y=g.showError,b=(0,i.Z)((0,Ca.xA)({variables:{replId:t},onCompleted:function(e){var n=e.submitRepl;"UserError"!==n.__typename?"Repl"===n.__typename&&(Z("Repl submitted"),r()):y(n.message)},onError:function(e){y(e.message)}}),2),w=b[0],x=b[1],k=d&&u.lastRunDidPass;return"Repl"===(null===(n=s.data)||void 0===n?void 0:n.repl.__typename)&&s.data.repl.ioTests.length>0&&!k?(0,a.BX)(wi.G,{css:[Mr.l0.colWithGap(24)],children:[(0,a.tZ)(yr.h,{variant:"headerDefault",level:2,children:d?"Fix test failures before submitting":"Run tests before submitting"}),(0,a.tZ)(yr.x,{multiline:!0,children:d?"Input/Output tests did not pass.":"Input/Output tests have not been run since this Repl was last changed."}),(0,a.BX)(wi.G,{css:[Mr.l0.rowWithGap(12),Mr.l0.justify.end],children:[(0,a.tZ)(xa.zx,{disabled:x.loading,colorway:"primary",onClick:function(){c(),r()},text:"View tests"}),(0,a.tZ)(xa.zx,{disabled:x.loading,onClick:function(){return w()},iconLeft:(0,a.tZ)(Ia.Z,{}),text:"Submit anyway"})]})]}):(0,a.BX)(wi.G,{css:[Mr.l0.colWithGap(24)],children:[(0,a.tZ)(yr.h,{variant:"headerDefault",level:2,children:o?" Resubmit Repl":"Submit Repl"}),(0,a.tZ)(yr.x,{multiline:!0,children:o?"This will re-notify Team admins about your submission.":"This will submit your Repl for review and notify the Team's admins."}),v&&v<m?(0,a.tZ)(yr.x,{multiline:!0,css:[Mr.l0.color.accentNegativeStronger],children:"Note: Your submission is past the due date and will be marked late."}):null,(0,a.BX)(wi.G,{css:[Mr.l0.rowWithGap(12),Mr.l0.justify.end],children:[(0,a.tZ)(xa.zx,{disabled:x.loading,onClick:r,text:"Cancel"}),(0,a.tZ)(xa.zx,{colorway:"primary",disabled:x.loading,onClick:function(){return w()},iconLeft:(0,a.tZ)(Ia.Z,{}),text:o?"Submit again":"Submit"})]})]})}var Sa=t(40381),Ga=t(19923);function Ea(){var e=(0,b.Z)(["\n  query UpdateModelSolutionModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        origin {\n          id\n          ...TeamProfileRepl\n          template {\n            id\n            dueDate\n          }\n          unitTests {\n            tests {\n              id\n            }\n          }\n          ioTests {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Ea=function(){return e},e}function Pa(){var e=(0,b.Z)(["\n  mutation UpdateModelSolution($input: UpdateReplTemplateModelSolutionInput!) {\n    updateReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Pa=function(){return e},e}var Da={},Ua=(0,w.Ps)(Ea(),Ga.vs);var Ba=(0,w.Ps)(Pa(),Ga.vs);var _a,Xa=t(28479),Ma=function(e){var n,t,r,o,l,c,u,s,d,f=e.replId,p=e.onDone,h=(0,ea.Z)(),v=h.showConfirm,m=h.showError,Z=function(e){var n=(0,y.Z)({},Da,e);return x.a(Ua,n)}({variables:{replId:f},onCompleted:function(e){var n,t,r=e.repl;"Repl"===r.__typename&&(null===(n=r.origin)||void 0===n||null===(t=n.template)||void 0===t?void 0:t.modelSolution)&&"ReplTemplateModelSolution"===r.origin.template.modelSolution.__typename&&(S(r.origin.template.modelSolution.visibleAfterSubmitting),D(r.origin.template.modelSolution.visibleAfterPassingTests),_(r.origin.template.modelSolution.visibleAfterDueDate))}}),b=Z.data,w=Z.loading,k=(0,i.Z)(function(e){var n=(0,y.Z)({},Da,e);return ao.D(Ba,n)}({onError:function(e){return m(e)},onCompleted:function(){v("Updated solution"),p()}}),2),C=k[0],R=k[1],I=(0,i.Z)(g.useState(!1),2),T=I[0],S=I[1],G=(0,i.Z)(g.useState(!1),2),P=G[0],D=G[1],U=(0,i.Z)(g.useState(!1),2),B=U[0],_=U[1],X=(0,i.Z)(g.useState(),2),M=X[0],A=X[1],O=(0,ie.H)();if(g.useEffect((function(){var e="Students can ";if(T||B||P){e+="view the solution after";var n=[];T&&n.push("submitting their project"),P&&n.push("passing all tests"),B&&n.push("the due date has passed");for(var t=0;t<n.length;t++)t>0&&(e+=",",t===n.length-1&&(e+=" and")),e+=" "+n[t];e+="."}else e+="never view the solution.";A(e)}),[T,P,B]),w)return(0,a.tZ)(E.G7,{css:[E.l0.center],children:(0,a.tZ)(Qe.Z,{})});var F="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&"Team"===(null===(n=b.repl.owner)||void 0===n?void 0:n.__typename)&&(null===(t=b.repl.owner)||void 0===t?void 0:t.id),z="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&(null===(r=b.repl.origin)||void 0===r||null===(o=r.template)||void 0===o?void 0:o.modelSolution);if(!z)return null;var L=z.id,N="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&((null===(l=b.repl.origin)||void 0===l?void 0:l.ioTests.length)||(null===(c=b.repl.origin)||void 0===c||null===(u=c.unitTests)||void 0===u?void 0:u.tests.length)),W="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&(null===(s=b.repl.origin)||void 0===s||null===(d=s.template)||void 0===d?void 0:d.dueDate);return(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),F&&L&&C({variables:{input:{teamId:F,solutionId:L,visibleAfterSubmitting:T,visibleAfterPassingTests:P,visibleAfterDueDate:B}}})},children:(0,a.BX)(E.G7,{css:[E.l0.colWithGap(24)],children:[(0,a.tZ)(E.h4,{level:1,variant:"headerDefault",children:"Update solution"}),(0,a.BX)(E.G7,{css:[E.l0.colWithGap(16)],children:[(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(8)],children:[(0,a.tZ)(E.XZ,{id:O("availableAfterSubmitting"),checked:T,onChange:function(){return S(!T)}}),(0,a.tZ)("label",{htmlFor:O("availableAfterSubmitting"),children:(0,a.tZ)(E.xv,{children:"Available after submitting"})})]}),(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(8)],children:[(0,a.tZ)(E.XZ,{id:O("availableAfterPassingTests"),checked:P,onChange:function(){return D(!P)}}),(0,a.tZ)("label",{htmlFor:O("availableAfterPassingTests"),children:(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(4)],children:[(0,a.tZ)(E.xv,{children:"Available after passing tests"}),(0,a.BX)(E.xv,{children:["(",N?"".concat(N," ").concat((0,sa.Z)("test",N)," defined"):"no tests exist yet",")"]})]})})]}),(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(8),{verticalAlign:"baseline"}],children:[(0,a.tZ)(E.XZ,{id:O("availableAfterDueDate"),checked:B,onChange:function(){return _(!B)}}),(0,a.tZ)("label",{htmlFor:O("availableAfterDueDate"),children:(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(4)],children:[(0,a.tZ)(E.xv,{children:"Available after due date"}),(0,a.BX)(E.xv,{css:{textDecoration:"italic"},children:["(",W?(0,Xa.p)(W):"no due date set yet",")"]})]})})]})]}),(0,a.tZ)(E.E_,{text:"".concat(M),colorway:T||P||B?"positive":"negative"}),(0,a.tZ)(E.G7,{css:{alignItems:"end"},children:(0,a.tZ)(E.zx,{type:"submit",stretch:!1,colorway:"primary",text:"".concat(R.loading?"Saving...":"Save"),iconLeft:(0,a.tZ)(Ia.Z,{}),disabled:R.loading})})]})})},Aa=(_a={},(0,bi.Z)(_a,U.Sy.PublishTemplate,"Publish project"),(0,bi.Z)(_a,U.Sy.EditTemplate,"Edit project"),(0,bi.Z)(_a,U.Sy.Submit,"Submit"),(0,bi.Z)(_a,U.Sy.Resubmit,"Resubmit"),(0,bi.Z)(_a,U.Sy.UpdateModelSolution,"Update solution"),_a);function Oa(e){var n=e.cta,t=e.replId,r=e.isGroupProject,o=e.openIOtesterPane,l=(0,i.Z)(g.useState(null),2),c=l[0],u=l[1],s=function(){return u(null)},d=(0,Sa.Z)(),f=(0,jn.Z)().fs,p=(0,i.Z)(g.useState(0),2),h=p[0],v=p[1];g.useEffect((function(){if(d&&!(0,Qn.T3)(d)&&!(0,Qn.sL)(d)){var e=f.watchTextFile(d,{onChange:function(e){e.changeSource===Hr.Fl.Local&&v(Date.now())}});return e}}),[d,f,v]);var m=Boolean(c&&[U.Sy.PublishTemplate,U.Sy.EditTemplate].includes(c));return g.useEffect((function(){n===U.Sy.ReviewSubmission&&(wa.Z.get("annotations/educationModalDismissed")||(u(n),wa.Z.set("annotations/educationModalDismissed",!0)))}),[n]),(0,a.BX)(a.HY,{children:[Aa[n]&&(0,a.tZ)(xa.zx,{onClick:function(){return u(n)},text:Aa[n],iconLeft:(0,a.tZ)(Ia.Z,{})}),(0,a.tZ)(mi.u,{isOpen:c===U.Sy.Submit||c===U.Sy.Resubmit,onRequestClose:s,maxWidth:512,children:(0,a.tZ)(Ta,{replId:t,onDone:s,isResubmit:c===U.Sy.Resubmit,lastUpdated:h,openIOtesterPane:o})}),(0,a.tZ)(Ho.Z,{preventClose:!0,isOpen:m,onRequestClose:s,width:r?"large":"medium",children:(0,a.tZ)(ka.Z,{replId:t,onDone:s})}),(0,a.tZ)(mi.u,{isOpen:c===U.Sy.UpdateModelSolution,onRequestClose:s,maxWidth:600,children:(0,a.tZ)(Ma,{replId:t,onDone:s})})]})}var Fa=t(95596),za=t(95901),La=t(36228),Na=t(6625),Wa=t(46887),ja=t(58523),Ha=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""},Va=function(e){var n=e.hideModal,t=(0,jn.Z)(),l=t.dotReplit,c=t.session,u=(0,Na.Z)(),s=(0,ea.Z)().showError,d=(0,i.Z)(g.useState(!1),2),f=d[0],p=d[1],h=(0,i.Z)(g.useState(""),2),v=h[0],m=h[1],Z=g.useCallback((function(){n(),c.openFile(Wa.Z)}),[c,n]),y=g.useCallback((function(){return s("Failed to update run command, please try again or contact support")}),[s]),b=(0,i.Z)(g.useState(null),2),w=b[0],x=b[1];g.useEffect((function(){var e=function(){var e=(0,r.Z)((function(){var e,n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,l.getConfig()];case 1:return n=r.sent(),u.current?(n.errorMessage?x({error:n.error,errorMessage:n.errorMessage}):x(null),t=null===n||void 0===n||null===(e=n.config)||void 0===e?void 0:e.run,m(Ha(t)),[2]):[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[l,u]);var k=g.useCallback((0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),e=v?(0,ja.KQ)(v):(0,ja.xz)("run"),p(!0),[4,l.updateDotReplit([e])];case 1:return t.sent(),n(),[3,4];case 2:return t.sent(),y(),[3,4];case 3:return p(!1),[7];case 4:return[2]}}))})),[v,y,l,n]);return(0,a.BX)(E.G7,{css:[Mr.l0.colWithGap(8),Mr.l0.p(2),f&&Mr.l0.cursor.progress],children:[(0,a.tZ)(E.h4,{level:1,variant:"text",css:[Mr.l0.fontWeight.normal,Mr.l0.color.foregroundDimmer],children:"Run Command"}),w?(0,a.tZ)(E.xv,{children:w.errorMessage}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(E.II,{value:v,onChange:function(e){return m(e.target.value)},spellCheck:!1}),(0,a.BX)(E.G7,{css:[Mr.l0.rowWithGap(12),Mr.l0.mt(12)],children:[(0,a.tZ)(xa.zx,{onClick:Z,text:"Advanced"}),(0,a.tZ)(E.G7,{css:Mr.l0.flex.grow(1)}),(0,a.tZ)(xa.zx,{colorway:"blue",text:"Save",onClick:k})]})]})]})},Ka=t(98146),qa=t(42699),Ya=t(71255),$a=t(85565),Qa=t(80437),Ja=t(97808),el=t(41034),nl=t(79500),tl=t(30880),rl=t(57981),il="https://linkedin.com/sharing/share-offsite";var ol="https://www.facebook.com/dialog/share?display=page&app_id=1775481339348651";var al=function(e){var n=e.lessonSlug,t=e.courseSlug,r=(0,ea.Z)().showConfirm;if(!n||!t)return null;var i=(0,Ja.QW)(t),o=(0,Ja.qv)(t,n);if(!o)return null;var l=o.ordinalLabel,c=(0,Ja.tD)(i.socialSharingText,o),u="".concat(c," ").concat(i.sharableLink),s=(0,Ya.Z)({text:c,url:i.sharableLink}),d=function(e){var n=e.url;return"".concat(il,"?url=").concat(encodeURIComponent(n))}({url:i.sharableLink}),f=function(e){var n=e.url,t=e.hashtag,r=e.redirectBackTo,i=new URLSearchParams;i.append("href",n),r&&i.append("redirect_uri",r),t&&(t.startsWith("#")||(t="#".concat(t)),i.append("hashtag",t));var o=i.toString();return"".concat(ol,"&").concat(o)}({url:i.sharableLink,hashtag:i.socialHashtag}),p=[{url:s,icon:$a.Z,base:Ya.c,cta:"Share on Twitter",color:Qa.Z.brands.twitter},{url:d,icon:rl.Z,base:il,cta:"",color:Qa.Z.brands.linkedin},{url:f,icon:tl.Z,base:ol,cta:"",color:Qa.Z.brands.facebook}];return(0,a.BX)(wi.G,{children:[(0,a.BX)(wi.G,{css:[Mr.l0.rowWithGap(16),Mr.l0.align.center,Mr.l0.pr(24)],children:[(0,a.tZ)(wi.G,{css:{fontSize:48},children:"\ud83e\udd73"}),(0,a.BX)(yr.x,{variant:"headerDefault",children:["Congrats on completing ",l,"!"]})]}),(0,a.tZ)(yr.x,{variant:"subheadDefault",css:[Mr.l0.py(12)],children:"Share your progress"}),(0,a.BX)(wi.G,{css:[Mr.l0.position.relative,Mr.l0.borderRadius(8),Mr.l0.backgroundColor.backgroundHigher,Mr.l0.py(8),Mr.l0.px(12)],children:[(0,a.tZ)(wi.G,{css:Mr.l0.pr(16),children:u}),(0,a.tZ)(E.hU,{css:[Mr.l0.position.absolute,Mr.l0.top(8),Mr.l0.right(8)],alt:"Copy",size:18,tooltipHidden:!0,onClick:function(){r("Copied to clipboard!"),(0,nl.Z)(u),(0,qa.l)({action:"copied_share_text",lessonSlug:n,courseSlug:t,origin:"lesson_complete_modal"})},children:(0,a.tZ)(el.Z,{size:16})})]}),(0,a.BX)(wi.G,{css:[Mr.l0.rowWithGap(16),Mr.l0.justify.center,Mr.l0.pt(16),Mr.l0.align.center],children:[(0,a.tZ)(E.ZP,{outlined:!0,text:"Back to the learning hub",href:"/learn/".concat(t,"/hub")}),(0,a.tZ)(wi.G,{css:[Mr.l0.rowWithGap(8),Mr.l0.align.center],children:p.map((function(e){var r=e.url,i=e.icon,o=e.base,l=e.cta,c=e.color;return(0,a.tZ)(xa.zx,{css:[{backgroundColor:c,color:"white"}],onClick:function(){window.open(r,"_blank"),(0,eo.j)(eo.U3.EXTERNAL_LINK_VIEWED,{url:o,placement:"lesson-complete-modal",campaign:t,lessonSlug:n})},text:l,iconLeft:(0,a.tZ)(i,{})},r)}))})]})]})},ll=function(e){var n=e.lesson,t=(0,ea.Z)().showError,r=(0,Ka.$0)().fireCircularBurstFrom,o=(0,g.useRef)(null),l=(0,Ri.T)(),c=(0,g.useState)(!1),u=c[0],s=c[1],d=(0,i.Z)(function(e){var n=(0,y.Z)({},uo,e);return ao.D(fo,n)}({onError:function(){return t("Something went wrong")},onCompleted:function(e){var i,a;"UpdatedUserCourseLesson"!==(null===(i=e.completeUserCourseLesson)||void 0===i?void 0:i.__typename)?t((null===(a=e.completeUserCourseLesson)||void 0===a?void 0:a.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===n.id?(o.current&&!l&&r({element:o.current}),s(!0)):t("Something went wrong")}}),2),f=d[0],p=d[1].loading;return(0,a.BX)(a.HY,{children:[null!==n.timeCompleted?(0,a.tZ)(E.zx,{ref:o,disabled:!0,text:"Lesson completed \ud83c\udf89",colorway:"primary"}):(0,a.tZ)(E.zx,{iconLeft:p?(0,a.tZ)(Qe.Z,{}):void 0,onClick:function(){(0,qa.l)({action:"completed",lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug}),f({variables:{input:{userLessonId:n.id}}})},text:p?"Verifying\u2026":"Mark lesson as complete",colorway:"primary",css:[p&&E.pt.backgroundPulse()]}),(0,a.tZ)(E.u_,{isOpen:u,onRequestClose:function(){return s(!1)},children:(0,a.tZ)(al,{lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug})})]})},cl=t(92162),ul=t(87514);function sl(e){var n=e.lesson,t=(0,cl.Un)(),r=(0,cl.$x)();return t?(0,a.tZ)(ll,{lesson:n}):(0,a.tZ)(E.zx,{colorway:"primary",iconLeft:(0,a.tZ)(ul.Z,{}),text:"Show tutorial",onClick:function(){return r()}})}var dl=t(12932),fl=t(36316);function pl(e){var n=e.repl,t=(0,i.Z)(g.useState(!1),2),r=t[0],o=t[1];return(0,a.BX)(xo.Z,{isOpen:r,maxWidth:460,onClickOutside:function(){},padding:0,gap:8,placement:"bottom-start",growToMaxWidth:!0,zIndex:f.Is-1,elevated:!1,children:[(0,a.BX)(E.G7,{tag:"button",dataCy:"ws-repl-info-container",onClick:function(){o(!0)},css:[E.l0.flex.growAndShrink(1),E.l0.align.center,E.l0.cursor.pointer,E.l0.rowWithGap(8),E.l0.p(4),E.l0.borderRadius(8),E.l0.color.foregroundDefault,r&&{pointerEvents:"none"},{border:"1px solid transparent",backgroundColor:"transparent","&:hover":{borderColor:E.TV.outlineDimmest}}],children:[(0,a.tZ)(fl.Z,{repl:n}),(0,a.tZ)(Ci.Z,{color:E.TV.foregroundDimmest,size:12})]}),(0,a.tZ)(E.Tg,{background:"default",css:[E.l0.borderRadius(8)],children:(0,a.tZ)(dl.Z,{setIsEditing:o})})]})}var hl=t(3462),vl=t(85485),ml=t(14868),gl=t(3411),Zl=t(50700),yl=t(57996),bl=t(78175),wl=t(48086),xl=t(34385),kl=t(97838),Cl=t(41664),Rl=t.n(Cl),Il=t(58889);function Tl(){var e=(0,b.Z)(["\n  fragment ReplEnvironmentNavMenuCurrentUser on CurrentUser {\n    id\n    ...LayoutSidebarCurrentUser\n  }\n  ","\n"]);return Tl=function(){return e},e}function Sl(){var e=(0,b.Z)(["\n  query ReplEnvironmentNavMenu {\n    currentUser {\n      id\n      ...ReplEnvironmentNavMenuCurrentUser\n    }\n  }\n  ","\n"]);return Sl=function(){return e},e}var Gl={},El=(0,w.Ps)(Tl(),Il.d),Pl=(0,w.Ps)(Sl(),El);var Dl={button:(0,l.iv)([E.l0.py(4),E.l0.viewStyle,E.l0.reset.button,E.l0.rowWithGap(2),E.l0.align.center,E.l0.color.foregroundDefault,E.l0.cursor.pointer,{":hover svg":{fill:E.TV.foregroundDefault}}]),surface:(0,l.iv)([E.l0.borderRadius(8),E.l0.width(200),E.l0.maxHeight("80vh"),E.l0.maxWidth("80vw"),E.l0.overflowY("auto")]),ctas:(0,l.iv)([E.l0.colWithGap(8),E.l0.p(8),{borderBottom:"1px solid",borderColor:E.TV.outlineDimmer}]),link:(0,l.iv)([E.l0.viewStyle,E.l0.rowWithGap(4),E.l0.color.foregroundDefault,E.l0.p(8),E.l0.align.center,E.gU.listItem,{":active":{backgroundColor:"".concat(E.TV.backgroundHighest," !important")}}]),linkText:(0,l.iv)(E.l0.flex.shrink(1))},Ul=(0,l.iv)([E.gU.nofill,{borderRadius:"0 0 10.5px 10.5px",borderTop:"1px solid ".concat(E.TV.outlineDimmer)}]);function Bl(){var e=(0,xl.Z)(La.y.GlobalNavButton),n=function(e){var n=(0,y.Z)({},Gl,e);return x.a(Pl,n)}().data,t=(0,gl.N)({currentUser:(null===n||void 0===n?void 0:n.currentUser)||void 0}),r=(0,g.useState)(!1),i=r[0],o=r[1],l=(0,g.useState)(null),c=l[0],u=l[1],s=(0,ri.D)({controlName:"flag-bundle-world"});return(0,a.BX)(a.HY,{children:[(0,a.BX)(xo.Z,{isOpen:i,onClickOutside:function(){return o(!1)},gap:4,padding:0,placement:"bottom-start",children:[(0,a.BX)("button",{ref:e,onClick:function(){return o(!i)},css:Dl.button,"data-cy":"global-nav-dropdown-btn",children:[(0,a.tZ)(yl.N2,{color:E.TV.foregroundDefault,size:20}),(0,a.tZ)(Ci.Z,{color:E.TV.foregroundDimmest,size:12})]}),(0,a.BX)(E.Tg,{elevated:!0,css:Dl.surface,children:[(0,a.BX)(E.G7,{css:Dl.ctas,children:[(0,a.tZ)(E.zx,{"data-cy":"global-nav-dropdown-new-repl-btn",text:"Create",iconLeft:(0,a.tZ)(ni.Z,{}),colorway:"primary",onClick:function(){o(!1),u("create")}}),(0,a.tZ)(E.zx,{text:s?"Upgrade":"Power Up",iconLeft:(0,a.tZ)(kl.Z,{}),outlined:!0,onClick:function(){o(!1),u("upgrade")}})]}),(0,a.tZ)(E.G7,{children:t.map((function(e){return(0,a.tZ)(Rl(),{passHref:!0,as:e.as,href:e.href,prefetch:!1,children:(0,a.BX)("a",{css:Dl.link,children:[e.icon,(0,a.tZ)(E.xv,{css:Dl.linkText,children:e.label}),e.tag||null]})},e.label)}))}),(0,a.tZ)(bl.Z,{css:Ul,context:wl.HY.Workspace})]})]}),(0,a.tZ)(Zl.Z,{initialTab:"default",isOpen:"upgrade"===c,onRequestClose:function(){return u(null)},context:"workspace_menu_nav"}),(0,a.tZ)(E.u_,{isOpen:"create"===c,onRequestClose:function(){return u(null)},children:(0,a.tZ)(vi.Z,{})})]})}var _l=t(92069);function Xl(){var e=(0,ml.Iv)(),n=(0,ml.W8)(),t=(0,xl.Z)(La.y.SidebarButton),r=(n?"Close":"Open")+" sidebar",o=(0,i.Z)(g.useState(!1),2),l=o[0],c=o[1];return(0,a.tZ)(E.u,{tooltip:r,placement:"right",children:(0,a.tZ)(E.G7,{tag:"button",alt:r,innerRef:t,css:[E.l0.reset.button,E.l0.height(16),E.l0.width(16),E.l0.center,E.l0.cursor.pointer,{opacity:.75,transition:"opacity 0.1s","&:hover":{opacity:1}}],onClick:function(){e(),c(!1)},onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:(0,a.BX)(E.G7,{css:[E.l0.flex.row,E.l0.align.center,{height:14,width:16,border:"1px solid ".concat(E.TV.foregroundDefault),borderRadius:E.TV.borderRadius2}],children:[(0,a.tZ)(E.G7,{css:{height:"100%",width:n&&!l||!n&&l?"40%":"20%",backgroundColor:n?E.TV.foregroundDefault:"transparent",borderRight:"1px solid ".concat(E.TV.foregroundDefault),transition:"0.1s ease-out width, 0.1s background-color"}}),(0,a.tZ)(E.G7,{})]})})})}function Ml(){return(0,a.tZ)(l.xB,{styles:[{".toggle":{display:"none"}}]})}function Al(e){var n=e.repl,t=e.currentUser;return(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(8),E.l0.align.center,E.l0.justify.start,E.l0.width("calc(50% - ".concat((di.al.small+8)/2,"px)")),(0,bi.Z)({},(0,vl.et)("tabletMax"),[E.l0.width("calc(50% - ".concat((di.al.large+8)/2,"px)"))])],children:[(0,a.tZ)(Xl,{}),(0,a.tZ)(Ml,{}),(0,a.tZ)(Bl,{}),(0,a.tZ)(E.G7,{css:[E.l0.flex.shrink(1),E.l0.maxWidth(530),E.l0.align.center,{"& > span":[E.l0.viewStyle,E.l0.flex.shrink(1)]}],children:(0,a.tZ)(pl,{repl:n})}),(0,a.tZ)(_l.m,{}),(null===t||void 0===t?void 0:t.isFirewallMode)?(0,a.tZ)(hl.Z,{isWorkspace:!0}):null]})}var Ol=t(82447),Fl=function(e){return function(){(0,eo.j)(eo.U3.SIDEBAR_LAYOUT_NAV_CLICK,{target:e})}},zl={button:(0,l.iv)([E.l0.py(4),E.l0.viewStyle,E.l0.reset.button,E.l0.rowWithGap(2),E.l0.align.center,E.l0.color.foregroundDefault,E.l0.cursor.pointer,{":hover svg":{fill:E.TV.foregroundDefault}}]),surface:(0,l.iv)([E.l0.borderRadius(8),E.l0.minWidth(80),{"& > a:first-of-type":E.l0.borderRadius(8,8,0,0)},{"& > a:last-of-type":E.l0.borderRadius(0,0,8,8)}]),link:(0,l.iv)([E.l0.viewStyle,E.l0.color.foregroundDefault,E.l0.p(8),E.gU.listItem])};function Ll(){var e=(0,xl.Z)(La.y.AvatarButton),n=function(e){var n=(0,y.Z)({},ro,e);return x.a(oo,n)}().data,t=(0,g.useState)(!1),r=t[0],i=t[1],o=null===n||void 0===n?void 0:n.currentUser,l=o?(0,Ol.Ru)(o):null,c=l?[{label:"Profile",trackingLabel:"Profile",as:l.as,href:l.href},{label:"Account",trackingLabel:"Account",dataCy:"avatar-dropdown-account-link",as:"/account",href:"/account"},{trackingLabel:"CLUI",label:"CLUI",as:"/~/cli",href:"/~/cli"},{trackingLabel:"Log out",label:"Log out",href:"/logout"}]:[];return(0,a.BX)(xo.Z,{isOpen:r,onClickOutside:function(){return i(!1)},gap:4,padding:0,placement:"bottom-start",children:[(0,a.BX)("button",{ref:e,onClick:function(){i(!r)},css:zl.button,children:[(0,a.tZ)(E.qE,{size:24,src:(null===o||void 0===o?void 0:o.image)||null,username:(null===o||void 0===o?void 0:o.username)||""}),(0,a.tZ)(Ci.Z,{color:E.TV.foregroundDimmest,size:12})]}),(0,a.tZ)(E.Tg,{elevated:!0,css:zl.surface,children:c.map((function(e){return(0,a.tZ)(Rl(),{passHref:!0,as:e.as,href:e.href,prefetch:!1,children:(0,a.tZ)("a",{onClick:function(){Fl(e.trackingLabel)},onKeyDown:function(){Fl(e.trackingLabel)},css:zl.link,children:e.label})},e.label)}))})]})}var Nl=t(97776),Wl=t(98099),jl=function(e){var n=(0,Wl.Z)(e,{onReceiveAnnotationUpdate:function(){}}).generalThread;return(0,g.useMemo)((function(){return n?n.messages.filter((function(e){return!1===e.seen})).length:0}),[n])},Hl=t(75026);function Vl(e){var n=(0,Wl.Z)(e,{onReceiveAnnotationUpdate:function(){}}).annotations;return(0,g.useMemo)((function(){return n.reduce((function(e,n){return n.isGeneral?e:e+n.messages.filter((function(e){return!1===e.seen})).length}),0)}),[n])}var Kl={container:(0,l.iv)([E.l0.position.relative]),button:(0,l.iv)([E.l0.position.relative,E.gU.nofill,E.l0.width(32),E.l0.height(32),E.l0.borderRadius(8,0,0,8)]),notificationDot:(0,l.iv)(E.l0.display.none)},ql=function(){var e=(0,Lt.Z)(),n=jl(e),t=Vl(e),r=(0,dn.b9)(xr.rl),i=(0,dn.b9)(xr.Bm);return(0,a.tZ)(E.G7,{css:[E.l0.flex.row,E.l0.align.center,{"&:only-child .open-chat-button":[E.l0.width(24),E.l0.height(24),E.l0.borderRadius(8),E.gU.listItem],"&:only-child .notification-dot-on-button":[E.l0.display.block],"&:not(:only-child) .notification-dot-on-icon":[E.l0.display.block]}],children:(0,a.tZ)(E.hU,{alt:"Open Chat and Threads",onClick:function(){i(),r()},css:Kl.button,className:"open-chat-button",children:(0,a.BX)(a.HY,{children:[n>0||t>0?(0,a.tZ)(E.G7,{className:"notification-dot-on-button",css:Kl.notificationDot,children:(0,a.tZ)(mn,{})}):null,(0,a.BX)(E.G7,{css:Kl.container,children:[n>0||t>0?(0,a.tZ)(E.G7,{className:"notification-dot-on-icon",css:Kl.notificationDot,children:(0,a.tZ)(mn,{})}):null,(0,a.tZ)(Hl.Z,{})]})]})})})},Yl=[U.Sy.Submit,U.Sy.Resubmit,U.Sy.UpdateModelSolution,U.Sy.PublishTemplate,U.Sy.EditTemplate,U.Sy.ReviewSubmission],$l={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"M"},Ql={root:(0,l.iv)([E.l0.height(60),E.l0.width("100%"),E.l0.top(0),E.l0.left(0),E.l0.flex.row,E.l0.align.center,E.l0.justify.spaceBetween,E.l0.py(8),E.l0.px(12),E.l0.position.absolute]),center:(0,l.iv)([E.l0.position.absolute,E.l0.height(42),E.l0.justify.center,{transform:"translate(-50%, -50%)",left:"50%",top:"50%"}]),configButton:(0,l.iv)([E.l0.position.absolute,E.l0.right(-29),E.l0.top(8)]),right:(0,l.iv)([E.l0.rowWithGap(8),E.l0.align.center,E.l0.justify.end]),socialGroup:(0,l.iv)([E.l0.flex.row,E.l0.align.stretch,E.l0.borderRadius(8)]),inviteButton:(0,l.iv)([E.gU.nofill,E.l0.borderRadius(0,8,8,0)]),divider:(0,l.iv)(E.l0.height("100%"))};function Jl(e){var n,t,r,o,l=(0,m.useRouter)(),c=(0,jn.Z)(),u=c.runner,s=c.presence,d=(0,Lt.Z)(),f=(0,i.Z)(g.useState(!1),2),p=f[0],h=f[1],v=(0,za.e)(La.y.Run),Z=(0,za.e)(La.y.Share),b=(0,xl.Z)(La.y.NotificationsButton),w=(0,i.Z)(g.useState(!1),2),k=w[0],C=w[1],R=function(e){var n=(0,y.Z)({},go,e);return x.a(bo,n)}({variables:{id:d}}).data,I=(0,dn.b9)(Za),T=Mo(),S=Xt(),G=(0,Xo.Z)({presence:s}),P=(0,ri.D)({controlName:"flag-run-button-editor"}),D="Repl"===(null===R||void 0===R?void 0:R.repl.__typename)?R.repl:null,U=(null===D||void 0===D?void 0:D.multiplayers)&&D.multiplayers.length>0,B=(0,g.useRef)(null),_=(0,g.useRef)(null),X=(0,g.useRef)(p&&(null===Z||void 0===Z?void 0:Z.isActive));(0,g.useEffect)((function(){X.current&&!(null===Z||void 0===Z?void 0:Z.isActive)&&h(!1),X.current=p&&(null===Z||void 0===Z?void 0:Z.isActive)}),[Z,p]),(0,g.useEffect)((function(){(null===Z||void 0===Z?void 0:Z.isActive)&&(p&&_.current?null===Z||void 0===Z||Z.delegateTooltip(_.current):Z.delegateTooltip(B.current))}),[Z,p,_]);var M="Team"===(null===D||void 0===D||null===(n=D.owner)||void 0===n?void 0:n.__typename),A=Boolean("Team"===(null===D||void 0===D||null===(t=D.owner)||void 0===t?void 0:t.__typename)&&(null===(r=null===D||void 0===D?void 0:D.owner.capabilities)||void 0===r?void 0:r.isEducationPlan)),O=Yl.find((function(e){return e===(null===D||void 0===D?void 0:D.workspaceCta)})),F=!A&&(null===D||void 0===D?void 0:D.currentUserPermissions.editMultiplayers);return(0,fi.x)($l,{enabled:!A,run:function(){h(!0)}}),vr({match:q,data:{type:"action",label:"Multiplayer",icon:(0,a.tZ)(Fa.Z,{}),description:"Open multiplayer mode",run:function(){h(!0)},keyboardShortcut:$l}},{enabled:!A}),(0,a.BX)(E.Tg,{tag:"header",css:Ql.root,children:[(0,a.tZ)(Al,{repl:e.repl,currentUser:e.currentUser}),(0,a.tZ)(E.G7,{innerRef:null===v||void 0===v?void 0:v.delegateTooltip,dataCy:"ws-run-btn",onClick:function(){(null===v||void 0===v?void 0:v.isActive)&&v.next()},css:Ql.center,children:P?(0,a.BX)(a.HY,{children:[(0,a.BX)(xo.Z,{onClickOutside:function(){return C(!1)},isOpen:k,padding:8,children:[(0,a.tZ)(di.ZP,{runner:u,disableTooltip:null===v||void 0===v?void 0:v.isActive}),(0,a.tZ)(Va,{hideModal:function(){return C(!1)}})]}),(0,a.tZ)(E.G7,{css:Ql.configButton,children:(0,a.tZ)(E.hU,{alt:"Configure Repl run",size:28,onClick:function(){C((function(e){return!e}))},css:[E.l0.color.foregroundDimmest],children:(0,a.tZ)(Ci.Z,{})})})]}):(0,a.tZ)(di.ZP,{runner:u,disableTooltip:null===v||void 0===v?void 0:v.isActive})}),(0,a.BX)(E.G7,{css:Ql.right,children:[(null===D||void 0===D?void 0:D.lesson)?(0,a.tZ)(sl,{lesson:D.lesson}):null,(0,a.tZ)(E.hU,{size:24,onClick:function(){S()},alt:"Search & run commands",tooltipContents:(0,a.BX)(E.G7,{children:[(0,a.tZ)(E.xv,{children:"Search & run commands"}),(0,a.tZ)(E.G7,{css:[E.l0.center,E.l0.pt(4)],children:(0,a.tZ)(sn.Z,{shortcut:Hn.q})})]}),tooltipPlacement:"bottom-end",children:(0,a.tZ)(at.Z,{})}),(0,a.BX)(E.Tg,{css:[Ql.socialGroup],background:G.length>1||F?"default":"root",children:[U?(0,a.tZ)(ql,{}):null,U&&G.length>1?(0,a.tZ)(E.G7,{children:(0,a.tZ)(E.XA,{css:Ql.divider})}):null,(0,a.tZ)(jo,{onAvatarClick:T}),F&&(G.length>1||U)?(0,a.tZ)(E.G7,{children:(0,a.tZ)(E.XA,{css:Ql.divider})}):null,F?(0,a.tZ)(a.HY,{children:(0,a.tZ)(E.G7,{innerRef:B,css:{"&:only-child .invite-button":[E.l0.borderRadius(8)]},children:(0,a.tZ)(pa,{showPopover:D.currentUserPermissions.inviteGuests,children:(0,a.tZ)(E.zx,{onClick:function(){(0,eo.j)(eo.U3.INVITE_MODAL_OPENED,{language:D.lang.id,replId:D.id,source:"replEnvironment"}),h(!0)},iconLeft:(0,a.tZ)(wo.Z,{}),text:"Invite",css:[Ql.inviteButton],className:"invite-button"})})})}):null]}),O?(0,a.tZ)(Oa,{cta:O,replId:d,isGroupProject:Boolean(null===D||void 0===D||null===(o=D.template)||void 0===o?void 0:o.isGroupProject),openIOtesterPane:function(){I({pane:{type:"autograder"}})}}):null,(0,a.BX)(a.HY,{children:[(0,a.tZ)(E.G7,{innerRef:b,children:(0,a.tZ)(Nl.Z,{sidebarIsOpen:!0,pathname:l.pathname,showCount:!1})}),(0,a.tZ)(Ll,{})]})]}),(0,a.tZ)(Ho.Z,{isOpen:p,onRequestClose:function(){return h(!1)},children:(0,a.tZ)(E.G7,{innerRef:_,children:M?(0,a.tZ)(da,{replId:d}):(0,a.tZ)(va,{replId:d})})})]})}var ec=(0,g.memo)(Jl),nc=t(85861),tc=t(41489);var rc=t(44747),ic=t(64487),oc=t(40258),ac=t(1855),lc=t(49906),cc=t(37432);var uc=t(15682),sc=E.KD.button,dc=(0,l.iv)([E.l0.display.inlineFlex,E.l0.height("100%")]),fc=(0,l.iv)([E.l0.cursor.pointer,E.l0.center,E.l0.rowWithGap(4),E.l0.pl(8),E.l0.pr(4),E.l0.height("100%"),E.l0.focusRing,{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]),pc=(0,l.iv)([E.l0.center,E.l0.height("100%"),E.l0.pr(4),{borderRight:"1px solid",borderColor:E.TV.outlineDimmer}]);function hc(){return(0,ri.D)({controlName:"flag-ws-quick-jump"})?(0,a.tZ)(E.G7,{css:pc,children:(0,a.tZ)(Ci.Z,{size:12,color:E.TV.foregroundDefault})}):null}function vc(e){var n=e.onClick,t=e.tabIndex;return(0,a.tZ)(E.hU,{tooltipHidden:!0,onClick:n,tabIndex:t,alt:"Close",size:18,css:[{"&& svg":{width:12,height:12,minWidth:"unset",minHeight:"unset",color:E.TV.foregroundDimmest},borderRadius:6},E.gU.nofill],children:(0,a.tZ)($e.Z,{})})}function mc(e){var n=(0,jn.Z)().fs,t=e.split("/"),r=t.pop(),i=t.join("/"),o=(0,g.useState)(!1),a=o[0],l=o[1],c=function(e){var n=e.path,t=e.initialExpanded,r=(0,jn.Z)().fs;return(0,cc.Z)({path:n,initialExpanded:t,fs:r})}({path:i.length>0?i:".",initialExpanded:!0}).children,u=null===c||void 0===c?void 0:c.filter((function(e){return e.filename!==r}));return{fileName:r,parentPath:i,renaming:a,siblings:u,handleRename:function(){l(!0)},handleCancel:function(){l(!1)},handleSubmit:function(t){var r=i.length>0?i+"/"+t:t;n.moveFile(e,r),l(!1)}}}function gc(e){var n=e.filePath,t=e.title,r=e.onClick,o=e.onClose,l=e.isActive,c=e.isCommitted,u=e.innerRef,s=e.icon,d=e.onPointerDown,f=mc(n),p=f.fileName,h=f.parentPath,v=f.renaming,m=f.siblings,Z=f.handleRename,b=f.handleSubmit,w=f.handleCancel,x=g.useRef(null),k=(0,i.Z)((0,uc.XZ)(x,!1),4),C=k[0],R=k[1],I=k[2],T=k[3];(0,uc.Ym)(R,x);var S=(0,ri.D)({controlName:"flag-ws-draft-files"});return(0,a.tZ)(E.u,{tooltip:n,placement:"bottom",isDisabled:!h||l,maxWidth:"calc(100vw - ".concat(E.TV.space16,")"),children:function(e,n){return(0,a.BX)(E.Tg,(0,nn.Z)((0,y.Z)({innerRef:(0,ac.l)(u,n),css:[dc,l?E.gU.filled:E.gU.nofill,l?E.l0.color.foregroundDefault:E.l0.color.foregroundDimmer,E.l0.flex.row,E.l0.align.center,E.l0.pr(4)]},e),{children:[v?(0,a.tZ)(lc.Z,{onSubmit:b,onCancel:w,loading:!1,siblings:m||[],parentPath:h,type:Hr.Tv.File,initialValue:p,rename:!0}):(0,a.BX)(sc,{role:"tab",ref:x,tabIndex:C,onKeyDown:I,onPointerDown:d,onDoubleClick:Z,css:fc,onClick:function(e){T(),r(e)},children:[(0,a.tZ)(E.G7,{css:{opacity:l?1:.6},children:s||null}),S?(0,a.tZ)(E.xv,{css:{fontStyle:c?"inherit":"italic}"},children:t}):(0,a.tZ)(E.xv,{children:t}),l?(0,a.tZ)(hc,{}):null]}),(0,a.tZ)(vc,{onClick:o,tabIndex:R?0:-1})]}))}})}function Zc(e){var n=e.title,t=e.onClick,r=e.onClose,o=e.isActive,l=e.innerRef,c=e.icon,u=e.onPointerDown,s=g.useRef(null),d=(0,i.Z)((0,uc.XZ)(s,!1),4),f=d[0],p=d[1],h=d[2],v=d[3];return(0,uc.Ym)(p,s),(0,a.BX)(E.Tg,{innerRef:l,css:[dc,o?E.gU.filled:E.gU.nofill,o?E.l0.color.foregroundDefault:E.l0.color.foregroundDimmer,E.l0.flex.row,E.l0.align.center,E.l0.pr(4)],children:[(0,a.BX)(sc,{role:"tab",ref:s,tabIndex:f,onKeyDown:h,css:fc,onClick:function(e){v(),t(e)},onPointerDown:u,children:[(0,a.tZ)(E.G7,{css:{opacity:o?1:.6},children:c||null}),(0,a.tZ)(E.xv,{children:n}),o?(0,a.tZ)(hc,{}):null]}),(0,a.tZ)(vc,{onClick:r,tabIndex:p?0:-1})]})}var yc=t(53201),bc=t(78217);var wc=t(30551),xc=t(73935);function kc(e){var n=e.paneId,t=e.paneGroupId,r=(0,rn.Se)(),i=(0,mt.ec)(n),o=(0,ma.A)(),l=(0,ma.Kt)(),c=function(e){var n=e.paneGroupId,t=(0,J.Z)((function(){return(0,dn.cn)((function(e){var t=e(vt.g4),r=(0,wt.QF)(t,n);return r?r.panes.length:null}))}),[n]);return(0,dn.Dv)(t)}({paneGroupId:t});return(0,J.Z)((function(){var e=r.getTitle(i),t=[{match:q,data:{type:"action",label:"Close "+e,icon:(0,a.tZ)($e.Z,{}),run:function(){o(n)}}}];return c&&c>1&&t.push({match:q,data:{type:"action",label:"Close all other tabs",icon:(0,a.tZ)($e.Z,{}),run:function(){l(n)}}}),t}),[r,i,n,o,l,c])}function Cc(e){var n=e.paneId,t=e.paneGroupId,r=(0,rn.Se)(),i=(0,mt.ec)(n),o=Rc({paneId:n}),l=kc({paneId:n,paneGroupId:t});return(0,J.Z)((function(){var e=r.getTitle(i),n=(0,N.Z)(o).concat([{data:{type:"group",key:"pane-close"},commands:function(){return l}}]),t={match:q,data:{type:"context",label:e,icon:(0,a.tZ)(r.Icon,{pane:i})},commands:function(e){var t=e.active,r=e.search;return t||r?n:[]}};return[t]}),[i,o,r,l])}function Rc(e){var n=e.paneId,t=e.limit,r=(0,It.Ab)(n);return(0,J.Z)((function(){var e=null===r||void 0===r?void 0:r.actions;return e?(void 0===t?e:e.slice(0,t)).map((function(e){return{match:q,data:e}})):[]}),[r,t])}function Ic(e){var n=e.paneGroupId,t=function(){var e=(0,J.Z)((function(){return(0,dn.cn)((function(e){var n=e(mt.N9),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,s=u.panes.map((function(n){return[n,e(e((0,mt.z)(n)).data)]})),d="floating"===u.path[0];(d?t:r).push({activeIndex:u.activeIndex,paneGroupId:u.id,isFloating:d,panes:s})}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{floating:t,tiling:r}}))}),[]);return(0,dn.Dv)(e)}(),r=(0,rn.Se)(),o=St(),l=(0,xr.Eh)();return(0,J.Z)((function(){var e=t.tiling,c=t.floating,u=e.reduce((function(e,n){return e+n.panes.length}),0)+c.reduce((function(e,n){return e+n.panes.length}),0),s={match:q,data:{type:"action",label:"New tab",icon:(0,a.tZ)(ni.Z,{}),run:function(){l({paneGroupId:n,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return u?[{match:q,data:{type:"context",label:(0,sa.Z)("Tab",u),icon:(0,a.tZ)(Tc,{count:u})},commands:function(n){var t=n.active,l=n.search;if(!t&&!l)return[];var u=(0,N.Z)(e).concat((0,N.Z)(c)).map((function(e,n){return{data:{type:"group",key:"paneGroups"+n},commands:function(){return e.panes.map((function(e){var n=(0,i.Z)(e,2),t=n[0],l=n[1];return{match:q,data:{type:"action",label:r.getTitle(l),icon:(0,a.tZ)(r.Icon,{pane:l}),run:function(){o(t)}}}}))}}}));return u.unshift(s),u}}]:[s]}),[t,r,o,l,n])}function Tc(e){var n,t=null!==(n=e.size)&&void 0!==n?n:20;return(0,a.tZ)(E.G7,{css:[E.l0.center,{fontSize:E.TV.fontSizeSmall,border:"1px solid",borderColor:E.TV.outlineDefault},E.l0.borderRadius(8)],style:{width:t,height:t},children:(0,a.tZ)(E.G7,{css:{lineHeight:1},children:e.count})})}var Sc=t(53761),Gc=(0,dn.cn)(null,(function(e,n,t){var r=e(vt.g4),i=e((0,mt.z)(t)),o=i.rectAtom,a=i.type,l=e(o),c=(0,wt.Rh)(r,t);if(!c){var u=new Error("Expected pane");throw n(Ct.j6,{error:u,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),u}if("tile"!==a){var s=e(mt.Eh).filter((function(e){return"tile"===e.type&&!e.isHidden})),d=e(mt.M0),f={x:l.x+l.width/2,y:l.y+l.height/2},p=s.find((function(n){var t=e(n.rectAtom);return(0,ji.V0)(f,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})})),h="leftOf";p&&(h=(0,ji.QN)(f,e(p.rectAtom)).placement),n(Rt.iH,(0,te.ZP)(r,(function(e){(0,Sc.$C)(e,{paneGroupPath:c.paneGroupPath,to:(null===p||void 0===p?void 0:p.paneId)||["tiling"],placement:h})})))}else n(Rt.iH,(0,te.ZP)(r,(function(e){(0,Sc.MB)(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})})))}));function Ec(){return(0,dn.b9)(Gc)}var Pc=t(64718),Dc=t(90145),Uc=t(66843),Bc=t(89295),_c=t(94860);function Xc(e,n,t){var r=(0,i.Z)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),o=r[0],a=r[1],l=Math.max(o[0],a[0]);return Math.min(o[1],a[1])-l}function Mc(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}var Ac=t(80175);function Oc(e,n){var t=n.path,r=n.forwards,i=n.vertical,o=(0,wt.KC)(e,t);if("split"!==(null===o||void 0===o?void 0:o.type))return null;var a=(0,kt.I)(t),l=(0,wt.KC)(e,a);if("split"!==(null===l||void 0===l?void 0:l.type))return null;if(l.stacked!==i)return Oc(e,{path:a,forwards:r,vertical:i});var c=l.children.indexOf(o),u=0===c;if(!(c===l.children.length-1&&r||u&&!r)){var s=c+(r?1:-1),d=l.children[s],f=l.children[c];return d?{other:f,node:d,parent:l,path:(0,N.Z)(a).concat([s])}:null}if(1===a.length){var p=u&&!r?l.children.length-1:0;return{parent:l,other:l.children[c],path:(0,N.Z)(a).concat([p]),node:l.children[p]}}return Oc(e,{path:a,forwards:r,vertical:i})}function Fc(e,n,t){var r=(0,wt.Xb)(e,n.id);if(!r)return null;var i="up"===t||"down"===t,o="down"===t||"right"===t;return Oc(e,{path:r.path,forwards:o,vertical:i})}function zc(e,n){var t=n.paneGroupId,r=n.direction,i=(0,wt.QF)(e,t),o=(0,wt.Xb)(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type)||!o)return!1;var a=o.node.children.indexOf(i);if(-1===a)throw new Error("Expected index");var l=(0,N.Z)(o.path).concat([a]),c="up"===r||"down"===r,u="down"===r||"right"===r,s=0===a,d=a===o.node.children.length-1,f=o.node.stacked===c,p=o.path.length>2;if(f&&!((d&&u||s&&!u)&&p))!function(e,n,t){var r=e.indexOf(n);if(-1===r)throw new Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1,o=0===r;if("forward"===t&&i)return e.pop(),void e.unshift(n);if("back"===t&&o)return e.shift(),void e.push(n);var a="forward"===t?1:-1;e[r]=e[r+a],e[r+a]=n}}(o.node.children,i,u?"forward":"back");else{var h=Fc(e,i,r);if(h){var v=l.slice(0,h.path.length+("paneGroup"===h.node.type?2:1));!function(e){if("tiling"!==e[0])throw new Error("Expected tiling path")}(v);var m=(0,wt.KC)(e,v);if(!m||"floatingPaneGroup"===m.type)throw new Error("Expected adjacentNode");if("split"!==h.other.type)throw new Error("Expected split");var g,Z,y,b=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=e.slice(0,t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)r+=l.value.percent}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(h.other.children,m);if("paneGroup"===h.node.type){var w=(g=b,Z={start:0,end:100},y=!h.parent.stacked,g.start-Z.start<Z.end-g.end?y?"above":"rightOf":y?"below":"leftOf");return(0,Ac.Z)(e,(0,N.Z)(o.path).concat([a])),void(0,Vt.m)(e,{placement:w,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:h.path})}var x=function(e,n){var t,r,i=e.children,o=e.stacked,a="above",l=0,c=0,u=0,s=0,d=!0,f=!1,p=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value,g={start:u,end:u+m.percent},Z=(t=n,r=g,Math.max(0,Math.min(t.end,r.end)-Math.max(t.start,r.start)));Z>s&&(s=Z,l=c,a=n.start-g.start<g.end-n.end?o?"above":"rightOf":o?"below":"leftOf"),u+=m.percent,c++}}catch(y){f=!0,p=y}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}return{placement:a,index:l}}(h.node,b),k=x.index,C=x.placement;(0,Ac.Z)(e,(0,N.Z)(o.path).concat([a])),(0,Vt.m)(e,{placement:C,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,N.Z)(h.path).concat([k])})}}}var Lc=(0,dn.cn)(null),Nc=(0,dn.cn)((function(e){var n=e(Lc);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=(0,wt.Rh)(e(vt.g4),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map((function(n){var t=e((0,mt.z)(n));return[t.paneId,e(t.data)]}))}}));var Wc=(0,dn.cn)((function(e){var n=e(Nc);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}}));var jc=(0,dn.cn)(null,(function(e,n,t){var r=t||e(bt.J1);if(r)n(Lc,{target:"pane",paneId:r});else{var i=(0,wt._F)(e(vt.g4),"topLeft"),o=i?i.paneGroup.panes[i.paneGroup.activeIndex]:null;o&&n(Lc,{target:"pane",paneId:o})}})),Hc=(0,dn.cn)(null,(function(e,n){var t=e(Lc);t&&(n(Lc,null),"sidebar"!==t.target&&n(Tt,t.paneId))}));function Vc(){return(0,dn.b9)(Hc)}var Kc=(0,dn.cn)(null,(function(e,n){if(e(Nc))n(Hc);else{var t=e(bt.J1);if(t)n(jc,t);else{var r=(0,wt._F)(e(vt.g4),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;i&&n(jc,i)}}}));var qc=(0,dn.cn)((function(e){return null!==e(Lc)}));var Yc=(0,dn.cn)(null,(function(e,n){n(Lc,null)}));function $c(){return(0,dn.b9)(Yc)}var Qc=(0,dn.cn)(null,(function(e,n,t){var r=e(Lc);if(null!==r&&"sidebar"!==r.target){var o=new Map(e(mt.Eh).filter((function(e){return!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]}))),a=function(e){var n=e.relativeTo,t=e.rects,r=e.direction,o=t.get(n);if(!o)throw new Error("Expected relativeTo rect to be included in rects");var a=null,l=!0,c=!1,u=void 0;try{for(var s,d=t[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=(0,i.Z)(s.value,2),p=f[0],h=f[1];if(p!==n){var v=Mc({from:o,other:h,direction:r});if(!(("leftOf"===r||"above"===r)&&v<=0||("rightOf"===r||"below"===r)&&v<0)){var m=Xc(o,h,"leftOf"===r||"rightOf"===r?"y":"x");m<=0||(!a||a.distance>v||a.distance===v&&a.overlap<m)&&(a={key:p,rect:h,distance:v,overlap:m})}}}}catch(g){c=!0,u=g}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return(null===a||void 0===a?void 0:a.key)||null}({relativeTo:r.paneId,rects:o,direction:t});a&&n(Lc,{target:"pane",paneId:a})}}));var Jc=(0,dn.cn)(null,(function(e,n,t){var r=e(Nc);null!==r&&"sidebar"!==r.target&&n(Rt.iH,(0,te.ZP)(e(vt.g4),(function(e){zc(e,{paneGroupId:r.paneGroupId,direction:t.direction})})))}));var eu=t(87534),nu=t(99932),tu=t(90849),ru=t(73148),iu=t(16647),ou=new Map([["leftOf",{label:"Insert Left",icon:(0,a.tZ)(eu.Z,{})}],["rightOf",{label:"Insert Right",icon:(0,a.tZ)(nu.Z,{})}],["above",{label:"Insert Up",icon:(0,a.tZ)(tu.Z,{})}],["below",{label:"Insert Down",icon:(0,a.tZ)(ru.Z,{})}]]);function au(e){var n=function(e){var n=e.paneId,t=e.paneGroupId,r=(0,Ki.Bd)(),o=(0,Pc.rX)({paneGroupId:t}),a=(0,qt.XO)({paneGroupId:t}),l=!o&&!a;return(0,J.Z)((function(){return l?(0,N.Z)(ou.entries()).map((function(e){var t=(0,i.Z)(e,2),o=t[0],a=t[1],l=a.label,c=a.icon;return{match:q,data:{label:l,icon:c,type:"action",run:function(){r({placement:o,paneId:n,autoFocus:!0}),(0,eo.j)(eo.U3.WS_SPLIT_USED,{action:"opened",placement:"leftOf"})}}}})):[]}),[l,r,n])}({paneId:e.paneId,paneGroupId:e.paneGroupId});return(0,J.Z)((function(){var e=n;return[{match:q,data:{type:"context",label:"Add pane",icon:(0,a.tZ)(iu.Z,{})},commands:function(n){var t=n.active,r=n.search;return t||r?e:[]}}]}),[n])}function lu(e){var n=e.paneGroupId,t=e.paneId,r=au({paneId:t,paneGroupId:n}),i=function(e){var n=e.paneGroupId,t=(0,Pc.Lo)(),r=t.maximizePaneGroup,i=t.restoreMaximizedPaneGroup,o=(0,Pc.rX)({paneGroupId:n});return(0,J.Z)((function(){return o?[{match:q,data:{type:"action",label:"Restore",icon:(0,a.tZ)(_c.Z,{}),run:function(){return i()}}}]:[{match:q,data:{type:"action",label:"Maximize",icon:(0,a.tZ)(Bc.Z,{}),run:function(){return r({paneGroupId:n})}}}]}),[n,r,i,o])}({paneGroupId:n}),o=function(e){var n=e.paneGroupId,t=(0,Ki.lI)(),r=$c();return(0,J.Z)((function(){return[{match:q,data:{type:"action",label:"Close",icon:(0,a.tZ)($e.Z,{}),run:function(){r(),t({paneGroupId:n})}}}]}),[r,t,n])}({paneGroupId:n}),l=function(e){var n=e.paneId,t=e.paneGroupId,r=Ec(),i=(0,Pc.rX)({paneGroupId:t}),o=(0,qt.XO)({paneGroupId:t});return(0,J.Z)((function(){return i?[]:[{match:q,data:{type:"action",label:o?"Unfloat":"Float",icon:o?(0,a.tZ)(Dc.Z,{}):(0,a.tZ)(Uc.Z,{}),run:function(){r(n)}}}]}),[n,r,o,i])}({paneId:t,paneGroupId:n});return(0,J.Z)((function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,N.Z)(r).concat((0,N.Z)(i),(0,N.Z)(l),(0,N.Z)(o))}}]}),[r,i,l,o])}function cu(e){var n=e.paneGroupId,t=e.paneId,r=function(e){var n=e.paneId,t=Cc({paneId:n,paneGroupId:e.paneGroupId}),r=Rc({paneId:n,limit:2});return(0,J.Z)((function(){var e={data:{type:"group",key:"pane-actions"},commands:function(e){var n=e.search;return(0,N.Z)(n?[]:r).concat((0,N.Z)(t))}};return[e]}),[r,t])}({paneId:t,paneGroupId:n}),i=Ic({paneGroupId:n}),o=lu({paneGroupId:n,paneId:t});return(0,J.Z)((function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return(0,N.Z)(r).concat([{data:{type:"group",key:"tabs"},commands:function(){return i}}],(0,N.Z)(o))}}}),[r,i,o])}var uu=(0,E.Xb)({root:[E.l0.position.fixed,E.l0.top(0),E.l0.left(0),E.l0.borderRadius(8),E.l0.shadow(3),{border:"1px solid",borderColor:E.TV.outlineDefault}]});function su(e){var n=cu({paneGroupId:e.paneGroupId,paneId:e.paneId}),t=Cc({paneGroupId:e.paneGroupId,paneId:e.paneId}),r=Math.round(e.x)+"px",i=Math.round(e.y)+"px";return(0,xc.createPortal)((0,a.tZ)(wc.MT,{autoFocus:!0,restoreFocus:!0,children:(0,a.tZ)(E.Tg,{elevated:!0,innerRef:e.menuRef,css:uu.root,style:{transform:"translate(".concat(r,", ").concat(i,")"),width:e.width},children:(0,a.tZ)(Wn,{iconBreadcrumbs:!0,command:[n].concat((0,N.Z)(t)),onSelect:function(n){"action"===n.data.type&&n.data.run(),e.close()}})})}),document.body)}var du=E.KD.div;function fu(e){var n=function(){o&&D?S():(ic.n_({category:"pane",message:"Tab clicked: "+d.type}),(0,eo.j)(eo.U3.WS_TAB_OPENED,{paneType:d.type}),u.onClick())},t=e.paneId,r=e.paneGroupId,o=e.isActive,l=e.onClose,c=e.dragGroup,u=(0,rc.Z)(e,["paneId","paneGroupId","isActive","onClose","dragGroup"]),s=(0,mt.mR)(t),d=(0,mt.ec)(t),f=(0,rn.Se)(),p=f.getTitle(d),h=f.Icon({pane:d,size:16}),v=(0,Ri.T)(),m=(0,g.useRef)(null);(0,g.useEffect)((function(){o&&m.current&&(0,oc.Z)(m.current,{behavior:v?"auto":"smooth",scrollMode:"if-needed"})}),[o,v]);var Z=(0,i.Z)((0,yc.c)({type:Vr.z.Pane,item:function(){var e,n=(null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect().width)||80;return{type:Vr.z.Pane,paneId:t,width:n}},collect:function(e){return{isDragging:e.isDragging()}}}),2),y=Z[0].isDragging,b=Z[1],w=(0,xr.y8)();(0,g.useEffect)((function(){return w(y)}),[w,y]);var x,k=(0,bc.q6)({paneGroupId:r}).dnd,C=k&&c?function(e){1!==e.button&&$i(e,{start:k.start,move:k.update,end:k.end})}:void 0,R=function(){var e=function(){o(null)},n=(0,g.useRef)(null),t=(0,g.useRef)(null),r=(0,g.useState)(null),i=r[0],o=r[1];return(0,g.useEffect)((function(){var r=function(n){n.target!==o&&n.target!==a&&((null===o||void 0===o?void 0:o.contains(n.target))||(null===a||void 0===a?void 0:a.contains(n.target))||e())};if(i){var o=t.current,a=n.current;return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}}}),[i]),{tabContainerRef:n,state:i,toggleMenu:function(){if(i)e();else{var t=n.current;if(t){var r=t.getBoundingClientRect(),a=r.x,l=r.y,c=r.height,u=r.width;o({x:a,y:l+c+8,width:Math.min(Math.max(u,200),window.innerWidth-16-a)})}}},menuRef:t,closeMenu:e}}(),I=R.tabContainerRef,T=R.menuRef,S=R.toggleMenu,G=R.closeMenu,P=R.state,D=(0,ri.D)({controlName:"flag-ws-quick-jump"});return(0,a.BX)(a.HY,{children:[P&&o?(0,a.tZ)(su,{menuRef:T,x:P.x,y:P.y,width:P.width,close:G,paneId:t,paneGroupId:r}):null,(0,a.tZ)(du,{ref:I,css:y?[E.l0.width(0),E.l0.visibility.hidden]:[E.l0.px(2)],onMouseDown:function(e){1===e.button&&(ic.n_({category:"pane",message:"Tab closed: "+d.type,data:{reason:"middle click"}}),(0,eo.j)(eo.U3.WS_TAB_CLOSED,{paneType:d.type}),l())},children:(0,rn.KM)(d)?(0,a.tZ)(gc,{onPointerDown:C,innerRef:C?void 0:(0,ac.l)(b,m),filePath:null!==(x=d.data.path)&&void 0!==x?x:"",title:p,isActive:o,isCommitted:s,icon:h,onClick:n,onClose:function(){ic.n_({category:"pane",message:"Tab closed: "+d.type}),(0,eo.j)(eo.U3.WS_TAB_CLOSED,{paneType:d.type}),l()}}):(0,a.tZ)(Zc,{onPointerDown:C,innerRef:C?void 0:(0,ac.l)(b,m),title:p,isActive:o,isCommitted:s,icon:h,onClick:n,onClose:function(){ic.n_({category:"pane",message:"Tab closed: "+d.type}),(0,eo.j)(eo.U3.WS_TAB_CLOSED,{paneType:d.type}),l()}})})]})}function pu(){var e=(0,b.Z)(["\n  query ReplEnvironmentHeaderContainer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return pu=function(){return e},e}var hu={},vu=(0,w.Ps)(pu());var mu=t(18455);function gu(){var e=(0,jn.Z)().presence,n=(0,i.Z)(g.useState(e.getFollowingUsers()),2),t=n[0],r=n[1];return g.useEffect((function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){r(e.followingUsers)}))}),[e]),t}var Zu={root:(0,l.iv)([E.l0.rowWithGap(4),E.l0.align.center]),text:(0,l.iv)([E.l0.flex.shrink(1),E.l0.align.center]),username:(0,l.iv)([E.l0.flex.shrink(2),E.l0.maxWidth(140),E.l0.truncate])};function yu(){var e=gu();return 0===e.length?null:1===e.length?(0,a.tZ)(bu,{user:e[0]}):(0,a.BX)(E.xv,{variant:"small",color:"dimmest",css:Zu.text,children:[e.length," users are observing you"]})}function bu(e){var n=e.user,t=n.id,r=n.username,i=n.color,o=(0,Wo.pu)([t]),l={id:t,username:r,color:i,image:null===o||void 0===o?void 0:o.get(t)};return(0,a.BX)(E.G7,{css:Zu.root,children:[(0,a.tZ)(E.qE,{size:16,src:l.image||null,username:l.username,ringColor:l.color}),(0,a.tZ)(E.xv,{variant:"small",color:"dimmer",css:Zu.username,children:r}),(0,a.tZ)(E.xv,{variant:"small",color:"dimmest",css:Zu.text,children:"is observing you"})]})}var wu={root:(0,l.iv)([E.l0.rowWithGap(4),E.l0.align.center]),text:(0,l.iv)([E.l0.flex.shrink(1),E.l0.align.center]),username:(0,l.iv)([E.l0.flex.shrink(2),E.l0.maxWidth(140),E.l0.truncate])};function xu(e){var n=e.id,t=e.username,r=e.color,i=(0,Wo.pu)([n]),o=(0,jn.Z)().presence,l={id:n,username:t,color:r,image:null===i||void 0===i?void 0:i.get(n)};return(0,a.BX)(E.G7,{css:wu.root,children:[(0,a.tZ)(E.qE,{size:16,src:l.image||null,username:l.username,ringColor:l.color}),(0,a.tZ)(E.xv,{css:wu.text,variant:"small",color:"dimmest",children:"Observing"}),(0,a.tZ)(E.xv,{css:wu.username,variant:"small",color:"dimmer",children:t}),(0,a.tZ)(E.hU,{alt:"Stop observing",size:18,onClick:function(){o.unfollowUser()},children:(0,a.tZ)($e.Z,{})})]})}var ku=t(22414);var Cu=t(86601);function Ru(e){var n=e.activeFile,t=e.paneId,r=function(e){var n=(0,y.Z)({},hu,e);return x.a(vu,n)}({variables:{replId:(0,Lt.Z)()}}).data,i="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.language:"",o=(0,xr.Ek)(),l=(0,xr.Fg)(),c=(0,xr.dK)(),u=n&&(0,Qn.gK)(n),s=function(e){var n=e.paneId,t=(0,Cu.Z)(),r=(0,bt.cr)({paneId:n});return t&&r?t:null}({paneId:t}),d=function(e){var n=e.paneId,t=gu();return(0,bt.cr)({paneId:n})&&t.length>0?t:null}({paneId:t}),f=function(){var e=(0,re.Z)((0,dn.Dv)(ku.$));return(0,g.useCallback)((function(){setTimeout((function(){var n;return null===(n=e.current)||void 0===n?void 0:n.focus()}),0)}),[e])}(),p=(0,bt.cr)({paneId:t}),h=null;return s?h=(0,a.tZ)(xu,{id:s.id,username:s.username,color:s.color}):u&&n?h=o?(0,a.tZ)(E.zx,{css:{backgroundColor:"transparent"},iconLeft:(0,a.tZ)($o.Z,{}),text:"Close preview",onClick:function(){l({type:"markdown"}),f()}}):(0,a.tZ)(E.zx,{css:{backgroundColor:"transparent"},iconLeft:(0,a.tZ)(Yo.Z,{}),text:"Open preview",onClick:function(){n&&(c({type:"markdown",data:{path:n}}),f())}}):n&&(h=(0,a.tZ)(mu.q,{filePath:n,replLanguage:i,disableKeyboardShortcut:!p})),null!==h||d?(0,a.BX)(E.G7,{css:[E.l0.px(4),E.l0.rowWithGap(8)],children:[d&&n?(0,a.tZ)(yu,{}):null,h]}):null}var Iu=t(59369);function Tu(e){var n=e.paneId,t=e.paneGroupId,r=Ec(),i=(0,Ki.lI)(),o=(0,Ki.Bd)(),l=(0,qt.XO)({paneGroupId:t}),c=(0,Pc.Lo)(),u=c.maximizePaneGroup,s=c.restoreMaximizedPaneGroup;if((0,Pc.rX)({paneGroupId:t}))return(0,a.tZ)(E.hU,{onClick:function(){return s()},alt:"Restore",children:(0,a.tZ)(_c.Z,{})});var d={label:"Maximize",icon:(0,a.tZ)(Bc.Z,{}),run:function(){return u({paneGroupId:t})}},f={label:l?"Unfloat":"Float",icon:l?(0,a.tZ)(Dc.Z,{}):(0,a.tZ)(Uc.Z,{}),run:function(){r(n)}},p={label:"Close",icon:(0,a.tZ)($e.Z,{}),run:function(){i({paneGroupId:t}),(0,eo.j)(eo.U3.WS_SPLIT_USED,{action:"closed"})}},h=l?[d,f,p]:[{label:"Insert Left",icon:(0,a.tZ)(eu.Z,{}),run:function(){o({placement:"leftOf",paneId:n}),(0,eo.j)(eo.U3.WS_SPLIT_USED,{action:"opened",placement:"leftOf"})}},{label:"Insert Right",icon:(0,a.tZ)(nu.Z,{}),run:function(){o({placement:"rightOf",paneId:n}),(0,eo.j)(eo.U3.WS_SPLIT_USED,{action:"opened",placement:"rightOf"})}},{label:"Insert Up",icon:(0,a.tZ)(tu.Z,{}),run:function(){o({placement:"above",paneId:n}),(0,eo.j)(eo.U3.WS_SPLIT_USED,{action:"opened",placement:"above"})}},{label:"Insert Down",icon:(0,a.tZ)(ru.Z,{}),run:function(){o({placement:"below",paneId:n}),(0,eo.j)(eo.U3.WS_SPLIT_USED,{action:"opened",placement:"below"})}},f,d,p];return(0,a.tZ)(Iu.Z,{resetOnSelect:!0,label:"Pane Actions",items:h,onItemClick:function(e){e.run()}})}var Su=(0,g.memo)(Tu),Gu=E.KD.div,Eu=(0,l.iv)([E.l0.flex.growAndShrink(1),E.l0.minWidth(16),E.l0.height("100%")]);function Pu(e){var n=e.paneGroupId,t=(0,bc.q6)({paneGroupId:n}),r=t.isDragging,i=t.dnd,o=(0,Pc.Lo)().toggleMaximizedPaneGroup;if(!i)return null;var l=r?"grabbing":"grab";return(0,a.tZ)(Gu,{onDoubleClick:function(){o({paneGroupId:n})},css:[Eu],style:{cursor:l},onPointerDown:function(e){$i(e,{start:i.start,move:i.update,end:i.end})}})}var Du=wi.K.div,Uu=(0,l.iv)([E.l0.width("100%"),E.l0.position.absolute,E.l0.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),Bu=(0,l.iv)([E.l0.height("100%"),E.l0.position.absolute,E.l0.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),_u=(0,l.iv)([E.l0.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function Xu(e){var n="topLeft"===e||"topRight"===e?"bottom":"top";return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat(n)}}var Mu={topLeft:(0,l.iv)([E.l0.top(0),E.l0.left(0),Xu("topLeft")]),topRight:(0,l.iv)([E.l0.top(0),E.l0.right(0),Xu("topRight")]),bottomLeft:(0,l.iv)([E.l0.bottom(0),E.l0.left(0),Xu("bottomLeft")]),bottomRight:(0,l.iv)([E.l0.bottom(0),E.l0.right(0),Xu("bottomRight")])};function Au(e){var n=e.edge,t=e.size,r=e.onPointerDown;if("top"===n||"bottom"===n)return(0,a.tZ)(Du,{onPointerDown:r,style:(0,bi.Z)({height:t},n,-t),css:Uu});if("right"===n||"left"===n)return(0,a.tZ)(Du,{onPointerDown:r,style:(0,bi.Z)({width:t},n,-t),css:Bu});var i="topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize";return(0,a.tZ)(Du,{onPointerDown:r,style:{height:t,width:t,cursor:i},css:[_u,Mu[n]]})}var Ou={height:0,width:0};var Fu={width:120,height:120},zu=(0,dn.cn)(null),Lu=(0,dn.cn)(null,(function(e,n,t){var r=e(vt.g4);if("end"===t.type)return n(zu,null),void n(Rt.iH,r);if("update"!==t.type){var i=e(mt.Eh).find((function(e){return e.paneId===t.paneId}));if(!i){var o=new Error("Expected pane");throw n(Ct.j6,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}n(bt.W1,t.paneId),n(zu,{paneId:t.paneId,edge:t.edge,rectStart:e(i.rectAtom)})}else{var a=e(zu);if(!a){var l=new Error("Expected floatingResizeState");throw n(Ct.j6,{error:l,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),l}var c=e(mt.M0),u=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?Ou:i,a=(0,y.Z)({},e),l=o.height,c=o.width;if(function(e){return"top"===e||"topLeft"===e||"topRight"===e}(t)){var u=e.height-r.y;a.height=Math.max(u,l),a.y=u<l?e.y+e.height-l:e.y+r.y}else if(function(e){return"bottom"===e||"bottomLeft"===e||"bottomRight"===e}(t)){var s=e.height+r.y;a.height=Math.max(s,l)}if(function(e){return"right"===e||"bottomRight"===e||"topRight"===e}(t)){var d=e.width+r.x;a.width=Math.max(d,c)}else if(function(e){return"left"===e||"bottomLeft"===e||"topLeft"===e}(t)){var f=e.width-r.x;a.width=Math.max(f,c),a.x=f<c?e.x+e.width-c:e.x+r.x}return a}(a.rectStart,{delta:t.moveDelta,edge:a.edge,minSize:Fu}),s=a.paneId,d=(0,te.ZP)(r,(function(e){var t=e.floating.find((function(e){return e.panes.includes(s)}));if(!t){var r=new Error("Expected floating");throw n(Ct.j6,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=u.x,i.y=u.y-c,i.width=u.width,i.height=u.height+c}));n(Rt.iH,d)}}));function Nu(){return(0,dn.b9)(Lu)}var Wu=t(65617),ju=t(17556),Hu=t(10129),Vu=t(9517),Ku=t(88512),qu=t(38630),Yu=t(76818),$u=(0,l.F4)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),Qu=(0,E.Xb)({root:[E.l0.position.relative,{overflow:"hidden"}],border:sn.w.border,arrows:[E.l0.position.absolute,E.l0.top(0),E.l0.left(0),E.l0.flex.row,E.l0.flex.wrap,{animationName:$u,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[E.l0.width("50%"),E.l0.height("50%"),E.l0.center]});function Ju(e){var n=e.delay,t=e.duration;return(0,a.BX)(E.G7,{style:{width:20,height:20},css:Qu.root,children:[(0,a.tZ)(E.G7,{css:Qu.border}),(0,a.BX)(E.G7,{css:Qu.arrows,style:{width:40,height:40,animationDelay:n?n+"ms":void 0,animationDuration:t?t+"ms":"8000ms"},children:[(0,a.tZ)(E.G7,{css:Qu.arrow,children:(0,a.tZ)(Ku.Z,{size:12})}),(0,a.tZ)(E.G7,{css:Qu.arrow,children:(0,a.tZ)(qu.Z,{size:12})}),(0,a.tZ)(E.G7,{css:Qu.arrow,children:(0,a.tZ)(Vu.Z,{size:12})}),(0,a.tZ)(E.G7,{css:Qu.arrow,children:(0,a.tZ)(Yu.Z,{size:12})})]})]})}var es=(0,E.Xb)({overlay:[E.l0.position.absolute,E.l0.borderRadius(8),E.l0.shadow(3),E.l0.align.end,E.l0.p(16),{overflow:"hidden",border:"1px solid",borderColor:E.TV.accentPrimaryStronger,zIndex:Or.MI.overlay,transitionProperty:"transform, height, width",transitionDuration:W.H.duration,transitionTimingFunction:W.H.timingFunction}],surface:[E.l0.position.relative,E.l0.borderRadius(8),E.l0.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",width:200,border:"1px solid",borderColor:E.TV.outlineDefault},E.l0.shadow(3)],innerSurface:[E.l0.flex.growAndShrink(1),E.l0.borderRadius(8)]});function ns(){var e=function(){var e=(0,J.Z)((function(){return(0,dn.cn)((function(e){var n=e(Lc);if(!n)return null;if("sidebar"===n.target)return null;if(e(Pc.Xu)===n.paneId)return e(Pc.Ep);var t=e((0,mt.z)(n.paneId)),r=e(t.rectAtom),i=e(mt.M0);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}}))}),[]);return(0,dn.Dv)(e)}();if(e){var n=function(e){return{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")}}(e);return{width:n.width,height:n.height,transform:n.transform}}}var ts=(0,E.Xb)({root:[E.l0.colWithGap(8),E.l0.p(8),{borderTop:"1px solid",borderColor:E.TV.outlineDimmer}],row:[E.l0.rowWithGap(2),E.l0.align.center,E.l0.justify.spaceBetween]}),rs=6e3;function is(){return(0,a.BX)(E.G7,{css:ts.root,children:[(0,a.BX)(E.G7,{css:ts.row,children:[(0,a.tZ)(E.xv,{color:"dimmest",variant:"small",children:"Move focus"}),(0,a.tZ)(sn.Z,{small:!0,shortcut:{cmdOrCtrlKey:!0,key:(0,a.tZ)(Ju,{duration:rs})}})]}),(0,a.BX)(E.G7,{css:ts.row,children:[(0,a.tZ)(E.xv,{color:"dimmest",variant:"small",children:"Move pane"}),(0,a.tZ)(sn.Z,{small:!0,shortcut:{shiftKey:!0,cmdOrCtrlKey:!0,key:(0,a.tZ)(Ju,{duration:rs,delay:1500})}})]})]})}var os=(0,g.memo)((function(){var e=ns(),n=$c(),t=(0,ju.Z)(n,[]);return(0,a.tZ)(wc.MT,{restoreFocus:!0,autoFocus:!0,children:(0,a.tZ)(E.G7,{style:e,css:es.overlay,children:(0,a.tZ)(E.Tg,{innerRef:t,elevated:!0,css:es.surface,children:(0,a.tZ)(E.Tg,{css:es.innerSurface,elevated:!0,children:(0,a.tZ)(us,{})})})})})})),as={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},ls={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},cs=Object.keys(as),us=(0,g.memo)((function(){var e=(0,dn.b9)(Qc),n=(0,dn.b9)(Jc),t=Vc();(0,fi.x)({key:"Escape"},{run:function(){t()}}),(0,fi.x)(cs.map((function(e){return{key:e,cmdOrCtrlKey:!0}})),{run:function(n){e(as[n.key])}}),(0,fi.x)(cs.map((function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}})),{run:function(e){n({direction:ls[e.key]})}});var r=(0,dn.Dv)(Wc);return r?"sidebar"===r.target?null:(0,a.tZ)(a.HY,{children:(0,a.tZ)(ss,{paneGroupId:r.paneGroupId,paneId:r.paneId})}):null}));function ss(e){var n=$c(),t=Vc(),r=cu(e);return(0,a.tZ)(Wn,{iconBreadcrumbs:!0,command:r,onSelect:function(e){"action"===e.data.type&&e.data.run(),n()},onKeyDown:function(e,n){var r=n.inputValue,i=n.hasHighlightedItem;if("Enter"===e.key&&!r&&!i)return e.preventDefault(),void t();(0,Hu.j)(e)&&(0,Hu.j)(e)&&e.preventDefault()},footer:(0,a.tZ)(is,{})})}var ds={cmdOrCtrlKey:!0,key:"J"};function fs(){var e=(0,dn.b9)(Kc),n=(0,dn.Dv)(qc),t=(0,ri.D)({controlName:"flag-ws-quick-jump"});return(0,fi.x)(ds,{run:function(){e()},enabled:t}),n?(0,a.tZ)(os,{}):null}function ps(e){var n=e.icon,t=e.run,r=e.label;return(0,a.tZ)(E.hU,{onClick:function(){return t()},alt:r,tooltipPlacement:"left",children:n})}function hs(e){var n=e.paneId,t=(0,It.Ab)(n);if(!t)return null;var r=t.actions;return(null===r||void 0===r?void 0:r.length)?(0,a.tZ)(a.HY,{children:r.slice(0,2).map((function(e){var n=e.icon,t=e.label,r=e.run;return(0,a.tZ)(ps,{icon:n,label:t,run:r},t)}))}):null}function vs(e){var n=e.headerId,t=(0,xr.eM)(),r=(0,xr.Eh)(),o=(0,xr.JW)(),l=(0,ma.A)(),c=(0,xr.Jy)(),u=(0,xr.qV)(n),s=u.activeIndex,d=u.panes,f=u.activeTabPaneId,p=u.activeFile,h=function(e){var n=e.visibility,t=(0,nc.Fg)().isDarkColorScheme,r=(0,g.useState)(!1),o=r[0],a=r[1],l=(0,i.Z)((0,tc.A)({options:{overflow:{y:"hidden",x:"scroll"},update:{debounce:[100,200]},scrollbars:{theme:t?"os-theme-light":"os-theme-dark",autoHide:"leave",visibility:n}},events:{initialized:function(){return a(!0)}},defer:!0}),1)[0];return{ref:(0,g.useCallback)((function(e){e&&l(e)}),[l]),initialized:o}}({visibility:c?"hidden":"auto"}),v=(0,i.Z)((0,jr.L)({accept:[Hr.Tv.File,Vr.z.Pane,Vr.z.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&w({item:e,panes:d,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,t){if(!t.didDrop()){var i=null!==(null===x||void 0===x?void 0:x.index)?null===x||void 0===x?void 0:x.index:d.length;if(e.type!==Hr.Tv.File&&e.type!==Hr.Tv.Directory)if(e.type!==Vr.z.NewPane){if("paneId"in e){var a=d.includes(e.paneId)?d.length-1:d.length;o({paneId:e.paneId,index:void 0!==i&&i<a?i:a,toPaneGroupId:n})}}else r({activate:!0,paneGroupId:n,index:i,panes:[e.pane]});else{var l=e.nodes.filter((function(e){return e.type===Hr.Tv.File})).map((function(e){return{type:(0,rn.Dp)({path:e.path}),data:{path:e.path}}}));l.length>0&&r({activate:!0,commit:!0,paneGroupId:n,index:i,panes:l})}}}}),2),m=v[0],Z=v[1],y=function(e){var n=e.isOver,t=(0,g.useState)(null),r=t[0],i=t[1],o=(0,g.useRef)(null),a=(0,g.useRef)([]);(0,g.useEffect)((function(){if(!n)return a.current=[],void i(null);o.current&&(a.current=(0,N.Z)(o.current.children).map((function(e){var n=e.getBoundingClientRect();return n.x+n.width/2})))}),[n]);var l=(0,g.useCallback)((function(e){if(0!==a.current.length){var n=e.item.type===Vr.z.Pane?e.item:null,t=(null===n||void 0===n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,o=(null===n||void 0===n?void 0:n.width)||80,l=a.current.map((function(e,n){return-1===r||r<n?e:e+o/2})).findIndex((function(n){return n>e.sourceClientOffset})),c=-1===l,u=-1===r?e.panes.length:e.panes.length-1;i({index:c?u:Math.min(l,u),paneId:t,width:o})}}),[]);return{tabContainerRef:o,hover:l,dropState:r}}({isOver:m.isOver}),b=y.tabContainerRef,w=y.hover,x=y.dropState,k=(0,ri.D)({controlName:"flag-ws-quick-jump"}),C=(0,dn.b9)(jc),R=x?x.index:null;if((null===x||void 0===x?void 0:x.paneId)&&null!==R){var I=d.indexOf(x.paneId);I>-1&&I<R&&R++}var T=x&&null!==R?(0,N.Z)(d.slice(0,R)).concat([x],(0,N.Z)(d.slice(R))):d;return(0,a.BX)(a.HY,{children:[(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(2),E.l0.flex.growAndShrink(1),E.l0.align.center,E.l0.height("100%")],innerRef:Z,role:"tablist",children:[(0,a.BX)(uc.uP,{children:[(0,a.tZ)(E.G7,{innerRef:h.ref,css:[E.l0.flex.row,E.l0.flex.shrink(1),E.l0.align.center,E.l0.height("100%"),{"& > .os-viewport":E.l0.height("100%"),opacity:h.initialized?1:0}],children:(0,a.tZ)(E.G7,{innerRef:b,css:[E.l0.flex.row,E.l0.height("100%"),E.l0.py(4),E.l0.px(2)],children:T.map((function(e,r){var i=s===r;return"string"!==typeof e?(0,a.tZ)(E.G7,{css:[E.l0.px(2)],children:(0,a.tZ)(E.G7,{css:[E.l0.borderRadius(8),E.l0.width(e.width),E.l0.height(28),E.l0.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(E.TV.accentPrimaryDefault)}]})},"preview"):(0,a.tZ)(fu,{dragGroup:1===d.length,paneId:e,paneGroupId:n,isActive:i,onClick:function(){t(e)},onClose:function(){l(e)}},e)}))})}),(0,a.tZ)(E.hU,{alt:"New tab",tooltipHidden:!0,onClick:function(){r({paneGroupId:n,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})},children:(0,a.tZ)(ni.Z,{})})]}),(0,a.tZ)(Pu,{paneGroupId:n})]}),(0,a.tZ)(Ru,{headerId:n,paneId:f,activeFile:p}),(0,a.BX)(E.G7,{css:[E.l0.px(4),E.l0.rowWithGap(2)],children:[(0,a.tZ)(hs,{paneId:f}),k?(0,a.tZ)(E.hU,{onClick:function(){return C(f)},alt:"Pane actions",tooltipPlacement:"left",tooltipContents:(0,a.tZ)(sn.Z,{hideBorder:!0,shortcut:ds}),children:(0,a.tZ)(Wu.Z,{})}):(0,a.tZ)(Su,{paneId:f,paneGroupId:n})]})]})}var ms=(0,g.memo)(vs),gs=(0,l.iv)([E.l0.borderRadius(8,8,0,0),E.l0.position.absolute,E.l0.flex.row,E.l0.align.center],{borderBottom:"1px solid ".concat(E.TV.backgroundHigher)}),Zs=["top","right","left","topRight","topLeft"];function ys(e){var n=e.headerId,t=(0,qt.XO)({paneGroupId:n}),r=(0,xr.u_)(n),i=Nu();return t?(0,a.tZ)(a.HY,{children:Zs.map((function(e){return(0,a.tZ)(Au,{size:8,edge:e,onPointerDown:function(n){$i(n,{start:function(){i({type:"start",paneId:r,edge:e})},move:function(e){var n=e.delta;i({type:"update",moveDelta:n})},end:function(){i({type:"end"})}})}},e)}))}):null}var bs=(0,g.memo)(ys);function ws(e){var n=e.headerId,t=(0,xr.u_)(n),r=(0,mt.ec)(t),i=(0,Or.w8)(t),o=(0,bc.cI)({paneId:t}),l=(0,xr.LS)(n),c=(0,bc.FD)({paneId:t}),u=(0,bt.Xo)();return(0,a.BX)(E.Tg,{elevated:!0,css:gs,style:{transform:o?"scale(".concat(o.scale,")"):void 0,transformOrigin:o?"".concat(o.originX," bottom"):void 0,width:l.width,height:l.height,top:Math.round(l.y),left:Math.round(l.x),zIndex:i,transitionProperty:c?"all":void 0,transitionDuration:c?"140ms":void 0,transitionTimingFunction:c?"ease-out":void 0},onMouseDown:function(){var e="codeEditor"!==r.type;u(t,{commit:e})},children:[(0,a.tZ)(ms,{headerId:n}),(0,a.tZ)(bs,{headerId:n})]})}var xs=(0,g.memo)(ws);function ks(){var e=(0,b.Z)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return ks=function(){return e},e}var Cs=(0,w.Ps)(ks());function Rs(e){return Is.apply(this,arguments)}function Is(){return(Is=(0,r.Z)((function(e){var n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return null===Jt.l?[2]:[4,Jt.l.query({query:Cs,variables:{username:e}})];case 1:return[2,null===(t=r.sent().data)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.image]}}))}))).apply(this,arguments)}function Ts(){return"Notification"in window?"true"===wa.Z.get(Ds,"string")?"dismissed":window.Notification.permission:"denied"}function Ss(){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){try{window.Notification.requestPermission().then()}catch(n){return[2,new Promise((function(e){window.Notification.requestPermission((function(n){e(n)}))}))]}return[2,window.Notification.requestPermission()]}))}))).apply(this,arguments)}function Es(){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,Ss()];case 1:return e.sent(),Us(!1),[2]}}))}))).apply(this,arguments)}var Ds="notifications/dismissedModal";function Us(e){wa.Z.set(Ds,String(e))}var Bs={};function _s(){return(_s=(0,r.Z)((function(e){var n,t,r,i,a,l,c,u,s,d,f;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.title,t=e.body,r=e.badge,i=e.icon,a=e.iconByUsername,l=e.tag,c=e.onClick,u=e.cacheDuration,s=void 0===u?0:u,!document.hidden&&document.hasFocus()?[2]:"granted"!==Ts()?[2]:(d=Date.now(),l in Bs&&Bs[l]+s>d?[2]:a?[4,Rs(a)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return f=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:l}),setTimeout((function(){f.close()}),1e4),f.addEventListener("click",(function(){window.focus(),f.close()})),c&&f.addEventListener("click",c),Bs[l]=d,[2]}}))}))).apply(this,arguments)}var Xs=t(20431);var Ms=t(93160),As=t(13482),Os=["bottom","right","left","bottomRight","bottomLeft"],Fs=(0,l.iv)([Mr.l0.coverContainer,Mr.l0.borderRadius(0,0,8,8)]),zs="--fixed-position-offset-x",Ls="--fixed-position-offset-y",Ns=function(e){return"var(".concat(e,")")},Ws=(0,l.iv)({transform:"translate(".concat(Ns(zs),", ").concat(Ns(Ls),")")}),js=(0,l.iv)([Mr.l0.coverContainer,!As.gn&&{"& .cm-editor > .cm-tooltip":Ws,"& .cm-editor > .cm-tooltip.cm-tooltip-thread":{left:"0px !important",transform:"translateY(".concat(Ns(Ls),"px)")},".cm-custom-context-menu":Ws}]);function Hs(e){var n,t=e.resizable&&e.onResizeControlPointerDown?Os.map((function(n){return(0,a.tZ)(Au,{size:8,edge:n,onPointerDown:function(t){if(!e.onResizeControlPointerDown)throw new Error("Expected onResizeControlMouseDown");e.onResizeControlPointerDown(t,n)}},n)})):null,r=e.rect;return(0,a.tZ)(wi.G,{style:(n={zIndex:e.zIndex,position:"absolute",width:r.width,height:r.height,transform:"translate(".concat(Math.round(r.x),"px, ").concat(Math.round(r.y),"px)"),visibility:e.hidden?"hidden":void 0,opacity:e.hidden?0:void 0},(0,bi.Z)(n,zs,-e.viewportInset.x+"px"),(0,bi.Z)(n,Ls,-e.viewportInset.y+"px"),(0,bi.Z)(n,"transitionProperty","transform"),(0,bi.Z)(n,"transitionTimingFunction","ease-out"),(0,bi.Z)(n,"transitionDuration",e.animate?"140ms":void 0),n),css:{"&:hover":{zIndex:e.zIndexHovered}},children:(0,a.BX)(Ms.T,{onKeyDown:e.onKeyDown,onMouseDown:e.onMouseDown,onContextMenu:e.onMouseDown,elevated:!0,css:Fs,className:e.className,children:[(0,a.tZ)(wi.G,{innerRef:e.innerRef,css:js,children:e.children}),t]})})}var Vs=t(24894),Ks=(0,dn.cn)((function(e){return Boolean(e(bc.sx)||e(zu)||e(Hi)||e(xr.c)||e(Vs.xM))}));var qs=t(46091);var Ys={base:(0,l.iv)([E.l0.position.absolute,E.l0.borderRadius(8),{pointerEvents:"none",border:"1px solid",transitionProperty:"border, box-shadow",transitionDuration:W.H.duration,transitionTimingFunction:W.H.timingFunction}]),floating:(0,l.iv)([{borderColor:E.TV.outlineDimmest},E.l0.shadow(2)]),dragging:(0,l.iv)([{borderColor:E.TV.outlineStronger},E.l0.shadow(3)]),active:(0,l.iv)([{borderColor:E.TV.outlineDimmer}])};function $s(e){var n=function(e){var n=e.paneId,t=(0,J.Z)((function(){return(0,dn.cn)((function(e){if(e(Pc.Xu))return null;var t=e((0,mt.z)(n)),r=n===e(bc.WB),i=n===e(bt.J1),o="floating"===t.type;if(!(o||r||i))return null;var a=e(mt.M0),l=e(t.rectAtom);return{style:{width:l.width+2,height:l.height+a+2,top:-(a+1),left:-1},isActive:i,isBeingDragged:r,isFloating:o}}))}),[n]);return(0,dn.Dv)(t)}({paneId:e.paneId});return n?(0,a.tZ)(E.G7,{css:[Ys.base,n.isFloating&&Ys.floating,n.isActive&&Ys.active,n.isBeingDragged&&Ys.dragging],style:n.style}):null}var Qs=(0,g.memo)($s);var Js=t(10693);var ed=(0,l.iv)([E.l0.width("100%"),E.l0.flex.growAndShrink(1),{overflow:"auto"}]);function nd(e){return(0,a.tZ)(E.G7,{css:ed,style:{pointerEvents:e.disableInteractions?"none":void 0,userSelect:e.disableInteractions?"none":void 0},children:e.children})}function td(e){var n=e.paneId,t=(0,mt.uK)(),r=(0,mt.ec)(n).type,o=(0,mt.L0)(n),l=(0,bc.cI)({paneId:n}),c=Nu(),u=(0,bt.Xo)(),s="floating"===o.type&&!o.isDialog,d=(0,bc.FD)({paneId:n}),f=(0,Or.MD)(n),p=(0,dn.Dv)(Ks),h=(0,ri.D)({controlName:"flag-ws-draft-files"}),v=function(e){var n=e.paneId,t=(0,J.Z)((function(){return(0,dn.cn)((function(e){if(e(Pc.Xu)===n)return e(Pc.Ep);var t=e((0,mt.z)(n));return e(t.rectAtom)}))}),[n]);return(0,dn.Dv)(t)}({paneId:n}),m={x:Math.round(t.x+v.x),y:Math.round(t.y+v.y)},g=function(e){var n=e.paneId,t=(0,i.Z)((0,jr.L)({accept:[Hr.Tv.File,Vr.z.Pane,Vr.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,t){var r=t.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:n})},drop:function(e,t){var r=t.getClientOffset();if(r)if(e.type!==Vr.z.Pane){if(e.type===Hr.Tv.File||e.type===Hr.Tv.Directory){var i=e.nodes.filter((function(e){return e.type===Hr.Tv.File})).map((function(e){return{type:(0,rn.Dp)({path:e.path}),data:{path:e.path}}}));i.length>0&&a.drop({type:"newPaneGroup",panes:i,pageX:r.x,pageY:r.y,over:n})}if(e.type===Vr.z.NewPane){var o=e.pane;a.drop({type:"newPaneGroup",panes:[o],pageX:r.x,pageY:r.y,over:n})}}else a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:n})}}),2),r=t[0].isOver,o=t[1],a=(0,qs.s)({isOver:r});return o}({paneId:n}),Z="tile"===o.type;return(0,a.BX)(rn.Xq,{value:n,children:[o.isDialog?(0,a.tZ)(od,{}):null,(0,a.BX)(Hs,{css:{transform:l?"scale(".concat(l.scale,")"):void 0,transformOrigin:l?"".concat(l.originX," top"):void 0},innerRef:Z?g:void 0,zIndex:f.normal,zIndexHovered:f.hovered,hidden:o.isHidden,viewportInset:m,rect:v,animate:d,resizable:s,onKeyDown:function(){h&&"codeEditor"===r&&u(n,{commit:!0})},onMouseDown:function(){u(n,{commit:"codeEditor"!==r})},onResizeControlPointerDown:function(e,t){$i(e,{start:function(){c({type:"start",paneId:n,edge:t})},move:function(e){var n=e.delta;c({type:"update",moveDelta:n})},end:function(){c({type:"end"})}})},children:[(0,a.tZ)(Qs,{paneId:n}),(0,a.tZ)(Js.Z,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,J.Z)((function(){return{paneType:o.type}}),[o.type]),children:(0,a.tZ)(nd,{disableInteractions:p,children:(0,a.tZ)(id,{paneId:n,isHidden:o.isHidden})})},n)]})]})}function rd(e){var n=e.paneId,t=e.isHidden,r=(0,mt.ec)(n),i=(0,bt.cr)({paneId:n}),o=(0,rn.Se)().Content,l=(0,$t.hA)(),c=function(e){l({fromPaneId:n,data:e})};return(0,a.tZ)(o,{pane:r,options:{paneId:n,isHidden:t,replacePane:c,openPane:c,isActive:i}})}var id=(0,g.memo)(rd);function od(){var e=(0,dn.b9)(ba);return(0,a.tZ)(E.G7,{onClick:function(){return e()},css:[E.l0.coverContainer,E.l0.position.fixed,E.l0.backgroundColor.backgroundOverlay]})}var ad=(0,g.memo)(td),ld=(0,dn.cn)((function(e){var n=e(bt.J1);if(!n)return null;var t=e((0,mt.z)(n)).rectAtom,r=e(t),i=e(mt.M0);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}}));function cd(){var e=(0,dn.Dv)(ld),n=(0,Cu.Z)();return e&&n?(0,a.tZ)("div",{css:[Mr.l0.position.absolute,Mr.l0.width(e.width),Mr.l0.height(e.height),Mr.l0.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null}var ud=(0,g.memo)(cd),sd=40,dd=(0,dn.cn)({}),fd=(0,dn.cn)(null,(function(e,n,t){n(dd,(function(e){return(0,te.ZP)(e,(function(e){e[t.id]=t.preferredHeight}))}))}));function pd(){return(0,dn.b9)(fd)}var hd=(0,dn.cn)([]),vd=(0,dn.cn)(0),md=(0,dn.cn)(null,(function(e,n,t){var r=t.height,i=t.sections,o=r-i.length*sd;n(vd,r),n(hd,i.map((function(e){var n=e.id,t=e.percent;return{id:n,height:0===t?0:o*(t/100)}})))}));function gd(e){return(0,dn.Dv)(function(e){return(0,J.Z)((function(){return(0,dn.cn)((function(n){var t;return sd+((null===(t=n(hd).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)||0)}))}),[e])}(e))}var Zd=(0,dn.cn)((function(e){return e(hd).map((function(e){return e.id}))}));var yd=(0,dn.cn)(null,(function(e,n,t){n(vd,t),n(hd,(function(e){return(0,te.ZP)(e,(function(e){var n=e.reduce((function(e,n){return e+n.height}),0),r=t-e.length*sd,i=e.filter((function(e){return e.height>0})),o=(r-n)/i.length,a=!0,l=!1,c=void 0;try{for(var u,s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;d.height=Math.max(0,d.height+o)}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}))}))}));var bd=t(33101),wd=t(73359);function xd(){var e=(0,b.Z)(["\n  query WorkspaceHeaderUsersOnline($ids: [Int!]!) {\n    currentUser {\n      id\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return xd=function(){return e},e}var kd={},Cd=(0,w.Ps)(xd());var Rd=t(57731);function Id(){var e=(0,jn.Z)().presence,n=Mo(),t=(0,Xo.Z)({presence:e}),l=(0,i.Z)(function(e){var n=(0,y.Z)({},kd,e);return wd.t(Cd,n)}(),1)[0];return(0,J.Z)((function(){return{data:{type:"context",label:"Multiplayers",icon:(0,a.tZ)(Fa.Z,{})},commands:(0,r.Z)((function(){var e,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t.length?[4,l({variables:{ids:t.map((function(e){return e.id}))}})]:[2,[]];case 1:return(e=o.sent().data)?(r=t.reduce((function(e,n){return e[n.id]=n.color,e}),{}),i=e.currentUser,[2,e.usersByIds.filter((function(e){return e.id!==(null===i||void 0===i?void 0:i.id)})).map((function(e){return{match:q,data:{type:"action",label:e.username,icon:(0,a.tZ)(E.G7,{style:{border:"2px solid",borderColor:r[e.id],borderRadius:"50%"},children:(0,a.tZ)(Rd.Z,{size:16,src:e.image,alt:e.username})}),run:function(){return n({username:e.username,id:e.id})}}}}))]):[2,[]]}}))}))}}),[t,n,l])}var Td={type:"context",icon:(0,a.tZ)(at.Z,{}),label:"",description:"Search"};var Sd=(0,l.iv)([E.l0.top(0),E.l0.left(0),E.l0.width("100%"),E.l0.zIndex(3),{"& > div:first-of-type > div:first-of-type":[E.l0.pl(0),E.l0.pr(0),E.l0.pt(0)]},{'& [role="listbox"]':[E.l0.pl(8),E.l0.position.absolute,E.l0.top(40),E.l0.height("calc(100% - ".concat(40,"px)")),E.l0.left(0),E.l0.width("100%"),E.l0.zIndex(3),E.l0.backgroundColor.backgroundRoot]},{'& [role="option"] > div':[E.l0.borderRadius(8)]}]);function Gd(){var e=function(){var e=(0,jn.Z)().fs,n=(0,vt.AA)(),t=(0,gt.T)(),r=(0,nr.C)(),i=Et(),o=Pt(),l=Id(),c=(0,J.Z)((function(){return(0,dn.cn)((function(c){var u=c(i),s=c(o),d={data:{type:"context",label:"Tools",icon:(0,a.tZ)(Zt.Z,{})},commands:function(){return s}},f=it({openFile:r,fs:e,shouldHideFile:t,getRecentFiles:n,lazyLoad:!0});return f.match=void 0,{data:Td,commands:function(){return[u,f,d,l]}}}))}),[e,o,i,t,r,n,l]);return(0,dn.Dv)(c)}(),n=(0,nr.C)(),t=(0,$t.TO)();return(0,a.tZ)(E.G7,{css:Sd,children:(0,a.tZ)(Wn,{onSelect:function(e){if("openFile"!==e.data.type)if("openPane"!==e.data.type)"action"!==e.data.type||e.data.run();else{var r=e.data.pane;t({pane:r})}else{var i=e.data.deeplink.path;n({path:i})}},command:e,openOnInput:!0})})}var Ed,Pd=t(96189),Dd=t(47979);!function(e){e.Files="files",e.Dock="dock",e.Kaboom="kaboom",e.Extensions="extensions",e.Resources="resources"}(Ed||(Ed={}));var Ud=t(81815),Bd=t(12824),_d=t(94058),Xd=t(16495);var Md={root:E.l0.px(4),rowWrap:(0,l.iv)([E.l0.borderRadius(8)]),row:(0,l.iv)([E.gU.nofill,E.l0.rowWithGap(8),E.l0.p(4),E.l0.minHeight(32),E.l0.align.center,{transition:"initial"}]),icon:(0,l.iv)([E.l0.position.relative,{"& > svg":E.l0.color.foregroundDimmer}]),textWrap:[E.l0.colWithGap(2),E.l0.flex.growAndShrink(1)],heading:[E.l0.flex.growAndShrink(1),{opacity:.5}],text:[E.l0.flex.growAndShrink(1)]};function Ad(e){var n=e.title,t=e.icon,r=e.active,i=e.highlightRanges,o=e.heading,l=e.dragRef;return(0,a.tZ)(E.G7,{css:Md.root,children:(0,a.tZ)(E.Tg,{elevated:r,css:Md.rowWrap,children:(0,a.BX)(E.Tg,{innerRef:l,css:Md.row,children:[(0,a.tZ)(E.G7,{css:Md.icon,children:t}),(0,a.BX)(E.G7,{css:Md.textWrap,children:[o?(0,a.tZ)(E.xv,{variant:"small",color:"dimmest",css:Md.heading,children:o}):null,(0,a.tZ)(E.xv,{css:Md.text,color:(null===i||void 0===i?void 0:i.length)?"dimmest":"default",children:(null===i||void 0===i?void 0:i.length)?(0,a.tZ)(ot.xK,{style:{color:E.TV.foregroundDimmest},matchStyle:{fontWeight:E.TV.fontWeightBold,color:E.TV.foregroundDefault},source:n,matches:i.map((function(e){return{column:e.from,length:e.to-e.from}}))}):n})]})]})})})}function Od(){var e=(0,Xs.X)(),n=(0,re.Z)(e),t=(0,g.useState)(!e),r=t[0],i=t[1],o=Boolean(e&&e.isLoading);return(0,g.useEffect)((function(){if(!o){var e=n.current;e&&i(Boolean(null===e||void 0===e?void 0:e.isDone))}}),[o]),r}var Fd=t(37497),zd=t(76216),Ld=function(e){var n=e.toolsGridItemRef,t=e.useTourResult,r=e.innerRef,i=e.shouldHideToolTip,o=Od(),l=(0,zd.Z)(),c=(0,ri.D)({controlName:"flag-neon-databases"}),u=(0,ri.D)({controlName:"flag-neon-databases-tour"}),s=t.shouldDisplay,d=t.register,f=t.dismiss,p=!i&&"nix"===l&&c&&u&&o&&n&&s;return(0,g.useEffect)((function(){c&&u&&o&&d()}),[c,u,o,d]),p?(0,a.tZ)(Fd.k,{placement:"right",targetElement:n.current,activeStep:{id:"PostgresDatabasesTour",title:"New: PostgreSQL Database",content:function(){return(0,a.tZ)(E.xv,{multiline:!0,children:"PostgreSQL Databases let you store, read and write persistent data quickly. Great for storing user or application data that changes over time."})}},currentStepIndex:0,done:f,goto:function(){},totalSteps:1,disableAnimation:!0,innerRef:r}):null},Nd=(0,g.createContext)({toolTourMap:{}}),Wd=function(e){var n=e.panes,t=e.children,r=e.isCollapsed,i=(0,h.Z)("workspace","workspace-tools-databases-postgres-tour"),o=(0,g.useRef)(null),l=(0,g.useRef)(null),c=n.length,u=(0,g.useState)(!1),s=u[0],d=u[1];return(0,g.useLayoutEffect)((function(){var e;d(r),null===(e=l.current)||void 0===e||e.updateTooltip()}),[c,r]),(0,a.BX)(Nd.Provider,{value:{toolTourMap:{neon:{buttonRef:o,dismissTour:i.dismiss}}},children:[(0,a.tZ)(Ld,{toolsGridItemRef:o,useTourResult:i,innerRef:l,shouldHideToolTip:s}),t]})},jd=t(83952),Hd={38:20},Vd={root:(0,l.iv)([E.gU.filled,E.l0.position.relative,E.l0.center,E.l0.borderRadius(8),{"& > svg":E.l0.color.foregroundDimmer}]),hovered:(0,l.iv)({backgroundColor:E.vb.interactiveBackgroundActive,"& > svg":E.l0.color.foregroundDefault}),active:(0,l.iv)([E.gU.filled[":not([disabled])"][":active"],{"& > svg":E.l0.color.foregroundDimmer}]),focused:(0,l.iv)([{boxShadow:"0 0 0 2px "+E.TV.accentPrimaryDefault,outline:"2px solid transparent",outlineOffset:"4px"}])};function Kd(e){var n=e.innerRef,t=e.indicator,r=e.hovered,i=e.active,o=e.children,l=e.className,c=e.size,u=void 0===c?38:c;return(0,a.BX)(E.G7,{className:l,innerRef:n,css:[Vd.root,r&&Vd.hovered,i&&Vd.active],style:{width:u,height:u},children:[(0,g.cloneElement)(o,{size:Hd[u]}),t?(0,a.tZ)(mn,{small:!0}):null]})}var qd={root:(0,l.iv)([E.l0.viewStyle,E.l0.reset.button,E.l0.colWithGap(4),E.l0.cursor.pointer,E.l0.center,E.l0.pt(2),E.l0.pt(4),{"&:hover .text":[E.l0.color.foregroundDefault]},{"&:hover .icon":[Vd.hovered]},{"&:active .icon":[Vd.active]},{"&:focus-visible .icon":[Vd.focused]}]),hovered:(0,l.iv)([E.l0.color.foregroundDefault]),text:[E.l0.flex.growAndShrink(1),{fontSize:10}]};function Yd(e){var n=e.pane,t=e.onClick,r=e.iconRef,i=e.buttonRef,o=e.hovered,l=e.onKeyDown,c=e.tabIndex,u=(0,rn.Se)(),s=u.Icon({pane:n,size:20}),d=u.getTitle(n),f=hn({paneType:n.type}),p=function(e){return(0,g.useContext)(Nd).toolTourMap[e.type]}(n),h=(0,jd.lq)(null===p||void 0===p?void 0:p.buttonRef,i),v=(0,g.useCallback)((function(e){t(e),null===p||void 0===p||p.dismissTour()}),[t,p]);return(0,a.BX)("button",{css:[qd.root,o&&qd.hovered],onClick:v,ref:h,onKeyDown:l,tabIndex:c,children:[(0,a.tZ)(Kd,{className:"icon",innerRef:r,hovered:o,indicator:f,children:s}),(0,a.tZ)(Qd,{className:"text",hovered:o,children:d})]})}var $d={root:(0,l.iv)([E.l0.flex.growAndShrink(1),{fontSize:10,textAlign:"center"}])};function Qd(e){var n=e.children,t=e.hovered,r=e.className;return(0,a.tZ)(E.xv,{className:r,css:$d.root,color:t?"default":"dimmest",children:n})}var Jd={root:(0,l.iv)([E.l0.position.absolute]),icon:(0,l.iv)([E.l0.shadow(2)]),textContainer:(0,l.iv)([E.l0.position.absolute,E.l0.left("50%"),E.l0.bottom("0"),E.l0.width("200%"),E.l0.center,{transform:"translate(-50%, calc(100% + ".concat(4,"px))")}])};function ef(e){var n=e.pane,t=e.x,r=e.y,i=(0,rn.Se)(),o=i.Icon({pane:n,size:20}),l=i.getTitle(n),c=hn({paneType:n.type});return(0,a.BX)(E.G7,{css:Jd.root,style:{transform:"translate(".concat(t,"px, ").concat(r,"px)")},children:[(0,a.tZ)(Kd,{css:Jd.icon,active:!0,indicator:c,children:o}),(0,a.tZ)(E.G7,{css:Jd.textContainer,children:(0,a.tZ)(Qd,{hovered:!0,children:l})})]})}var nf={root:(0,l.iv)([E.l0.position.absolute,E.l0.shadow(2),E.l0.borderRadius(8),E.l0.minWidth(100)])};function tf(e){var n=e.pane,t=e.x,r=e.y,i=(0,rn.Se)(),o=i.Icon({pane:n,size:20}),l=i.getTitle(n);return(0,a.tZ)(E.G7,{css:nf.root,style:{transform:"translate(".concat(t,"px, ").concat(r,"px)")},children:(0,a.tZ)(Ad,{active:!0,icon:o,title:l})})}function rf(){var e=(0,_d.u)();if(!e.display)return null;var n=e.item,t=e.monitor.getSourceClientOffset();return t?n.grid?(0,a.BX)(a.HY,{children:[(0,a.tZ)(Ii.a,{cursor:"grabbing"}),(0,a.tZ)(ef,{pane:n.pane,x:t.x,y:t.y})]}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(Ii.a,{cursor:"grabbing"}),(0,a.tZ)(tf,{pane:n.pane,x:t.x,y:t.y})]}):null}var of=(0,l.iv)({position:"fixed",pointerEvents:"none",zIndex:Or.MI.filetreeDragLayer,left:0,top:0,width:"100%",height:"100%"});function af(){var e=(0,Bd.f)((function(e){return{item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging()}})),n=e.isDragging,t=e.itemType===Vr.z.NewPane;return n&&t?(0,a.tZ)("div",{css:of,children:(0,a.tZ)(rf,{})}):null}function lf(e){var n=e.sections,t=e.id,r=n.findIndex((function(e){return e.id===t}));if(-1===r)throw new Error("");var i=n[r],o=i.height;i.height=0;var a=n.slice(r),l=n.slice(0,r).reverse(),c=!0,u=!1,s=void 0;try{for(var d,f=(0,N.Z)(a).concat((0,N.Z)(l))[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;if(0!==p.height)return void(p.height+=o)}}catch(h){u=!0,s=h}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}}var cf=(0,dn.cn)(null,(function(e,n,t){var r=e(hd),i=e(dd)[t],o=r.find((function(e){return e.id===t}));if(!o)throw new Error("");0===o.height?n(hd,(0,te.ZP)(r,(function(n){!function(e){var n=e.sections,t=e.preferredHeight,r=e.id,i=n.findIndex((function(e){return e.id===r}));if(-1===i)throw new Error("Expected sectionIndex");var o=n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),a=e.totalHeight-o,l=n[i];if(a>0)l.height=a;else{var c=n.slice(i+1).find((function(e){return e.height>0}))||n.slice(0,i).reverse().find((function(e){return e.height>0}));if(c){if(void 0!==t&&t<c.height)return l.height=t,void(c.height-=t);l.height=c.height,c.height=0}}}({sections:n,id:t,totalHeight:e(vd),headerHeight:sd,preferredHeight:i})}))):(n(fd,{id:o.id,preferredHeight:o.height}),n(hd,(0,te.ZP)(r,(function(e){return lf({sections:e,id:t})}))))}));function uf(){return(0,dn.b9)(cf)}function sf(e){var n=(0,J.Z)((function(){return(0,dn.cn)((function(n){var t;return 0===(null===(t=n(hd).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)}))}),[e]);return(0,dn.Dv)(n)}function df(e){var n=e.pane,t=(0,$t.TO)(),r=(0,qs.N)(),o=(0,i.Z)((0,yc.c)({type:Vr.z.NewPane,item:function(){return{type:Vr.z.NewPane,pane:n,grid:!0}},end:function(){r()}}),3),l=o[1],c=o[2],u=g.useRef(null),s=(0,i.Z)((0,uc.XZ)(u,!1),4),d=s[0],f=s[1],p=s[2],h=s[3];return(0,uc.Ym)(f,u),function(e){(0,g.useEffect)((function(){e((0,Xd.r)(),{captureDraggingState:!0})}),[e])}(c),(0,a.tZ)(Yd,{pane:n,iconRef:l,buttonRef:u,tabIndex:d,onKeyDown:p,onClick:function(){h(),t({pane:n}),function(e){var n={action:"opened"};switch(ic.n_({category:"dock",message:"Opened ".concat(e)}),e){case"git":return(0,eo.j)(eo.U3.VERSION_CONTROL_FEATURE_USED,n);case"envEditor":return(0,eo.j)(eo.U3.ENV_EDITOR_USED,n);case"database":return(0,eo.j)(eo.U3.DATABASE_USED,{action:"opened",type:"ReplitKV",provider:"replit"});case"neon":return(0,eo.j)(eo.U3.DATABASE_USED,{action:"opened",type:"PostgreSQL",provider:"neon"});case"replAuth":return(0,eo.j)(eo.U3.AUTH_SIDEBAR_USED,n);case"packager":return(0,eo.j)(eo.U3.PACKAGE_MANAGER_USED,n);case"unitTests":return(0,eo.j)(eo.U3.REPL_UNIT_TEST_USED,n);case"debugger":return(0,eo.j)(eo.U3.DEBUGGER_USED,n);case"extensionStore":(0,eo.j)(eo.U3.EXTENSION_STORE_VIEWED,{source:"sidebar"})}}(n.type)}})}var ff=(0,l.iv)([E.l0.pl(8),{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fill, minmax(".concat(60,"px, 1fr))"),gridAutoFlow:"dense"}]);function pf(){var e=sf(Ed.Dock),n=(0,yt.B)(),t=n.length,r=pd();return(0,g.useEffect)((function(){var e=Math.min(300,40*t);r({id:Ed.Dock,preferredHeight:e})}),[t,r]),(0,a.tZ)(Wd,{panes:n,isCollapsed:e,children:(0,a.BX)(a.HY,{children:[(0,a.tZ)(af,{}),(0,a.tZ)(E.G7,{role:"toolbar",css:ff,"aria-label":"Dock","aria-orientation":"horizontal",children:(0,a.tZ)(uc.uP,{options:{direction:"horizontal",loopAround:!0},children:n.map((function(e){return(0,a.tZ)(df,{pane:e},e.type)}))})})]})})}var hf=(0,dn.cn)(null),vf=(0,dn.cn)(null,(function(e,n,t){var r=e(hd);if("start"!==t.type){var i=e(hf);if(!i)throw new Error("");if("update"!==t.type)n(hd,(0,te.ZP)(r,(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.height>=32||lf({sections:e,id:a.id})}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}))),n(hf,null);else{var o=e(vd);n(hd,(0,te.ZP)(i.sectionStart,(function(e){var n=i.heightStart+t.delta;!function(e){var n=e.sections,t=e.id,r=e.totalHeight-n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),i=n.findIndex((function(e){return e.id===t}));if(-1===i)throw new Error("Expected sectionIndex");var o=r+n.slice(i).reduce((function(e,n){return e+n.height}),0),a=n[i],l=e.height>a.height,c=Math.min(o,e.height),u=Math.abs(a.height-c);if(l){a.height=Math.max(0,c);var s=!0,d=!1,f=void 0;try{for(var p,h=n.slice(i+1)[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;if(0!==v.height){if(!(v.height<u)){v.height-=u;break}u-=v.height,v.height=0}}}catch(R){d=!0,f=R}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}else{var m=n[i+1];if(e.height>=0)return a.height=e.height,void(m&&(m.height+=u));var g=a.height;a.height=0;var Z=-1*e.height,y=!0,b=!1,w=void 0;try{for(var x,k=n.slice(0,i).reverse()[Symbol.iterator]();!(y=(x=k.next()).done);y=!0){var C=x.value;if(C.height>Z){g+=Z,C.height-=Z;break}g+=C.height,Z-=C.height,C.height=0}}catch(R){b=!0,w=R}finally{try{y||null==k.return||k.return()}finally{if(b)throw w}}m&&(m.height+=g)}}({headerHeight:sd,totalHeight:o,sections:e,id:i.id,height:n})})))}}else{var a=r.find((function(e){return e.id===t.id}));if(!a)throw new Error("");n(hf,{id:t.id,heightStart:a.height,sectionStart:r})}}));function mf(e){var n=e.id,t=(0,J.Z)((function(){return(0,dn.cn)((function(e){var t;return(null===(t=e(hf))||void 0===t?void 0:t.id)===n}))}),[n]);return(0,dn.Dv)(t)}var gf=(0,dn.cn)((function(e){return e(vt._E)&&!e(hf)}));var Zf=t(72466),yf=t(86851),bf=t(9252),wf=t(38935),xf=t(25741),kf=t(42231),Cf=t(9211),Rf=t(69453),If=t(94135),Tf=(0,g.createContext)(null);function Sf(){var e=(0,g.useContext)(Tf);if(!e)throw new Error("Expected ref");return e}var Gf=t(53426),Ef=t(92732),Pf=t(34856),Df=t(62913),Uf=t(43546);function Bf(){var e,n=(0,ti.Mu)(),t=n.length,r=pd(),i=(0,ti.LM)(),o=(0,ti.EO)();return(0,g.useEffect)((function(){var e=Math.min(300,40*t);r({id:Ed.Extensions,preferredHeight:e})}),[t,r]),(0,a.BX)(a.HY,{children:[(0,a.tZ)(af,{}),(0,a.tZ)(qo.gC,{css:E.l0.p(8),spacing:1,children:n.map((function(n){var t,r;return(0,a.BX)(qo.Ug,{css:[E.l0.width("100%"),E.l0.pl(8)],spacing:1,align:"center",wrap:"nowrap",children:[(null===(t=n.manifest)||void 0===t?void 0:t.icon)?(0,a.tZ)(E.G7,{css:[E.l0.position.relative,E.l0.width(16),E.l0.height(16)],children:(0,a.tZ)(Df.Z,{src:(0,Uf.Vh)(n.baseUrl,n.manifest.icon),width:16,height:16,alt:"Icon for extension: ".concat(n.manifest.name)})}):(0,a.tZ)(ei.Z,{}),(0,a.tZ)(E.xv,{css:[E.l0.flex.growAndShrink(1)],children:null!==(e=null===(r=n.manifest)||void 0===r?void 0:r.name)&&void 0!==e?e:"(unnamed extension)"}),n.error?(0,a.tZ)(Pf.Z,{status:Pf.O.FAILED,content:n.error.friendlyMessage,display:"tooltip"}):null,(0,a.tZ)("div",{children:(0,a.tZ)(Iu.Z,{items:[{label:"Reload",icon:(0,a.tZ)(P.RefreshCw,{}),key:"reload"},{label:"Uninstall",icon:(0,a.tZ)(P.Trash,{}),isDestructive:!0,key:"uninstall"}],label:"Extension Actions",onItemClick:function(e){n.installationId&&("reload"!==e.key?"uninstall"!==e.key||i(n.installationId):o(n.installationId))}})})]},n.extensionId)}))})]})}var _f=(0,dn.cn)(null,(function(e,n,t){var r=e(vt.S6).find((function(n){return t===(0,rn.DQ)(e(n.data))}));r&&n(bt.Bt,r.paneId)}));var Xf={root:(0,l.iv)([E.l0.rowWithGap(4),E.l0.pr(2)])};function Mf(){var e,n,t=(0,Lt.Z)(),r=(0,jn.Z)().session,i=Sf(),o=(0,g.useRef)(null),l=(0,g.useRef)(null),c=(0,xf.Z)(),u=(0,Kt.BN)(),s=(0,kf.Z)(),d=(0,If.z)(),f=Ed.Files,p=sf(f),h=uf(),v=(0,g.useCallback)((function(){p&&h(f)}),[f,p,h]),m=[{label:wf.dk[wf.st.UploadFile],for:null===(e=o.current)||void 0===e?void 0:e.id,run:function(){o.current&&(0,Rf.Z)({replId:t,action:"uploaded",fileType:Hr.Tv.File})}}];s&&m.push({label:wf.dk[wf.st.UploadFolder],for:null===(n=l.current)||void 0===n?void 0:n.id,run:function(){l.current&&(0,Rf.Z)({replId:t,action:"uploaded",fileType:Hr.Tv.Directory})}});return m.push({label:wf.dk[wf.st.OpenPane],run:function(){u({pane:{type:"commands",data:{autoFocus:!0}},edge:"left"})}},{label:wf.dk[wf.st.DownloadZip],run:d},{label:wf.dk[c?wf.st.HideHiddenFiles:wf.st.ShowHiddenFiles],run:function(){r.setAreHiddenFilesVisible(!c)}}),(0,a.BX)(E.G7,{children:[(0,a.tZ)(Cf.Q,{fileUploadInputRef:o,dirUploadInputRef:l,uploadFiles:function(e){var n;return null===(n=i.current)||void 0===n?void 0:n.uploadFiles(e)}}),(0,a.BX)(E.G7,{css:Xf.root,children:[(0,a.tZ)(E.hU,{"data-cy":"filetree-add-file",alt:"New file",tooltipPlacement:"top",onClick:function(){var e;v(),null===(e=i.current)||void 0===e||e.addFileType(Hr.Tv.File)},children:(0,a.tZ)(yf.Z,{})}),(0,a.tZ)(E.hU,{alt:"New folder",tooltipPlacement:"top",onClick:function(){var e;v(),null===(e=i.current)||void 0===e||e.addFileType(Hr.Tv.Directory)},children:(0,a.tZ)(bf.Z,{})}),(0,a.tZ)(Iu.Z,{resetOnSelect:!0,label:"File Actions",items:m,onItemClick:function(e){e.run()}})]})]})}function Af(){var e=Sf(),n=(0,dn.b9)(_f),t=(0,Gf.p)({onFileDoubleClick:n});return(0,a.tZ)(E.G7,{"data-cy":"sidebar-filetree-section",css:[E.l0.position.absolute,E.l0.width("100%"),E.l0.height("100%")],children:(0,a.tZ)(Ud.Z,{ref:e,filetreeApi:t,showHeader:!1,showResources:!1})})}function Of(){var e=pd(),n=(0,Pd.Z)((function(n){n.height&&e({id:Ed.Resources,preferredHeight:n.height})}));return(0,a.tZ)(E.G7,{innerRef:n,children:(0,a.tZ)(Ef.Kq,{})})}function Ff(){var e=(0,nr.C)();return(0,a.tZ)(Zf.Z,{onFileOpen:function(n){return e({path:n})}})}function zf(e){return e.collapsed?(0,a.tZ)(Ef.lR,{}):(0,a.tZ)(E.G7,{children:"Repl Resources"})}var Lf={kaboom:{title:"Kaboom",content:(0,a.tZ)(Ff,{})},files:{title:"Files",controls:(0,a.tZ)(Mf,{}),content:(0,a.tZ)(Af,{})},dock:{title:"Tools",content:(0,a.tZ)(pf,{})},extensions:{title:"Extensions",content:(0,a.tZ)(Bf,{})},resources:{title:(0,a.tZ)(zf,{collapsed:!0}),content:(0,a.tZ)(Of,{})}},Nf={root:(0,l.iv)([E.l0.rowWithGap(4),E.l0.align.center,E.l0.height(sd)]),header:(0,l.iv)([E.l0.reset.button,E.l0.focusRing,E.l0.borderRadius(4),E.l0.ml(8),E.l0.flex.growAndShrink(1),E.l0.rowWithGap(4),E.l0.align.center,E.l0.cursor.pointer]),title:(0,l.iv)([E.l0.fontWeight.medium]),border:(0,l.iv)([E.l0.position.absolute,E.l0.top(0),E.l0.right(0),E.l0.width("calc(100% - ".concat(E.TV.space8,")")),{pointerEvents:"none",borderTop:"1px solid",borderColor:E.TV.outlineDimmest}]),content:(0,l.iv)([E.l0.flex.growAndShrink(1),E.l0.overflowY("auto")])},Wf=(0,g.memo)((function(e){var n=sf(e.id),t=uf(),r=Lf[e.id],i=r.title,o=r.controls;return(0,a.BX)(E.G7,{css:Nf.root,children:[(0,a.BX)(E.G7,{id:"sidebar-section-header-".concat(e.id),tag:"button",onClick:function(){return t(e.id)},css:Nf.header,"aria-expanded":!n,"aria-controls":"sidebar-section-content-".concat(e.id),children:[(0,a.tZ)(Ve.Z,{rotate:n?0:90}),"string"===typeof i?(0,a.tZ)(E.xv,{css:Nf.title,children:i}):g.cloneElement(i,{collapsed:n})]}),o||null]})})),jf=(0,g.memo)((function(e){var n=Lf[e.id].content,t=sf(e.id);return(0,a.tZ)(E.G7,{id:"sidebar-section-content-".concat(e.id),inert:t?"true":void 0,css:[Nf.content,"files"===e.id?E.l0.position.relative:{}],children:(0,a.tZ)(E.G7,{css:E.l0.pb(8),children:n})})})),Hf={root:(0,l.iv)([E.l0.position.relative,E.l0.height(0),E.l0.width("100%"),{zIndex:1,"&:hover > div":{transform:"scaleY(2)"},cursor:"ns-resize"}]),hoverArea:(0,l.iv)([E.l0.position.relative,E.l0.height(8),E.l0.top(-4)])},Vf=(0,g.memo)((function(e){var n=(0,dn.b9)(vf),t=mf({id:e.id});return(0,a.tZ)(E.G7,{css:Hf.root,onPointerDown:function(t){$i(t,{start:function(){n({type:"start",id:e.id})},move:function(e){var t=e.delta;n({type:"update",delta:t.y})},end:function(e){var t=e.delta;n({type:"end",delta:t.y})}})},children:(0,a.tZ)(E.G7,{style:t?{transform:"scaleY(100)"}:void 0,css:Hf.hoverArea})})}));function Kf(e){var n=gd(e.id),t=(0,dn.Dv)(gf),r=mf({id:e.id});return(0,a.BX)(E.G7,{style:{zIndex:r?2:void 0,height:n,position:"relative",transition:t?"height 120ms ease-out":void 0},children:[e.border?(0,a.tZ)(E.G7,{css:Nf.border}):null,(0,a.tZ)(Wf,{id:e.id}),(0,a.tZ)(jf,{id:e.id}),e.resizable?(0,a.tZ)(Vf,{id:e.id}):null]})}var qf=t(61745),Yf={container:(0,l.iv)([E.l0.position.absolute,E.l0.top(0),E.l0.left(0),E.l0.width("100%"),E.l0.height("100%"),E.l0.minWidth(Nr.ih)]),header:(0,l.iv)([E.l0.pl(8),{zIndex:3}]),content:(0,l.iv)([E.l0.flex.growAndShrink(1)]),footer:(0,l.iv)([E.l0.pl(8),E.l0.pt(4),E.l0.colWithGap(8),{zIndex:2}]),help:(0,l.iv)([E.l0.pb(8),E.l0.flex.growAndShrink(1),E.l0.justify.center])};function $f(){return(0,a.BX)(E.G7,{css:Yf.footer,children:[(0,a.tZ)(qf.M,{}),(0,a.tZ)(E.G7,{css:Yf.help,children:(0,a.tZ)(bd.Z,{big:!0})})]})}function Qf(){var e=(0,dn.b9)(md),n=(0,dn.b9)(yd),t=(0,Dd.oj)(),r=ii(),i=(0,g.useRef)(null);(0,g.useEffect)((function(){if(i.current){var n=i.current.getBoundingClientRect().height;e(t?{height:n,sections:[{id:Ed.Files,percent:0}].concat((0,N.Z)(r?[{id:Ed.Kaboom,percent:50},{id:Ed.Dock,percent:30},{id:Ed.Extensions,percent:20}]:[{id:Ed.Kaboom,percent:60},{id:Ed.Dock,percent:40}]),[{id:Ed.Resources,percent:0}])}:r?{height:n,sections:[{id:Ed.Files,percent:50},{id:Ed.Dock,percent:30},{id:Ed.Extensions,percent:20},{id:Ed.Resources,percent:0}]}:{height:n,sections:[{id:Ed.Files,percent:60},{id:Ed.Dock,percent:40},{id:Ed.Resources,percent:0}]})}}),[e,t,r]);var o=(0,Pd.Z)((function(e){e&&n(e.height)}),{wait:100,type:"debounce"});return(0,ac.l)(o,i)}var Jf=(0,g.memo)((function(){var e=(0,dn.Dv)(Zd),n=Qf(),t=(0,g.useRef)(null),r=e[e.length-1];return(0,a.tZ)(Tf.Provider,{value:t,children:(0,a.BX)(E.G7,{css:Yf.container,children:[(0,a.tZ)(E.G7,{css:Yf.header,children:(0,a.tZ)(Gd,{})}),(0,a.tZ)(E.G7,{css:Yf.content,innerRef:n,children:e.map((function(e,n){return(0,a.tZ)(Kf,{id:e,resizable:e!==r,border:0!==n},e)}))}),(0,a.tZ)($f,{})]})})})),ep=t(2520),np=E.KD.div,tp=(0,l.iv)([E.l0.position.absolute,E.l0.center,Pi,{cursor:"ew-resize",":hover":{zIndex:Or.MI.gutterHovered}}]),rp={default:(0,l.iv)([E.l0.height(24),E.l0.width(2),Xi]),active:(0,l.iv)([E.l0.height("100%"),E.l0.width(1),E.l0.backgroundColor.accentPrimaryDefault]),shared:(0,l.iv)([E.l0.borderRadius(4),{transitionProperty:"width, height, background-color",transitionTimingFunction:"ease-out"}])},ip=(0,l.iv)([E.l0.coverContainer,{":hover":{transform:"scaleX(4)"}}]),op=(0,l.iv)([E.l0.position.absolute,E.l0.height("200vh"),E.l0.width("200vw"),{pointerEvents:"none"}]);function ap(){var e=(0,Vs.og)(),n=(0,Vs.TN)(),t=(0,Vs.EU)(),r=(0,Or.bJ)(),i=(0,Ri.T)();return(0,a.BX)(a.HY,{children:[(0,a.BX)(np,{css:[tp,{zIndex:t?r.active:r.normal}],style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},onPointerDown:function(e){$i(e,{start:function(){n.start()},move:function(e){var t=e.delta;n.update({deltaX:t.x})},end:function(){n.end()}})},children:[(0,a.tZ)(E.G7,{className:"grip-line",style:{transitionDuration:i?"0s":"".concat(Oi(e.height),"s")},css:[t?rp.active:rp.default,rp.shared]}),(0,a.tZ)(E.G7,{css:t?op:ip})]}),t?(0,a.tZ)(Ii.a,{cursor:"ew-resize"}):null]})}var lp=(0,l.iv)([E.l0.height("100%"),E.l0.position.absolute,E.l0.top(0),E.l0.left(0),E.l0.flex.row,E.l0.flex.growAndShrink(1),E.l0.overflow("auto")]);function cp(){var e=(0,Nr.Or)(),n=0===e,t=(0,xl.Z)(La.y.Sidepane),r=(0,ep.Z)().isTutorial?null:t;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(E.G7,{css:lp,style:{width:e,visibility:n?"hidden":void 0},innerRef:r,children:(0,a.tZ)(Jf,{})}),(0,a.tZ)(ap,{})]})}var up=(0,g.memo)(cp),sp=t(60336),dp=t(21603),fp=t(63035),pp=t(75192),hp=t(43186),vp=t(18888),mp=t(58482),gp=t(6801),Zp=t(11213),yp=t(75436);function bp(){var e=(0,b.Z)(["\n  subscription ThreadUpdates($replId: String!) {\n    updatedThread: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return bp=function(){return e},e}var wp={},xp=(0,w.Ps)(bp(),gp.j7);function kp(e){!function(e){var n=(0,y.Z)({},wp,e);yp.m(xp,n)}({variables:{replId:e},onData:function(n){var t,r,i=null===(t=n.data)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.updatedThread;i&&"AnnotationAnchor"===i.__typename&&(n.client.cache.updateQuery({query:gp.yi,variables:{replId:e}},(function(e){return(0,te.ZP)(e,(function(e){null!==e&&"Repl"===e.repl.__typename&&(e.repl.annotationAnchors.find((function(e){return e.id===i.id}))||e.repl.annotationAnchors.push(i))}))})),n.client.cache.updateQuery({query:Zp.Jq,variables:{replId:e,path:i.path}},(function(e){return(0,te.ZP)(e,(function(e){var n;e&&"ThreadsByFileResult"===(null===(n=e.threadsByFile)||void 0===n?void 0:n.__typename)&&(e.threadsByFile.threads.find((function(e){return e.id===i.id}))||e.threadsByFile.threads.push((0,nn.Z)((0,y.Z)({},i),{messageCount:i.messages.length,unreadCount:i.messages.filter((function(e){return!e.seen})).length,participants:i.messages.filter((function(e){return!!e.user})).map((function(e){return e.user}))})))}))})))}})}var Cp=t(15335);function Rp(){var e=(0,b.Z)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return Rp=function(){return e},e}var Ip={},Tp=(0,w.Ps)(Rp());var Sp=t(11887);function Gp(){!function(e){var n=(0,y.Z)({},Ip,e);yp.m(Tp,n)}({variables:{replId:(0,Lt.Z)()},skip:(0,Cp.Z)()!==Sp.em.CONNECTED})}var Ep=t(5275),Pp=t(45528),Dp=!1;var Up=t(36774),Bp=(0,dn.cn)(null,(function(e,n){n(vt.g4,{tiling:null,floating:[]}),n(vt.yv,[]),n(vt.Md,null),n(Dr.Mn,null),n(Up.dv,!1),n(Pc.dK,!1),n(bc.sx,null),n(zu,null),n(mt.vA)}));function _p(e){var n=(0,re.Z)(e.initialLayoutState),t=(0,vt.kr)(),r=(0,Lt.Z)(),i=(0,Dr.mk)(),o=(0,dn.b9)(Bp);(0,g.useEffect)((function(){if(t)return i({initialLayoutState:n.current}),function(){o()}}),[r,i,o,t,n])}function Xp(){var e=(0,b.Z)(["\n  mutation UpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return Xp=function(){return e},e}var Mp={},Ap=(0,w.Ps)(Xp());var Op=t(12946);function Fp(){var e=(0,Lt.Z)(),n=(0,jn.Z)().container,t=(0,xr.o3)(),r=(0,i.Z)(function(e){var n=(0,y.Z)({},Mp,e);return ao.D(Ap,n)}(),1)[0],o=(0,hp.Z)().preferences.webviewAutoOpenOnPortOpened,a=(0,i.Z)((0,Op.e)(),1)[0];(0,g.useEffect)((function(){return n.onPortOpened(ne()((function(n){var i,l=n.isVnc;o&&!a&&t(l?"vnc":"webview"),i=l?{isVnc:!0}:{isServer:!0},r({variables:{input:(0,y.Z)({id:e},i)}})}),500,{leading:!0}))}),[n,t,r,e,o])}function zp(){var e=(0,b.Z)(["\n  subscription ReplEnvironmentUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return zp=function(){return e},e}var Lp={},Np=(0,w.Ps)(zp());function Wp(e){var n=e.isAnon,t=e.isOwner,r=e.ignoreUnloadPrompt;!function(e){var n=(0,y.Z)({},Lp,e);yp.m(Np,n)}({skip:n||t,variables:{replId:(0,Lt.Z)()},onData:function(e){var n=e.data.data;!1===(null===n||void 0===n?void 0:n.currentUserCanWrite)&&(r(!0),window.location.reload())}})}function jp(){var e=(0,b.Z)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return jp=function(){return e},e}var Hp=(0,w.Ps)(jp());function Vp(){return(Vp=(0,r.Z)((function(e){var n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:if(!Jt.l)throw new Error("Expected Apollo client");return[4,Jt.l.query({query:Hp,variables:{id:e}})];case 1:return[2,"Repl"===(null===(n=t.sent().data)||void 0===n?void 0:n.repl.__typename)?n.repl.title:null]}}))}))).apply(this,arguments)}function Kp(){var e=(0,jn.Z)(),n=e.container,t=e.presence;g.useEffect((function(){var e=t.onUserJoin((function(t){var r,i=null===(r=n.getContext())||void 0===r?void 0:r.repl;if(i){var o=t.username;return function(e){return Vp.apply(this,arguments)}(i.id).then((function(e){e&&function(e){_s.apply(this,arguments)}({title:"",body:"".concat(o," joined ").concat(e),tag:"".concat(i.id,"-").concat(o,"-joined"),iconByUsername:o,cacheDuration:9e5})})),function(){e()}}}))}),[t,n])}var qp=t(95716);function Yp(){var e=(0,ea.Z)(),n=e.showConfirm,t=e.showNotice,r=e.hideMessage,i=e.showError,o=(0,jn.Z)().container;(0,g.useEffect)((function(){var e=o.onToast((function(e){e.startsWith("PANIC")||t(e,function(e){var n=e.length/.025+1e3;return Math.max(1e4,n)}(e))})),a=null,l=!1,c=o.onConnectionStateChanged((function(e){if(a&&(r(a),a=null),e===Sp.em.CONNECTED)return l=!0,void(a=n("Connected",1500));l&&(e!==Sp.em.CONNECTING?e!==Sp.em.DISCONNECTED||(a=i("Disconnected")):a=t("Reconnecting"))}));return function(){a&&r(a),e(),c()}}),[o,n,t,i,r])}var $p=t(68122),Qp=t(39571);function Jp(e){var n=e.onOpenFile,t=(0,jn.Z)(),r=function(e){var n=e.dotReplit,t=e.debuggest;return(0,g.useEffect)((function(){return n.watch((function(e){var n;e.error||(null===(n=e.config.debugger)||void 0===n?void 0:n.support)&&t.connect()}))}),[n,t]),(0,$p.Z)(t.mainClient)}({debuggest:t.debuggest,dotReplit:t.dotReplit});!function(e){(0,g.useEffect)((function(){if(e){var n=e.onStarted((function(e){(0,eo.j)(eo.U3.DEBUGGER_USED,{action:"started",joined:e})})),t=e.onPaused((function(e){(0,eo.j)(eo.U3.DEBUGGER_USED,{action:"paused",reason:e})})),r=e.onBreakpoint((function(n){(0,eo.j)(eo.U3.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:n,state:e.state.current})}));return function(){n(),t(),r()}}}),[e])}(r),function(e,n){var t,r=n.onOpenFile,i=(0,re.Z)(r),o=(0,$p.Z)(e?e.stackFrames:null),a=null===o||void 0===o?void 0:o[0],l=null===a||void 0===a||null===(t=a.source)||void 0===t?void 0:t.path,c=null===a||void 0===a?void 0:a.line;(0,g.useEffect)((function(){if(l&&c&&e){var n=(0,Qp.om)(l);n?i.current({path:n,line:c}):e.stepOut()}}),[e,l,c,i])}(r,{onOpenFile:n})}var eh=t(53580),nh={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"S"};var th=t(13897),rh=t(86800);var ih=t(50307),oh=t(22371),ah=t(1864),lh="video.json",ch=(0,ah.join)(oh.V,lh);function uh(e,n){return sh.apply(this,arguments)}function sh(){return(sh=(0,r.Z)((function(e,n){var t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return n.find((function(e){return e.type===Hr.Tv.File&&e.filename===lh}))?[4,e.readFile(ch)]:[2,null];case 1:return(t=r.sent()).error?[2,null]:[2,t.content.toString()]}}))}))).apply(this,arguments)}function dh(){!function(e){var n=(0,jn.Z)().fs,r=(0,ep.Z)().isTutorial,o=(0,re.Z)(e);(0,g.useEffect)((function(){if(r){var e=!1,a=n.watchDir(oh.V,{onChange:function(r){Promise.all([t.e(1142).then(t.t.bind(t,11142,23)),uh(n,r)]).then((function(n){var t=(0,i.Z)(n,2),r=t[0],a=t[1];if(!e)if(a){var l=null;try{l=r.parse(a)}catch(u){}var c="object"===typeof l&&"string"===typeof l.embedUrl?l.embedUrl:null;o.current(c?{embedUrl:c}:null)}else o.current(null)}))},onMoveOrDelete:function(){o.current(null)},onError:function(){o.current(null)}});return function(){e=!0,a()}}}),[n,r,o])}((0,cl.gQ)())}var fh=t(55528),ph=t(4862),hh=t(58823);var vh=(0,dn.cn)((function(e){return e(mt.Eh).find((function(n){return"education"===e(n.data).type}))||null})),mh=(0,dn.cn)(null,(function(e,n){var t=e(vh);(null===t||void 0===t?void 0:t.isHidden)?n(xr.Oe,t.paneId):t||n(Kt.g2,{panes:[{type:"education"}],placement:"rightOf",percent:20,relativeTo:["tiling"],makeActive:!0})}));var gh=t(88729);function Zh(){var e=(0,gh.T)(),n=(0,dn.b9)(mh);(0,g.useEffect)((function(){e&&n()}),[e,n])}function yh(){var e=(0,b.Z)(["\n  query TrackMultiplayer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return yh=function(){return e},e}var bh={},wh=(0,w.Ps)(yh());function xh(){var e,n=(0,jn.Z)().presence,t=(0,Lt.Z)(),r=(0,g.useRef)(!1),i=function(e){var n=(0,y.Z)({},bh,e);return x.a(wh,n)}({variables:{replId:t}}),o=i.data,a=i.loading,l=0;"Repl"===(null===o||void 0===o?void 0:o.repl.__typename)&&(l=o.repl.multiplayers.length,"User"===(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)&&(l+=1));(0,g.useEffect)((function(){if(!a&&!r.current){var e=n.onActiveUsersChange((function(){r.current=!0,e(),(0,eo.j)(eo.U3.MULTIPLAYER_REPL_OPENED,{replId:t,participantsCount:l,usersOnlineCount:n.getActiveUsers().length})}));return e}}),[t,a,l,n])}function kh(){var e=(0,Lt.Z)(),n=jl(e),t=Vl(e),r=(0,dn.b9)(pn);(0,g.useEffect)((function(){r({paneType:"chat",indicatorType:n>0?"unread":void 0})}),[r,n]),(0,g.useEffect)((function(){r({paneType:"threadInbox",indicatorType:t>0?"unread":void 0})}),[r,t])}var Ch=t(16568);function Rh(e){var n,t=e.repl,r=e.currentUser,i=r.id===(null===(n=t.user)||void 0===n?void 0:n.id),o=(0,hp.Z)().preferences,a=(0,jn.Z)().session;!function(){var e=(0,jn.Z)(),n=e.lspnix,t=e.lsp,r=e.fs,i=(0,hp.Z)().preferences.codeIntelligence,o=(0,Sa.Z)()||"",a=(0,fh.Z)(o);g.useEffect((function(){if(!i)return t.stop(),void n.disable();t.start(),n.enable()}),[n,t,i]),g.useEffect((function(){if(a&&o&&(0,Qn.Mb)(o))return a.onWorkspaceEdit((function(e){var n=e.edit;return(0,hh.w)({edit:n,fs:r,client:a}),{applied:!0}}))}),[r,a,o]),g.useEffect((function(){if(a&&o&&(0,Qn.Mb)(o)&&(0,ph.Z)(a).isTextDocumentSyncSupported)return r.watchTextFile(o,{onFlush:function(){a.isOpen(o)&&a.notify.didSave(o)}})}),[r,o,a])}(),function(){var e=(0,sp.ne)();(0,g.useEffect)((function(){var n=function(){e({force:!1}),e.flush()};return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e]),(0,g.useEffect)((function(){var n=function(){"hidden"===document.visibilityState&&e({force:!1})};return document.addEventListener("visibilitychange",n),function(){document.removeEventListener("visibilitychange",n)}}),[e]),(0,g.useEffect)((function(){var n=null;return function t(){n=setTimeout((function(){e({force:!1}),t()}),6e4)}(),function(){n&&clearTimeout(n)}}),[e]),(0,g.useEffect)((function(){return function(){e({force:!1}),e.flush()}}),[e])}(),(0,vp.Z)(),(0,Ep.Z)({workspaceType:"desktop"}),g.useEffect((function(){var e=function(e){"s"===e.key&&(0,Hu.j)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),Kp(),Gp(),function(){var e=(0,jn.Z)().presence;g.useEffect((function(){return e.onFollowingUsersChanged((function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,eo.j)(qp.U3.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,eo.j)(qp.U3.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})}))}),[e])}(),Wp({isAnon:!1,isOwner:i,ignoreUnloadPrompt:(0,mp.Z)()}),function(){var e=(0,jn.Z)().presence,n=(0,Sa.Z)();(0,g.useEffect)((function(){e.updateOpenFile(n)}),[e,n])}(),Yp(),(0,Up.ZP)(),(0,eh.Z)(),function(){var e=(0,jn.Z)().runner,n=(0,xr.fN)(),t=(0,xr.dK)(),r=(0,xr.Fg)(),i=(0,Up.Ln)(),o=(0,Dr.x7)(),a=(0,za.e)(La.y.Output);g.useEffect((function(){if(o&&(null===a||void 0===a?void 0:a.isActive)){var e=setInterval((function(){n()}),200);return function(){clearInterval(e)}}}),[null===a||void 0===a?void 0:a.isActive,n,o]),g.useEffect((function(){if(o)return e.onStateChanged((function(e){e===pi.A.RUNNING&&n()}))}),[e,n,o]),g.useEffect((function(){o&&(i?t({type:"instructions"}):r({type:"instructions"}))}),[i,t,r,o]),(0,fi.x)(nh,{run:function(){return t({type:"shell"})},enabled:Boolean(o)})}(),(0,th.Z)(),function(){var e=(0,jn.Z)(),n=e.presence,t=e.session;(0,g.useEffect)((function(){return n.onUserOpenedFile((function(e){var r=e.user,i=e.file,o=n.getFollowedUser();o&&o.id===r.id&&i&&t.openFile(i)}))}),[n,t]);var r=(0,g.useState)(null),i=r[0],o=r[1];(0,g.useEffect)((function(){return n.onFollowedUserChanged(o)}),[n,t]),(0,g.useEffect)((function(){var e=function(){n.unfollowUser()};if(i){var t=setTimeout((function(){document.addEventListener("click",e)}),0);return function(){clearTimeout(t),document.removeEventListener("click",e)}}}),[i])}(),(0,ih.Z)(),dh(),Zh(),function(){var e=(0,ep.Z)().isTutorial,n=(0,cl.$x)();(0,g.useEffect)((function(){e&&n()}),[n,e])}(),kh(),kp(t.id),Jp({onOpenFile:function(e){a.openFile(e.path),a.updateDeeplink(e)}}),function(){var e=(0,rh.JM)().data,n=null===e||void 0===e?void 0:e.currentUser,t=(0,dn.b9)(Nt.H);(0,g.useEffect)((function(){t({flagDraftFiles:Boolean(null===n||void 0===n?void 0:n.flagDraftFiles),flagGhostrunner:Boolean(null===n||void 0===n?void 0:n.flagGhostrunner)})}),[t,n])}();var l=["html","html_beta"].includes(t.language),c=(0,fp.t7)();(0,g.useEffect)((function(){return c(l)}),[c,l]),_p({initialLayoutState:t.layoutState||null}),(0,g.useEffect)((function(){return ic.YA("replId",t.id),pp.c_.setTag("replId",t.id),function(){ic.YA("replId",void 0),pp.c_.setTag("replId",void 0)}}),[t.id]),function(e){var n=e.repl,t=e.currentUser,r=(0,jn.Z)().container,i=(0,m.useRouter)(),o=(0,Pp.b)({repl:n,currentUser:t});(0,g.useEffect)((function(){var e;if(o)return Dp||(Dp=!0,e=i.query.initialConnectionMetadata),r.connect({customConnectionMetadata:e,context:o}),function(){r.close()}}),[o,r]),(0,g.useEffect)((function(){return function(){r.destroy()}}),[r])}({repl:t,currentUser:r}),Fp(),(0,g.useEffect)((function(){var e,n="Repl"===(null===(e=t.origin)||void 0===e?void 0:e.__typename)?t.origin.id:null;return(0,dp.Fy)({id:t.id,slug:t.slug,originId:n,roles:r.roles&&r.roles.map((function(e){return e.name}))}),function(){(0,dp.dv)()}}),[t,r.roles]);var u=(0,vt.Id)(),s=(0,Ri.T)();(0,g.useEffect)((function(){u(!s)}),[s,u]);var d=o.isLayoutStacked,f=(0,fp.Nv)();return(0,g.useEffect)((function(){return f(d)}),[f,d]),xh(),(0,Ch.B)(),null}function Ih(e){var n=e.src,t=e.autoPlay,r=void 0===t||t,i=e.loop,o=void 0===i||i,l=e.width,c=void 0===l?280:l;return(0,a.tZ)(E.G7,{css:[E.l0.p(4),E.l0.borderRadius(8),E.l0.width(c),E.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(E.TV.outlineDimmest)}],children:(0,a.tZ)("video",{style:{width:"100%"},css:E.l0.borderRadius(8),src:n,autoPlay:r,loop:o,playsInline:!0,muted:!0})})}var Th=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},Sh={id:"workspace-desktop-new-user-tour",steps:[{id:La.y.Welcome,isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,a.tZ)(E.G7,{css:[E.l0.maxWidth(400)],children:(0,a.BX)(E.xv,{multiline:!0,children:["The Workspace is where you create projects on Replit. These are called"," ",(0,a.tZ)("strong",{children:"Repls."}),(0,a.tZ)("br",{}),"Let's explore around!"]})})}},{id:La.y.Editor,title:"Code Editor",content:function(){return(0,a.BX)(E.G7,{css:[E.l0.width("100%"),E.l0.center,E.l0.position.relative],children:[(0,a.tZ)(Ih,{src:Th("editor"),autoPlay:!0,loop:!0}),(0,a.tZ)(E.G7,{css:[E.l0.colWithGap(8),E.l0.width("100%"),E.l0.py(8)],children:(0,a.tZ)(E.xv,{multiline:!0,children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:La.y.Examples,title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:La.y.Run,title:"Run Button",content:function(){return(0,a.BX)(E.G7,{css:[E.l0.width("100%"),E.l0.center,E.l0.position.relative],children:[(0,a.tZ)(Ih,{src:Th("run-button"),autoPlay:!0,loop:!0}),(0,a.tZ)(E.G7,{css:[E.l0.colWithGap(8),E.l0.width("100%"),E.l0.py(8)],children:(0,a.tZ)(E.xv,{multiline:!0,children:"Tap the Run button to \u201crun\u201d your code and see its output."})})]})}},{id:La.y.Output,title:"Output",content:function(){return(0,a.BX)(E.G7,{css:[E.l0.width("100%"),E.l0.center,E.l0.position.relative],children:[(0,a.tZ)(Ih,{src:Th("output"),autoPlay:!0,loop:!0}),(0,a.tZ)(E.G7,{css:[E.l0.colWithGap(8),E.l0.width("100%"),E.l0.py(8)],children:(0,a.tZ)(E.xv,{multiline:!0,children:"This is where your run output appears. This can be text, websites, games, and more depending on the template you\u2019re using."})})]})}},{id:La.y.Sidepane,title:"Sidebar",content:function(){return(0,a.BX)(E.G7,{css:[E.l0.width("100%"),E.l0.center,E.l0.position.relative],children:[(0,a.tZ)(Ih,{src:Th("sidebar"),autoPlay:!0,loop:!0}),(0,a.BX)(E.G7,{css:[E.l0.colWithGap(8),E.l0.width("100%"),E.l0.p(8)],children:[(0,a.BX)(E.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Files"})," is where all of your Repl\u2019s code is."]}),(0,a.BX)(E.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,a.tZ)(E.xv,{multiline:!0,children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:La.y.Share,title:"Invite & Collaborate",content:function(){return(0,a.BX)(E.G7,{css:[E.l0.width("100%"),E.l0.center,E.l0.position.relative],children:[(0,a.tZ)(Ih,{src:Th("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,a.tZ)(E.G7,{css:[E.l0.colWithGap(8),E.l0.width("100%"),E.l0.py(8)],children:(0,a.tZ)(E.xv,{multiline:!0,children:"Invite others to your Repl to collaborate and work together at the same time."})})]})}}]},Gh={id:"workspace-desktop-sidebar-tour",steps:[{id:La.y.SidebarAnnouncement,title:"The New Workspace",isModal:!0,content:function(){return(0,a.tZ)(E.G7,{css:[E.l0.maxWidth(400)],children:(0,a.tZ)(E.G7,{css:[E.l0.width("100%"),E.l0.py(8)],children:(0,a.tZ)(E.xv,{multiline:!0,children:"If you\u2019re seeing this, that means you get to test the new Workspace redesign. It has a few key differences we want to show you!"})})})}},{id:La.y.Sidepane,title:"Sidebar",content:function(){return(0,a.BX)(E.G7,{css:[E.l0.width("100%"),E.l0.center,E.l0.position.relative],children:[(0,a.tZ)(Ih,{src:(e="sidebar","/public/videos/workspace-onboarding/".concat(e,".mp4")),autoPlay:!0,loop:!0}),(0,a.BX)(E.G7,{css:[E.l0.colWithGap(8),E.l0.width("100%"),E.l0.p(8)],children:[(0,a.BX)(E.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Files"})," is where all of your Repl\u2019s code is."]}),(0,a.BX)(E.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,a.tZ)(E.xv,{multiline:!0,children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]});var e}},{id:La.y.SidebarButton,title:"Sidebar Button",content:function(){return(0,a.tZ)(E.G7,{css:[E.l0.width("100%"),E.l0.center,E.l0.position.relative],children:(0,a.tZ)(E.G7,{css:[E.l0.width("100%"),E.l0.py(8)],children:(0,a.tZ)(E.xv,{multiline:!0,children:"Tapping on this quickly opens and closes the entire sidebar."})})})}},{id:La.y.GlobalNavButton,title:"Navigation Menu",content:function(){return(0,a.tZ)(E.G7,{css:[E.l0.width("100%"),E.l0.center,E.l0.position.relative],children:(0,a.tZ)(E.G7,{css:[E.l0.width("100%"),E.l0.py(8)],children:(0,a.tZ)(E.xv,{multiline:!0,children:"Tapping on this lets you navigate to other pages on Replit."})})})}},{id:La.y.NotificationsButton,title:"Notifications",content:function(){return(0,a.tZ)(E.G7,{children:(0,a.tZ)(E.G7,{css:[E.l0.width("100%"),E.l0.py(8)],children:(0,a.BX)(E.xv,{multiline:!0,children:["You can access all notifications from this menu."," "]})})})}},{id:La.y.AvatarButton,title:"Profile Menu",content:function(){return(0,a.tZ)(E.G7,{children:(0,a.tZ)(E.G7,{css:[E.l0.width("100%"),E.l0.py(8)],children:(0,a.tZ)(E.xv,{multiline:!0,children:"You can access your profile and account settings from this menu."})})})}},{id:La.y.Feedback,title:"That's all!",isModal:!0,content:function(){return(0,a.tZ)(E.G7,{css:[E.l0.maxWidth(400)],children:(0,a.tZ)(E.G7,{css:[E.l0.width("100%"),E.l0.py(8)],children:(0,a.BX)(E.xv,{multiline:!0,children:["This is the start of many more future updates to the Workspace to help increase the flexibility of Replit.",(0,a.tZ)("br",{}),(0,a.tZ)("br",{}),"If you'd like to leave some feedback, you can"," ",(0,a.tZ)("a",{href:"https://replit.com/@tyler/The-New-Workspace?v=1",target:"_blank",children:(0,a.tZ)("strong",{children:"leave a comment on this Repl"})}),". Happy coding!"]})})})}}]};function Eh(e){var n=e.children,t=e.tour,r=function(e){var n;i&&t&&"function"===typeof(null===(n=window.analytics)||void 0===n?void 0:n.user)&&(0,eo.yV)({id:window.analytics.user().id(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})};if(!t)return(0,a.tZ)(a.HY,{children:n});var i="workspace-desktop-tour"===t.id||"workspace-desktop-new-user-tour"===t.id;return(0,a.tZ)(za.r,{tour:t,onStep:r,onDone:r,children:n})}var Ph=t(79611),Dh=t(50065),Uh=t(42594),Bh={Content:function(e){var n=e.options,t=n.openPane,r=n.paneId,i=n.replacePane,o=e.pane.data.autoFocus,l=(0,bt.cr)({paneId:r}),c=(0,g.useRef)(null);(0,g.useEffect)((function(){var e;l&&(null===(e=c.current)||void 0===e||e.call(c))}),[l]),(0,It.zB)((function(){return{focus:function(){var e;null===(e=c.current)||void 0===e||e.call(c)}}}),[c]);var u=Ut({currentPaneId:r,openFile:(0,g.useCallback)((function(e){var n=e.path;i({type:(0,rn.Dp)({path:n}),data:{path:n}})}),[i])});return(0,a.tZ)(Wn,{autoFocus:o,command:u,onSelect:function(e){if("openFile"!==e.data.type)"openPane"!==e.data.type?"action"!==e.data.type||e.data.run():t(e.data.pane);else{var n=e.data.deeplink.path,r={type:(0,rn.Dp)({path:n}),data:{path:n}};t(r)}},focusRef:c})},Icon:function(){return null},getTitle:function(){return"New tab"}},_h=t(82947),Xh=t(34467),Mh=t(63177),Ah=t(20787),Oh=t(76832),Fh=t(47886),zh=t(56483),Lh={Content:function(e){var n=e.options,t=n.paneId,r=n.isHidden,i=(0,jn.Z)(),o=i.container,l=i.fs,c=i.session,u=i.runner,s=(0,dn.b9)(xr.Oe),d=(0,dn.Dv)(Oh.f),f=(0,Oh.Z)();return(0,Fh.Z)({container:o,runner:u,refreshWebView:f}),(0,zh.Z)({runner:u,refreshWebView:f}),(0,fi.x)(_h.b,{run:function(){s(t),f()}}),vr({match:q,data:{type:"action",label:"Refresh",icon:(0,a.tZ)(Ah.Z,{}),description:"Refresh webview",keyboardShortcut:_h.b,run:function(){s(t),f()}}}),(0,a.tZ)(Mh.Z,{fs:l,session:c,ref:d,isVisible:!r})},Icon:function(e){var n=e.size;return(0,a.tZ)(Xh.Z,{size:n})},getTitle:function(){return"Webview"}};function Nh(){var e=(0,Uh.U)();return(0,nn.Z)((0,y.Z)({},e),{webview:Lh,commands:Bh})}var Wh=t(88710),jh=t(25108);var Hh=t(2548),Vh=t(73825);function Kh(){return(0,a.tZ)(l.xB,{styles:[{body:{overscrollBehaviorX:"none"}}]})}var qh=t(91759),Yh=t(75815),$h=44100,Qh=32896,Jh=function e(){var n=this;(0,Yh.Z)(this,e),this.audioStart=0,this.feed=function(e){var t=n.getFormatedValue(e),r=new Float32Array(n.samples.length+t.length);r.set(n.samples,0),r.set(t,n.samples.length),n.samples=r},this.getFormatedValue=function(e){for(var n=new Float32Array(e.length),t=0;t<e.length;t++)n[t]=e[t]/2147483648;return n},this.stop=function(){if(n.bufferSource)try{n.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(n.audioCtx&&n.samples.length){var t=0,r=n.audioCtx.currentTime;if(0===e)n.startTime=r,n.audioStart=r;else{for(var i=r-n.audioStart,o=Math.floor(i*$h);o>e-Qh;)n.audioStart+=.7459410430839002,o-=Qh;o>e&&(t=o-e,n.startTime=r),n.startTime=r}n.samples=n.samples.slice(t,n.samples.length);for(var a,l,c,u=n.audioCtx.createBufferSource(),s=n.samples.length/1,d=n.audioCtx.createBuffer(1,s,$h),f=0;f<1;f++)for(a=d.getChannelData(f),l=f,c=0;c<s;c++)a[c]=n.samples[l],l+=1;n.startTime<n.audioCtx.currentTime&&(n.startTime=n.audioCtx.currentTime),u.buffer=d,u.connect(n.gainNode),u.start(n.startTime),n.stop(),n.bufferSource=u,n.startTime+=d.duration,n.samples=new Float32Array}},this.samples=new Float32Array;var t=window.AudioContext||window.webkitAudioContext;this.audioCtx=new t,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime};function ev(e){var n=e.container,t=(0,g.useState)(!1),r=t[0],i=t[1],o=(0,g.useRef)(null);(0,g.useEffect)((function(){return n.openChannel({name:"audio",service:"audio"},(function(e){var n=e.channel;if(n){var t=null,r=!1;return n.onCommand((function(e){var n;r||(r=!0,o.current=function(){t=new Jh,o.current=null},i(!0)),t&&(null===e||void 0===e||null===(n=e.audio2)||void 0===n?void 0:n.data)&&(e.audio2.samples||(e.audio2.samples=0),t.feed(Int32Array.from(e.audio2.data)),t.flush(e.audio2.samples))})),function(){i(!1),t&&(t.stop(),t=null),o.current=null}}}))}),[n]);var l=function(){i(!1)};return(0,a.tZ)(E.u_,{isOpen:r,onRequestClose:l,children:(0,a.BX)(E.G7,{css:[E.l0.colWithGap(24)],children:[(0,a.tZ)(E.h4,{variant:"headerDefault",level:1,children:"We hear audio!"}),(0,a.BX)(E.G7,{css:[E.l0.colWithGap(8)],children:[(0,a.tZ)(E.xv,{multiline:!0,children:"Hey! It appears that this Repl is playing audio."}),(0,a.tZ)(E.xv,{multiline:!0,children:"In order for us to hear the audio you\u2019re receiving, please click confirm."})]}),(0,a.BX)(E.G7,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,a.tZ)(E.zx,{onClick:l,text:"Cancel"}),(0,a.tZ)(E.zx,{colorway:"positive",onClick:function(){i(!1),o.current&&o.current()},text:"Confirm",iconLeft:(0,a.tZ)(Ia.Z,{})})]})]})})}var nv=t(39705),tv=t(2146),rv=t(87138),iv=new Date("2022-12-01"),ov=new Date("2022-10-20");function av(){var e,n=(0,rv.lg)(),t=n.data,r=n.loading,i=n.error,o=(0,tv.o)("workspace-history-announcement"),l=o.isLoading,c=o.isDone,u=o.setAsDone,s=new Date,d=(null===t||void 0===t||null===(e=t.currentUser)||void 0===e?void 0:e.timeCreated)?new Date(t.currentUser.timeCreated):null;return r||l||c||i||!d||iv<s||ov<d?null:(0,a.tZ)(E.u_,{centered:!0,isOpen:!c,onRequestClose:function(){return u()},children:(0,a.BX)(E.G7,{css:[E.l0.colWithGap(16)],children:[(0,a.tZ)(E.xv,{variant:"headerDefault",children:"History in the Workspace"}),(0,a.tZ)(E.xv,{multiline:!0,children:"Now, you can scrub through any file history directly in the workspace. You'll see a History button in the bottom right of any file."}),(0,a.tZ)(E.G7,{css:[E.l0.p(4),E.l0.borderRadius(8),E.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(E.TV.backgroundHigher)}],children:(0,a.tZ)("video",{css:E.l0.borderRadius(8),src:"/public/videos/history-demo-new.mp4",autoPlay:!0,muted:!0,playsInline:!0,loop:!0})}),(0,a.tZ)(E.G7,{css:[E.l0.display.flex,E.l0.align.end],children:(0,a.tZ)(E.zx,{text:"Continue Coding",colorway:"primary",onClick:function(){return u()}})})]})})}var lv=t(25977);var cv=function(e){return(0,a.tZ)(mi.u,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,a.BX)(wi.G,{css:[Mr.l0.colWithGap(24)],children:[(0,a.tZ)(yr.h,{variant:"headerDefault",level:2,css:Mr.l0.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,a.tZ)(yr.x,{multiline:!0,children:"Never miss messages from your collaborators if you\u2019re in another tab or window."}),(0,a.BX)(wi.G,{css:[Mr.l0.rowWithGap(12),Mr.l0.justify.end],children:[(0,a.tZ)(xa.zx,{onClick:e.onCancel,text:"Deny",iconLeft:(0,a.tZ)($e.Z,{})}),(0,a.tZ)(xa.zx,{text:"Allow notifications",colorway:"positive",iconLeft:(0,a.tZ)(Ia.Z,{}),onClick:e.onConfirm})]})]})})},uv=t(92364),sv={slides:[{title:"Repl Chat Tab",subtitle:"Chat has a new home. Open it from the sidebar or the New Tab menu.",backgroundImage:"/public/images/threads/chat.png",backgroundColor:E.l0.backgroundColor.yellowStrongest,position:"center"},{title:"Inline Threads",subtitle:(0,a.BX)("span",{css:{".shortcut":{gridGap:"var(--space-2)"},".shortcut div":[E.l0.backgroundColor.backgroundHighest,E.l0.color.foregroundDefault,{border:"1px solid var(--outline-default)"}]},children:["Right click code to start a discussion, or select code and use the hotkey"," ",(0,a.tZ)(sn.Z,{shortcut:{key:"/",altKey:!0},small:!0})]}),backgroundImage:"/public/images/threads/inline.png",backgroundColor:E.l0.backgroundColor.blurpleStronger,position:"center"},{title:"Threads Inbox Tab",subtitle:"All your threads in one place. Open the inbox from the sidebar or the New Tab menu.",backgroundImage:"/public/images/threads/inbox.png",backgroundColor:E.l0.backgroundColor.blueStronger,position:"center"}],date:new Date("2022-11-08")};function dv(){var e=(0,h.Z)("workspace","threads-2-announcement"),n=e.shouldDisplay,t=e.dismiss,r=e.register;return g.useEffect((function(){r()}),[r]),(0,a.tZ)(v.Z,{announcement:sv,showModal:n,onRequestClose:t})}function fv(){var e=(0,g.useState)(!0),n=e[0],t=e[1];return(0,a.tZ)(E.u_,{isOpen:n,onRequestClose:function(){return t(!1)},centered:!0,preventScrollOnFocus:!0,children:(0,a.BX)(E.G7,{css:[E.l0.colWithGap(24)],children:[(0,a.tZ)(E.h4,{level:1,variant:"headerDefault",children:"We've upgraded your project!"}),(0,a.BX)(E.xv,{multiline:!0,children:["Your project is now using Nix behind the scenes, which means that you can now run many more kinds of software in your Repls. You can learn more by reading our"," ",(0,a.tZ)(Rl(),{href:"https://blog.replit.com/nix",children:"announcement blog post"}),","," ",(0,a.tZ)(Rl(),{href:"https://docs.replit.com/programming-ide/nix-on-replit",children:"documentation"}),", or by following our"," ",(0,a.tZ)(Rl(),{href:"https://docs.replit.com/tutorials/python/build-with-nix",children:"Nix with Python tutorial"}),"."]}),(0,a.BX)(E.G7,{children:[(0,a.tZ)(E.xv,{multiline:!0,children:"In order to migrate your Repl to Nix, we had to make some changes:"}),(0,a.BX)("ul",{children:[(0,a.tZ)("li",{children:(0,a.tZ)(E.xv,{multiline:!0,children:"1. Imported some files to support your programming language with Nix"})}),(0,a.tZ)("li",{children:(0,a.tZ)(E.xv,{multiline:!0,children:"2. Turned on a flag that says your Repl is a Nix Repl"})}),(0,a.tZ)("li",{children:(0,a.tZ)(E.xv,{multiline:!0,children:"3. Restarted your Repl"})})]})]}),(0,a.BX)(E.xv,{multiline:!0,children:["Note that any files that might otherwise be overwritten have been backed up to the same file name with a .backup suffix. If you have any issues with your newly-migrated Repl, make sure to check out"," ",(0,a.tZ)(Rl(),{href:"https://ask.replit.com",children:"ask.replit.com"})," to get help."]}),(0,a.tZ)(E.xv,{children:"Enjoy!"}),(0,a.tZ)(E.xv,{children:"\u2014 Replit Staff"})]})})}var pv=t(70710);function hv(e){var n=e.repl,t=e.currentUser,r=function(e){var n=e.repl,t=(0,m.useRouter)(),r=(0,sp.Z4)();(0,g.useEffect)((function(){r(n.id)}),[n.id,r]);var i=(0,nr.C)(),o=(0,Ct.uV)(),a=(0,ri.D)({controlName:"flag-null-diagnostics"}),l=(0,g.useState)(!1),c=l[0],u=l[1],s=(0,g.useState)(!1),d=s[0],f=s[1];return{services:(0,g.useState)((function(){return(0,Dh.Z)({runnerMode:"html"===n.language?"html":"shellrunner",onUnrecoverableError:function(e){var n=(0,Wh.Z)(e);n!==Wh.G.NotFound?n!==Wh.G.NotAllowed?n!==Wh.G.FirewallDenied?(jh.error(e),o({error:e,tags:{services:!0,environment:"desktop"},origin:"replEnvironment2: services/unrecoverableError"})):u(!0):f(!0):t.push("/home","~/")},openFile:i,onFirewallDenied:function(){return u(!0)},enableUserEvents:a})}))[0],ui:(0,g.useState)((function(){return(0,rn.fK)({config:Nh()})}))[0],isFirewallDenied:c,isNotAllowed:d}}({repl:n}),i=r.services,o=r.ui,l=r.isFirewallDenied,c=r.isNotAllowed,u=(0,m.useRouter)().query,d=Od();return(0,a.BX)(Gr,{ui:o,services:i,replId:n.id,replSlug:n.slug,replLanguage:n.language,children:[(0,a.BX)(Js.Z,{origin:"ErrorBoundary: ReplEnvironment2 Top level",bsod:!0,children:[(0,a.tZ)(fi.h,{}),(0,a.tZ)(yi,{isAdmin:t.isAdmin}),(0,a.tZ)(uv.Z,{}),(0,a.tZ)(ec,{repl:n,currentUser:t}),(0,a.tZ)(gr,{}),(0,a.tZ)(Br,{}),(0,a.tZ)(Rh,{repl:n,currentUser:t}),(0,a.tZ)(Zr.Z,{}),(0,a.tZ)(yv,{}),(0,a.tZ)(ev,{container:i.container}),(0,a.tZ)(kr,{}),(0,a.tZ)(Xr,{}),u.didMigrateToNix?(0,a.tZ)(fv,{}):null,d?(0,a.tZ)(av,{}):null,d?(0,a.tZ)(dv,{}):null,d?(0,a.tZ)(M,{}):null,(0,a.tZ)(mv,{isMultiplayerSession:n.multiplayers.length>0}),(0,a.tZ)(nv.Z,{isOpen:l&&!c}),(0,a.tZ)(lv.Z,{isOpen:c}),(0,a.tZ)(s.E,{}),(0,a.tZ)(ci,{})]}),(0,a.tZ)(vv,{})]})}function vv(){var e=(0,i.Z)((0,Ct.qg)(),1)[0],n=(0,sp.lY)();return(0,g.useEffect)((function(){e&&n()}),[e,n]),(0,a.tZ)(qh.Z,{})}function mv(e){var n=function(e){var n=(0,i.Z)(g.useState(!1),2),t=n[0],a=n[1],l=(0,Xs.X)(),c=l&&!l.isDone&&!l.isLoading;return g.useEffect((function(){c||e&&"default"===Ts()&&a(!0)}),[e,c]),{shouldShowModal:t,hideModal:g.useCallback((function(){Us(!0),a(!1)}),[]),confirm:g.useCallback((0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,Es()];case 1:return e.sent(),a(!1),[2]}}))})),[])}}(e.isMultiplayerSession),t=n.shouldShowModal,l=n.hideModal,c=n.confirm;return t?(0,a.tZ)(cv,{onCancel:l,onConfirm:c}):null}var gv=E.KD.div,Zv=(0,l.iv)([E.l0.height("calc(100% - ".concat(f.Mz,"px)")),E.l0.width("100%"),E.l0.top(f.Mz),E.l0.left(0),E.l0.position.absolute]);function yv(){var e=function(){var e=(0,Rt.lY)(),n=(0,g.useRef)(null),t=(0,Pd.Z)((function(t){var r=t.width,i=t.height;if(r&&i&&n.current){var o=n.current.getBoundingClientRect(),a=o.top,l=o.left;e({width:r,height:i,x:l,y:a})}}));return(0,g.useCallback)((function(e){n.current=e,t(e)}),[t])}(),n=(0,vt.kr)(),t=(0,mt.N2)(),r=(0,mt.nG)(),i=(0,mt.rU)();return(0,a.tZ)(gv,{ref:e,css:Zv,children:n?(0,a.BX)(a.HY,{children:[(0,a.tZ)(up,{}),r.map((function(e){return(0,a.tZ)(Ji,{handleId:e},e)})),i.map((function(e){return(0,a.tZ)(xs,{headerId:e},e)})),t.map((function(e){return(0,a.tZ)(ad,{paneId:e},e)})),0===t.length?(0,a.tZ)(Qr,{}):null,(0,a.tZ)(Lr,{}),(0,a.tZ)(ud,{}),(0,a.tZ)(fs,{})]}):null})}var bv=(0,l.iv)([E.l0.position.fixed,E.l0.top(0),E.l0.left(0),E.l0.height("100%"),E.l0.width("100%")]),wv=function(){var e=null,n=(0,m.useRouter)().query;if(!n.replUrl)throw new Error("Expected replUrl to be set");var t=n.replUrl.toString(),r=(0,pv.Cd)({variables:{url:t},ssr:Boolean(n.ssr)}),i=r.data,o=r.loading,l=r.error,s=i&&"Repl"===i.repl.__typename?i.repl:null,f=(null===i||void 0===i?void 0:i.currentUser)||void 0,p="https://replit.com".concat(t),h=function(e){if(e){if(e.description)return e.description;var n=c.Z.get(e.language).displayName;return"A ".concat(n," Repl")}}(s),v=(0,g.useState)(!1),Z=v[0],y=v[1];(0,g.useEffect)((function(){return y(!0)}),[]),(0,Ph.Z)((null===i||void 0===i?void 0:i.repl)||null,t);var b=null;return l?e=(0,a.tZ)(E.G7,{css:[E.l0.center,E.l0.flex.growAndShrink(1)],children:(0,a.tZ)(E.xv,{children:"Something went wrong loading the Repl. Please reload the page and try again."})}):o||!Z?e=(0,a.BX)(E.G7,{css:[E.l0.center,E.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(Ml,{}),(0,a.tZ)(Hh.Z,{height:100})]}):s&&f?(e=(0,a.tZ)(hv,{repl:s,currentUser:f},s.id),b=function(e){var n=e.isLesson,t=e.hasSeenOldWorkspaceTour;return n?null:t?Gh:Sh}({isLesson:Boolean(s.lesson),hasSeenOldWorkspaceTour:f.hasSeenOldWorkspaceTour})):e=(0,a.BX)(E.G7,{css:[E.l0.center,E.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(Ml,{}),(0,a.tZ)(Hh.Z,{height:100})]}),(0,a.tZ)(Eh,{tour:b,children:(0,a.tZ)(u.Z,{children:(0,a.tZ)(d.Z,{dataCy:"workspace-page",title:"".concat((null===s||void 0===s?void 0:s.title)||""),oembedUrl:p,description:h,noHeader:!0,noFooter:!0,forceDrawer:!0,hideSidebar:!0,hideEmailVerify:!0,children:(0,a.BX)(E.Tg,{css:bv,children:[(0,a.tZ)(Vh.g,{}),(0,a.tZ)(Kh,{}),e]})})})})};wv.getInitialProps=function(){var e=(0,r.Z)((function(e){var n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return n=e.req,t=e.store,[4,(0,L.Z)(n,t)];case 1:return r.sent(),[2,{}]}}))}));return function(n){return e.apply(this,arguments)}}();var xv=wv},7900:function(e,n,t){"use strict";t.d(n,{Pc:function(){return b},Pu:function(){return C}});var r=t(14251),i=t(32692),o=t(31230),a=t(21767);function l(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplateMember on TeamMembership {\n    id\n    user {\n      id\n      image\n      username\n      firstName\n      lastName\n    }\n    nickname\n    email\n    permissions\n  }\n"]);return l=function(){return e},e}var c=(0,o.Ps)(l()),u=t(16092),s=t(37887);function d(){var e=(0,i.Z)(["\n  fragment TeamTemplateUser on User {\n    id\n    username\n    displayName\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...TeamTemplateUser\n    }\n    repl {\n      id\n      title\n      timeCreated\n      template {\n        id\n        dueDate\n      }\n      ...ReplLinkRepl\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamTemplateSubmissionGroup on ReplSubmissionGroup {\n    submission {\n      id\n      timeSubmitted\n      timeLastReviewed\n      isGroupSubmission\n      repl {\n        id\n        url\n        nextPagePathname\n      }\n    }\n    users {\n      id\n      ...TeamTemplateUser\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplate on ReplTemplate {\n    id\n    isGroupProject\n    isPublished\n    imageUrl\n    url\n    dueDate\n    repl {\n      id\n    }\n    team {\n      id\n      username\n      displayName\n      members {\n        id\n        ...TeamTemplateReplTemplateMember\n      }\n    }\n    author {\n      id\n      username\n      image\n      ...UserLinkUser\n    }\n    submissions {\n      id\n      ...TeamTemplateReplSubmission\n    }\n    submissionGroups {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamTemplateRepl on Repl {\n    id\n    title\n    slug\n    description\n    ...ReplLinkRepl\n    template {\n      id\n      ...TeamTemplateReplTemplate\n    }\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  query TeamTemplate($replUrl: String!) {\n    repl(url: $replUrl) {\n      ... on Repl {\n        id\n        ...TeamTemplateRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n        repl {\n          id\n        }\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},Z=(0,o.Ps)(d()),y=(0,o.Ps)(f(),Z,a.Y),b=(0,o.Ps)(p(),Z),w=(0,o.Ps)(h(),c,u._,y,b),x=(0,o.Ps)(v(),a.Y,w),k=(0,o.Ps)(m(),x);function C(e){var n=(0,r.Z)({},g,e);return s.a(k,n)}}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[2240,3662,3443,7570,6344,8532,8966,4778,9441,7485,3795,5499,4837,4475,1674,1889,891,1783,1390,45,2588,882,6286,9922,8723,2350,6679,607,3036,7808,3426,6957,2809,8958,9774,2888,179],(function(){return n(25436),n(60937)}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=replEnvironment2-7357cb342aa33d47.js.map